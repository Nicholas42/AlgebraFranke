\documentclass[a4paper,parskip=half,numbers=enddot, DIV=12]{scrreprt}
\usepackage[utf8]{inputenc}

\usepackage{../header}
%https://tex.stackexchange.com/questions/425600/latex-error-command-counterwithout-already-defined
\let\counterwithout\relax
\let\counterwithin\relax
\usepackage{../frankenumbering}
\usepackage{chngcntr}
\usepackage{../shortcuts}

\usepackage{csquotes}
%\usepackage{tikz-cd}%I cannot draw diagrams without it - Felix. %well, I can - Ferdinand
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
\setcounter{biburlnumpenalty}{7000}
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\addbibresource{../literatur.bib}

% Title Page
\title{Algebraic Geometry II}
\author{Ferdinand Wagner}
\date{Sommersemester 2018}

\displaywidowpenalty=8000
%\postdisplaypenalty=8000
\widowpenalty=8000
\clubpenalty=8000

\newcommand{\vC}{\v{C}}

\begin{document}
\pagenumbering{Alph}
\maketitle
\pagenumbering{roman}

\thispagestyle{plain}
This text consists of notes on the lecture Algebraic Geometry II, taught at the University of Bonn by Professor Jens Franke in the summer term (Sommersemester) 2018. 

Please report bugs, typos etc. through the \emph{Issues} feature of github.

\tableofcontents

\addchap{Introduction}
\pagenumbering{arabic}
This lecture will develop the cohomology of (quasi)coherent sheaves of modules. Professor Franke assumes familiarity with the contents of last term's Algebraic Geometry I. In particular, this includes the category of (pre)schemes, equalizers and fibre products of preschemes as well as in arbitrary categories and quasi-coherent $\Oo_X$-modules. If you want to brush up your knowledge about these topics, the \href{https://github.com/Nicholas42/AlgebraFranke/tree/master/AlgGeoI}{\emph{lecture notes from Algebraic Geometry I}} \cite{alggeo1} might be your friend.

Professor Franke started the lecture with an example of sheaf cohomology entering the game. Let $X$ be a topological space, $\Cc_X$ the sheaf of continuous $\IC$-valued functions on $X$ and $\underline{\IZ}_X$ the sheaf of locally constant (i.e., continuous) functions on $X$ with values in $\IZ$. Then there is a short exact sequence
\begin{align*}
	0\morphism \underline{\IZ}_X\morphism[\cdot 2\pi\mathrm{i}] \Cc_X\morphism[\exp]\Cc_X^\times\morphism 0
\end{align*}
of sheaves of abelian groups. In general, taking global section doesn't preserve exactness but gives rise to a long exact sequence
\begin{diagram*}
	\node[ob] (0o) at (0,1.5) {$0$};
	\node[ob] (0u) at (0,0) {$0$};
	\node[ob] (H0Z) [right=0.5 of 0u] {$H^0(X,\underline{\IZ}_X)$};
	\node[ob] (H0CX) [right=0.5 of H0Z] {$H^0(X,\Cc_X)$};
	\node[ob] (H0CXx) [right=0.5 of H0CX] {$H^0(X,\Cc_X^\times)$};
	\node[ob] (Z) at (0o -| H0Z) {$\underline{\IZ}_X(X)$};
	\node[ob] (CX) at (0o -| H0CX) {$\Cc_X(X)$};
	\node[ob] (CXx) at (0o -| H0CXx) {$\Cc_X^\times(X)$};
	\node[ob, shift={(0,1.5)}] (H1Z) [right=0.75 of H0CXx] {$H^1(X,\underline{\IZ}_X)$};
	\node[ob] (H1CX) [right=0.5 of H1Z] {$H^1(X,\Cc_X)$};
	\node[ob] (dots) [right=0.5 of H1CX] {$\ldots$};
	\scriptsize
	\draw[->] (0o) -- (Z);
	\draw[->] (0u) -- (H0Z);
	\draw[->] (Z) -- (CX);
	\draw[->] (H0Z) -- (H0CX);
	\draw[->] (CX) -- (CXx);
	\draw[->] (H0CX) -- (H0CXx);
	\draw[->] (CXx) -- (H1Z) node[pos=0.5, above] {$d$};
	\draw[->] (H0CXx) -- (H1Z);
	\draw[->] (H1Z) -- (H1CX);
	\draw[->] (Z) -- (H0Z) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (CX) -- (H0CX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (CXx) -- (H0CXx) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (H1CX) -- (dots);
\end{diagram*}
in which the $H^k(X,\underline{\IZ}_X)$, $H^k(X,\Cc_X)$, and $H^k(X,\Cc_X^\times)$ are \emph{sheaf cohomology groups}. There is the more general notion of \emph{derived functors} (Grothendieck, T\^{o}hoku paper), but this won't appear in the lecture.

Background in homological algebra is not required safe for cohomology groups of cochain complexes, the long exact cohomology sequence and the following famous lemma.
\begin{lem*}[Five lemma] Given a diagram
	\begin{diagram*}
		\node[ob] (A) at (0,1.5) {$A$};
		\node[ob] (B) at (1.5,1.5) {$B$};
		\node[ob] (C) at (3,1.5) {$C$};
		\node[ob] (D) at (4.5,1.5) {$D$};
		\node[ob] (E) at (6,1.5) {$E$};
		\node[ob] (A') at (0,0) {$A'$};
		\node[ob] (B') at (1.5,0) {$B'$};
		\node[ob] (C') at (3,0) {$C'$};
		\node[ob] (D') at (4.5,0) {$D'$};
		\node[ob] (E') at (6,0) {$E'$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C);
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C');
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (A) -- (A') node[pos=0.5, left] {$\alpha$};
		\draw[->] (B) -- (B') node[pos=0.5, left] {$\beta$};
		\draw[->] (C) -- (C') node[pos=0.5, left] {$\gamma$};
		\draw[->] (D) -- (D') node[pos=0.5, left] {$\delta$};
		\draw[->] (E) -- (E') node[pos=0.5, left] {$\epsilon$};
	\end{diagram*}
	of (abelian) groups/$R$-modules/etc.\ with exact rows, in which $\beta$ and $\delta$ are isomorphisms, $\alpha$ is an epimorphism and $\epsilon$ a monomorphism, then $\gamma$ is an isomorphism as well.
\end{lem*}
\begin{proof}
	Easy diagram chase.
\end{proof}

\chapter{Cohomology of quasi-coherent sheaves of modules}
\section{Recollection of basic definitions and results}
\begin{defi}[{\cite[Definition~1.5.2 and Definition~1.5.9\itememph{b}]{alggeo1}}]
	\begin{alphanumerate}
		\item A \defemph{prescheme} (Franke uses ``EGA termology'') is a locally ringed space $(X,\Oo_X)$ which locally has the form $\Spec R$ for some rings $R$.
		\item A prescheme $X$ is called a \defemph{scheme}, if, for any prescheme $T$ and any pair of morphisms $T\doublemorphism[a][b]X$, the equalizer $\Eq\Big(T\doublemorphism[a][b]X\Big)$ is a closed subprescheme of $X$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	Equivalently, a prescheme $X$ is a scheme iff the diagonal $\Delta\colon X\xrightarrow{(\id_X,\id_X)}X\times X$ is a closed immersion (cf.\ \cite[Fact~1.5.8]{alggeo1}). In other words, schemes are \emph{separated} preschemes
\end{rem*}
\begin{prop}\lbl{prop:SchemesAffineIntersec}
	If $U$ and $V$ are affine open subsets of a scheme $X$, then their intersection $U\cap V$ is again affine (and open of course).
\end{prop}
\begin{proof}
	This was proved in \cite[Proposition~1.5.4]{alggeo1}.
\end{proof}
	Note that open subsets of the form $\Spec(R_f)\simeq \Spec R\setminus V(f)$ form a topology base on $\Spec R$ and that the \emph{saturation} of $\{1,f,f^2,\ldots\}$ (i.e.\ the largest multiplicative subset of $R$ which still gives the same localization) depends only on $\Spec R\setminus V(f)$. Hence, for any $R$-module $M$, the localization $M_f$ depends (up to canonical isomorphism) only on $\Spec R\setminus V(f)$ and $M$. One defines a sheaf of modules $\snake{M}$ on $\Spec R$ as the sheafification of $\Spec (R_f)\mapsto M_f$. Then
	\begin{align*}
		\snake{M}(U)=\left\{(m_\pp)_{\pp\in U}\in\prod_{\pp\in U}M_\pp\st
		\begin{array}{c}
			\text{for every }\qq\in U\text{ there are }f\in R\setminus\qq\text{ and }\mu\in M_f\text{ such that}\\
			m_\pp=\left(\text{image of }\mu\text{ under }M_f\morphism M_\pp\right)\text{ for all }\pp\in\Spec (R_f)
		\end{array}
		\right\}
	\end{align*}
\begin{defi}[{\cite[Definition~1.4.2]{alggeo1}}]\lbl{def:QuasicoherentSpecR}
	A sheaf of modules $\Mm$ on $\Spec R$ is called \defemph{quasi-coherent} if $\Mm\simeq \snake{M}$ for some $R$-module $M$.
\end{defi}
\begin{defi}[{\cite[Definition~1.5.3]{alggeo1}}]
	A prescheme is called \defemph{quasi-compact} if the underlying topological space is quasi-compact and \defemph{quasi-separated} if the intersection of any two quasi-compact open subsets is quasi-compact.
\end{defi}

\begin{defi}[{\cite[Definition~1.5.4]{alggeo1}}]\lbl{def:Quasicoherent}
	Let $X$ be a prescheme. An $\Oo_X$-module $\Mm$ is called \defemph{quasi-coherent} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}
		\item $X$ may be covered by affine open subsets $U$ such that $\Mm|_U$ is quasi-coherent in the sense of Definition~\reff{def:QuasicoherentSpecR}.
		\item For any affine open $U\subseteq X$, $\Mm|_U$ is quasi-coherent.
		\item For any quasi-compact and quasi-separated open $U\subseteq X$ and $f\in\Oo_X(U)$, the canonical morphism
		\begin{align}\lbl{eq:qcIso}
		\Mm(U)_f\morphism\Mm(U\setminus V(f))
		\end{align}
		(coming from the universal property of localization) is an isomorphism.
		\item The morphism \eqreff{eq:qcIso} is an isomorphism when $U$ is quasi-compact and quasi-separated and injective when $U$ is only quasi-compact.
		\item When $U\subseteq X$ is affine, the canonical morphism
		\begin{align}\lbl{eq:qcIso2}
		\Mm(U)_{\pp_x}\morphism\Mm_x
		\end{align}
		is an isomorphism for all $x\in U$, where $\pp_x=\left\{f\in\Oo_X(U)\st x\in V(f)\right\}$ is the prime ideal in $\Spec \Oo_X(U)$ corresponding to $x$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	To be fair: Despite Professor Franke's usual fondness of proving definitions (or rather stating definitions in a way they need a proof), the equivalence of \itememph{a} to \itememph{d} wasn't proposed as a definition in Algebraic Geometry I. 
\end{rem*}
\begin{proof}[Proof of Definition~\reff{def:Quasicoherent}]
	 The equivalence of  \itememph{a} to \itememph{d} was proved in \cite[Proposition~1.5.1]{alggeo1}, but property \itememph{e} is something we haven't seen yet. Recall the \emph{adjunction} (cf.\ Definition~\reff{def:AdjointFunctors})
	\begin{align}\lbl{eq:ROXAdjunction}
		\Hom_{\Oo_{\Spec R}}(\snake{M}, \Nn)\isomorphism\Hom_R(M,\Nn(\Spec R))
	\end{align}
	for $M$ an $R$-module and $\Nn$ a sheaf of $\Oo_{\Spec R}$-modules (cf.\ \cite[Proposition~1.4.3]{alggeo1}). When \eqreff{eq:qcIso2} is an isomorphism for all $x\in U\simeq\Spec R$, it follows that the canonical morphism $\snake{M}\morphism\Mm|_U$ (with $M=\Mm(U)$) coming from \eqreff{eq:ROXAdjunction} is an isomorphism on stalks, hence an isomorphism. This shows \itememph{e} $\Rightarrow$ \itememph{b}.
	
	Conversely, if \itememph{b} holds, then $\snake{M}\morphism\Mm|_U$ (with $M=\Mm(U)$) is an isomorphism for all affine open $U\subseteq X$, hence induces isomorphisms on stalks, which shows \itememph{b} $\Rightarrow$ \itememph{e}. Hence, \itememph{e} is equivalent to the other properties.
\end{proof}

Let $\Aa$ be the category $R\cat{-Mod}$ and $\Bb$ be $\Oo_{\Spec R}\cat{-Mod}$, then the functor $L$ given by $M\mapsto\snake{M}$ and the functor $\Mm\mapsto\Mm(\Spec R)$ are an adjoint pair of functors by \eqreff{eq:ROXAdjunction}. It follows that $L$ commutes with cokernels and coproducts. In particular, the full subcategory $\cat{QCoh}(X)\subseteq\Oo_X\cat{-Mod}$ of quasi-coherent $\Oo_X$-modules is closed under taking cokernels and direct sums for $X=\Spec R$, and by locality of quasi-coherentness this holds for all preschemes $X$.
\begin{defi}[{\cite[Definition~2.1.1 and Definition~2.1.2]{alggeo1}}]
	A morphism $X\morphism[f]Y$ of preschemes is \defemph{quasi-compact} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}
		\item For quasi-compact open $U\subseteq Y$, $f^{-1}(U)$ is quasi-compact.
		\item For affine open $U\subseteq Y$, $f^{-1}(U)$ is quasi-compact.
		\item One can cover $Y$ by affine open $U$ such that $f^{-1}(U)$ is quasi-compact.
	\end{alphanumerate}
	It is called \defemph{quasi-separated} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}\setcounter{enumi}{3}
		\item For an open quasi-separated $U\subseteq Y$, $f^{-1}(U)$ is quasi-separated again.
		\item For affine open subsets $U\subseteq Y$, $f^{-1}(U)$ is quasi-separated.
		\item It is possible to cover $Y$ by affine open $U$ such that $f^{-1}(U)$ is quasi-separated.
	\end{alphanumerate}
\end{defi}
\begin{proof}
	Equivalence was proved in \cite[Fact~2.1.1]{alggeo1} for quasi-compactness and \cite[Lemma~2.1.1]{alggeo1} for quasi-separatedness.
\end{proof}

\begin{prop}\lbl{prop:PushforwardOfQcIsQc}
	If $X\morphism[f]Y$ is quasi-compact and quasi-separated morphism of preschemes and $\Mm\in\Ob(\cat{QCoh}(X))$, then $f_*\Mm\in\Ob\left(\cat{QCoh}\right)$.
\end{prop}
\begin{proof}
	This is \cite[Proposition~1.5.2\itememph{b}]{alggeo1}.
\end{proof}
\begin{prop}
	\begin{alphanumerate}
		\item \lbl{prop:QCohHasKerCoker}The full subcategory $\cat{QCoh}(X)\subseteq\Oo_X\cat{-Mod}$ of quasi-coherent sheaves of $\Oo_X$-modules on a prescheme $X$ is closed under taking kernels and cokernels of morphisms and under taking (finite) direct sums.
		\item If $\Mm$ is a quasi-coherent $\Oo_X$-module and $U\subseteq X$ open, then $\Mm|_U\in\Ob\left(\cat{QCoh}(U)\right)$.
	\end{alphanumerate}
\end{prop}
\begin{proof}
	Part \itememph{a}. For cokernels and finite direct sums (which are finite coproducts since $\Oo_X\cat{-Mod}$ is an abelian category by Proposition~\reff{prop:RmodAbelian}), consider the case $X=\Spec R$ first. Then $R\cat{-Mod}\morphism[L]\Oo_X\cat{-Mod}$, $M\mapsto\snake{M}$ and $\Oo_X\cat{-Mod}\morphism R\cat{-Mod}$, $\Mm\mapsto\Mm(X)$ are adjoint functors by \eqreff{eq:ROXAdjunction}. By Remark~\reff{rem:AdjunctionPreservesStuff}, $L$ preserves cokernels and coproducts. By locality of quasi-coherentness, this follows for all preschemes $X$.
	
	Closedness under taking kernels was proved in \cite[Fact~1.5.3]{alggeo1}. It's worth pointing out that in fact, the proof given there shows that $M\mapsto\snake{M}$ preserves kernels as well. 
	
	Part \itememph{b} follows immediately from (e.g.) Definition~\reff{def:Quasicoherent}\itememph{b}.
\end{proof}
\begin{cor}\lbl{cor:kerAndCokerForQcModules}
	Let $X$ be a prescheme, $\Mm\morphism[f]\Nn$ a morphism of quasi-coherent $\Oo_X$-modules and $U\subseteq X$ open, then
	\begin{align*}
		\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\ker(f)(U)\;.
	\end{align*}
	If $U$ is, in addition, affine, then
	\begin{align*}
		\coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\coker(f)(X)\;.
	\end{align*}
\end{cor}
\begin{proof}
	The first assertion holds by our explicit construction of $\ker(f)$ in Lemma~\reff{lem:RModHasKernels}. For the second one, we may assume $X=U=\Spec R$. Denoting $M=\Mm(X)$, $N=\Nn(X)$, then
	\begin{align*}
		\coker\Big(\Mm\morphism[f]\Nn\Big)=\coker\Big(\snake{M}\morphism[f]\snake{N}\Big)\simeq\Big(\coker\Big(M\morphism[f]N\Big)\Big)^\sim
	\end{align*}
	as $M\mapsto\snake{M}$ preserves cokernels.
\end{proof}
\begin{cor}\lbl{cor:GlobalSectionsExactOnAffine}
	Let $0\morphism\Mm'\morphism\Mm\morphism\Mm''\morphism0$ be a short exact sequence of quasi-coherent $\Oo_X$-modules on a prescheme $X$ and $U\subseteq X$ be affine open, then 
	\begin{align*}
		0\morphism\Mm'(U)\morphism\Mm(U)\morphism\Mm''(U)\morphism 0
	\end{align*}
	is exact as well.
\end{cor}
\begin{proof}
	Follows from Corollary~\reff{cor:kerAndCokerForQcModules}.
\end{proof}
\begin{rem*}
	It turns out to be sufficient to assume that two of the above three sheaves $\Mm',\Mm,\Mm''$ are quasi-coherent. Indeed, we proved in Proposition~\reff{prop:QCohHasKerCoker} that kernels and cokernels of morphisms between quasi-coherent sheaves are quasi-coherent again, so the only case in question is where $\Mm$ is not required to be quasi-coherent. This case, however, will be treated by cohomological methods.
\end{rem*}
Our plan is to associate to any quasi-coherent $\Oo_X$-module on a scheme $X$ \emph{cohomology groups} $H^i(X,\Mm)$ such that
\begin{itemize}
	\item $H^0(X,\Mm)\simeq\Mm(X)$.
	\item when $0\morphism\Mm'\morphism\Mm\morphism\Mm''\morphism0$ is an exact sequence of $\Oo_X$-modules, we have a canonical long exact sequence
	\begin{multline*}
		0\morphism H^0(X,\Mm')\morphism H^0(X,\Mm)\morphism H^0(X,\Mm'')\\
		\morphism[d] H^1(X,\Mm')\morphism H^1(X,\Mm)\morphism H^1(X,\Mm'')\morphism[d]H^2(X,\Mm')\morphism\ldots
	\end{multline*}
\end{itemize}
But before we do this, we to introduce the notion of \emph{coherent} $\Oo_X$-modules.
\begin{prop}
	If $X$ is a prescheme, associating to (the isomorphism class of) a closed embedding $Y\morphism[i]X$ the sheaf of ideals $\Jj=\ker\Big(\Oo_X\morphism[i^*]i_*\Oo_X\Big)$ gives a bijection between the set of closed subpreschemes of $X$ and the quasi-coherent sheaves of ideals in $\Oo_X$.
\end{prop}
\begin{proof}
	This is \cite[Proposition~1.5.3]{alggeo1}.
\end{proof}
\begin{lem}\lbl{lem:locFinGen}
	For a quasi-coherent $\Oo_X$-module $\Mm$ on a prescheme $X$, the following conditions are equivalent.
	\begin{alphanumerate}
		\item For any affine open $U\subseteq X$, $\Mm(U)$ is a finitely generated $\Oo_X(U)$-module.
		\item It is possible to cover $X$ by affine open subsets $U\subseteq X$, for which $\Mm(U)$ is a finitely generated $\Oo_X(U)$-module.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	This will follow from Lemma~\reff{lem:localProperty} and Lemma~\reff{lem:FinitelyGeneratedLocal} below.
\end{proof}
\begin{lem}\lbl{lem:localProperty}
	Let $\Pp$ be a property of affine open subsets of a prescheme $X$ such that
	\begin{alphanumerate}
		\item[\itememph{\alpha}] If $U\subseteq X$ is affine and $f\in\Oo_X(U)$, then $\Pp(U)$ implies $\Pp(U\setminus V(f))$.
		\item[\itememph{\beta}] If $U$ is affine and $f_1,\ldots,f_n\in\Oo_X(U)$ are such that $\bigcap_{i=1}^nV(f_i)=\emptyset$ and such that $\Pp(U\setminus V(f_i))$ holds for all $i=1,\ldots,n$, then $\Pp(U)$ holds.
	\end{alphanumerate}
	Then the following assertions about $X$ are equivalent.
	\begin{alphanumerate}
		\item If $U\subseteq X$ is affine open, $\Pp(U)$ holds.
		\item $X$ may be covered by affine open $U$ for which $\Pp(U)$ holds.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	We proved this in \cite[Lemma~2.2.2]{alggeo1}.
\end{proof}
\begin{lem}
	\begin{alphanumerate}
		\item \lbl{lem:FinitelyGeneratedLocal}If $M$ is a finitely generated $R$-module, then $M_f$ is a finitely generated $R_f$-module.
		\item If $M$ is an $R$-module and $f_1,\ldots,f_n\in R$ such that $\bigcap_{i=1}^nV(f_i)=\emptyset$ in $\Spec R$ and such that $M_{f_i}$ is finitely generated over $R_{f_i}$, then $M$ is finitely generated over $R$.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	Part \itememph{a} is trivial, as the images of $R$-generators of $M$ in $M_f$ generate it as an $R_f$-module.
	
	Now for part \itememph{b}. As $M_{f_i}$ is finitely generated over $R_{f_i}$, there are $k\in\IN$ and $m_{i,j}\in M$, $j=1,\ldots,N_i$ such that $m_{i,j}f^{-k}$ generate $M_{f_i}$ over $R_{f_i}$ (as there are only finitely many generators, we can choose a common exponent $k$ for all of them). Then also the $m_{i,j}$ generate $M_{f_i}$ since $f_i$ is a unit in $R_{f_i}$. We claim that the $\left\{m_{i,j}\st i=1,\ldots, n\text{ and }j=1,\ldots, N_i\right\}$ generate $M$ as an $R$-module. Indeed, let $m\in M$, then
	\begin{align*}
		m=\sum_{j=1}^{N_i}\frac{r_{i,j}}{f_i^\ell}m_{i,j}\quad\text{in }M_{f_i}\;,
	\end{align*}
	where $r_{i,j}\in R$ and $\ell\in\IN$ (again, we can choose a common exponent $\ell$). Then there is some $\ell'\in \IN$ such that
	\begin{align*}
		f_i^{\ell+\ell'}m=\sum_{j=1}^{N_i}r_{i,j}f_i^{\ell'}m_{i,j}\quad\text{in }M\;.
	\end{align*}
	Replacing $\ell$ by $\ell+\ell'$ and $r_{i,j}$ by $f_i^{\ell'}r_{i,j}$ we may assume $\ell'=0$, i.e.
	\begin{align*}
		f_i^{\ell}m=\sum_{j=1}^{N_i}r_{i,j}m_{i,j}\quad\text{in }M\;.
	\end{align*}
	We now have $\bigcap_{i=1}^nV(f_i^\ell)=\bigcap_{i=1}^nV(f_i)=\emptyset$, hence the ideal generated by the $f_i^\ell$ is $R$ and we thus find $g_1,\ldots,g_n\in R$ such that $\sum_{i=1}^{n}f_i^\ell g_i=1$ in $R$. It follows that
	\begin{align*}
		m=\sum_{i=1}^nf_i^\ell g_im=\sum_{i=1}^{n}\sum_{j=1}^{N_i}r_{i,j}g_im_{i,j}
	\end{align*}
	is an element of the submodule generated by the $m_{i,j}$.
\end{proof}
\begin{defi}
	\begin{alphanumerate}
		\item We call a quasi-coherent $\Oo_X$-module \defemph{locally finitely generated} it it satisfies the equivalent conditions from Lemma~\reff{lem:locFinGen}.
		\item When $X$ is locally Noetherian (cf. \cite[Definition~2.2.2]{alggeo1}), an $\Oo_X$-module is called \defemph{coherent} if it is quasi-coherent and locally finitely generated.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	There is a general definition of \emph{coherent} sheaves of modules on arbitrary ringed spaces, which in the case of a locally Noetherian prescheme is equivalent to the above.
\end{rem*}
%Composite letter `\textasciicaron+C'(hyperref) not defined in PD1 encoding,(hyperref) removing `\textasciicaron'
\section{\vC ech cohomology}
Let $\Uu\colon X=\bigcup_{i\in I}U_i$ be an open cover of a topological space $X$. In the following, we will use the convention
\begin{align}\lbl{eq:capConvention}
U_{i_0,\ldots,i_n}=\bigcap_{k=0}^nU_{i_k}\;.
\end{align}
\begin{defi}\lbl{def:cech}
	For an open cover $\Uu$ of a topological space $X$ (e.g., a prescheme) and $\Mm$ a presheaf of abelian groups (e.g., a quasi-coherent $\Oo_X$-module) on $X$ the \defemph{\vC ech complex} $\check{C}^*(\Uu,\Mm)$ is the cochain complex defined as follows. Let
	\begin{align*}
		\check{C}^n(\Uu,\Mm)\coloneqq\prod_{(i_0,\ldots,i_n)\in I^{n+1}}\Mm(U_{i_0,\ldots,i_n})\;.
	\end{align*}
	Let the elements of $\check{C}^n(\Uu,\Mm)$ be denoted $\psi=(\psi_{i_0,\ldots,i_n})_{(i_0,\ldots,i_n)\in I^{n+1}}$. The differentials $\check{C}^n(\Uu,\Mm)\morphism[\hacek{d}^n]\check{C}^{n+1}(\Uu,\Mm)$ are defined by
	\begin{align*}
		(\hacek{d}^n\psi)_{i_0,\ldots,i_{n+1}}=\sum_{j=0}^{n+1}(-1)^j\psi_{i_0,\ldots,\hat{i}_j,\ldots,i_{n+1}}|_{U_{i_0,\ldots,i_{n+1}}}
	\end{align*}
	where $\hat{i}_j$ denotes the omission of the index $i_j$. For instance,
	\begin{align*}
		(\hacek{d}^0\psi)_{i,j}=\psi_j|_{U_{i,j}}-\psi_i|_{U_{i,j}}\quad\text{and}\quad (\hacek{d}^1\psi)_{i,j,k}=\psi_{j,k}|_{U_{i,j,k}}-\psi_{i,k}|_{U_{i,j,k}}+\psi_{i,j}|_{U_{i,j,k}}\;.
	\end{align*}
	The \defemph{\vC ech cohomology} $\check{H}^*(\Uu,\Mm)$ is defined as the cohomology of the \vC ech complex, i.e.,
	\begin{align*}
		\check{H}^i(\Uu,\Mm)=H^i\left(\check{C}^*(\Uu,\Mm)\right)\;.
	\end{align*}	
\end{defi}
To see that $\check{C}^*(\Uu,\Mm)$ is indeed a cochain complex, we need to prove $\hacek{d}^2=0$ -- and we won't do this in a remark!
\begin{proof}[Proof of Definition~\reff{def:cech}]
	For $\ell=0,\ldots,n+1$ let $\check{C}^n(\Uu,\Mm)\morphism[d_\ell]\check{C}^{n+1}(\Uu,\Mm)$ be given by
	\begin{align*}
		(d_\ell\psi)_{i_0,\ldots,i_{n+1}}=\psi_{i_0,\ldots,\hat{i}_\ell,\ldots,i_{n+1}}|_{U_{i_0,\ldots,i_{n+1}}}\;.
	\end{align*}
	Again, $\hat{i}_\ell$ denotes the omission of the index $i_\ell$.
	
	\emph{Step 1.} We prove that
	\begin{align}\lbl{eq:simplicialStuff}
		d_md_\ell=d_{\ell+1}d_m\quad\text{when }\ell\geq m\;.
	\end{align}
	Indeed, we have $(d_md_\ell\psi)_{\mathbf{i}}=\psi_{\mathbf{j}}|_{U_{\mathbf{i}}}$, where $\mathbf{j}$ is obtained from $\mathbf{i}$ by omitting the indices $i_\ell$ and $i_m$ when $\ell<m$ and the indices $i_{\ell+1}$ and $i_m$ when $\ell\geq m$. The assertion follows.
	
	\emph{Step 2.} We prove the following. Let $C^*$ is any family of abelian groups (or objects of an abelian category) and $C^n\morphism[d_\ell]C^{n+1}$ morphisms for $\ell=0,\ldots,n+1$. Suppose that $C^n=0$ for $n<0$ and that \eqreff{eq:simplicialStuff} holds. Then 
	\begin{align*}
		d=\sum_{i=0}^{n+1}(-1)^id_i
	\end{align*}
	satisfies $d^2=0$. Indeed,
	\begin{align*}
		d^2&=\sum_{m=0}^{n+2}\sum_{\ell=0}^{n+1}(-1)^{\ell+m}d_md_\ell=\sum_{m=0}^{n+2}\sum_{\ell=0}^{m-1}(-1)^{\ell+m}d_md_\ell+\sum_{m=0}^{n+2}\sum_{\ell=m}^{n+1}(-1)^{\ell+m}d_md_\ell\\
		&=\sum_{m=0}^{n+2}\sum_{\ell=0}^{m-1}(-1)^{\ell+m}d_md_\ell+\sum_{m=0}^{n+1}\sum_{\ell=m}^{n+1}(-1)^{\ell+m}d_{\ell+1}d_m\\
		&=\sum_{i>j}(-1)^{i+j}d_id_j+\sum_{i>j}(-1)^{i+j-1}d_id_j=0\;,
	\end{align*}
	as required.
\end{proof}
\begin{rem*}
	Our program is to show that $\check{H}^*(\Uu,\Mm)$ is independent of $\Uu$ and has the desired properties, when $X$ is a scheme, $\Mm\in\Ob(\cat{QCoh}(X))$ and $\Uu$ is an affine open cover.
\end{rem*}
\begin{rem*}
	For instance, the cohomology of $\IP_R^1=\Proj(R[X_0,X_1])$ can be calculated using the affine open cover 
	\begin{align*}
		U_i=\IP_R^1\setminus V(X_i)\simeq \Spec \left(R[X_0,X_1]_{X_i}\right)_0\simeq \Spec R[t_i]\quad\text{where }t_i=
		\begin{cases}
			X_1\cdot X_0^{-1} & \text{if }i=0\\
			X_0\cdot X_1^{-1} & \text{if }i=1
		\end{cases}\;.
	\end{align*}
	Unfortunately, calculations become complicated by the fact that there are infinitely many non-zero terms in $\check{C}^*(\Uu,\Mm)$.
\end{rem*}
	Let $\check{C}_\alt^n(\Uu,\Mm)\subseteq\check{C}^n(\Uu,\Mm)$ be the subgroup containing all $\psi\in\check{C}^n(\Uu,\Mm)$ such that
	\begin{align*}
		\psi_{i_{\pi(0)},,\ldots,i_{\pi(n)}}=\sgn(\pi)\psi_{i_0,\ldots,i_n}\in \Mm(U_{i_0,\ldots,i_n})\quad\text{and}\quad\psi_{i_0,\ldots,i_{n-1},i_{n-1}}=0\in\Mm(U_{i_0,\ldots,i_{n-1}})
	\end{align*}
	for all permutations $\pi\in\SS_n$. Note that $U_{i_0,\ldots,i_n}=U_{i_{\pi(0)},\ldots,i_{\pi(n)}}$ as permuting indices doesn't change intersections, so the first property makes sense. Also note that both properties together imply that $\psi_{i_0,\ldots,i_n}=0$ whenever $(i_0,\ldots,i_n)$ contains a repeated index.
	
	\begin{defi}
		$\check{C}_\alt^*(\Uu,\Mm)\subseteq\check{C}^*(\Uu,\Mm)$ is a subcomplex, called the \defemph{alternating \vC ech complex}.
	\end{defi}
	\begin{proof}
		We need to confirm that the differential $\hacek{d}^n$ maps $\check{C}_\alt^n(\Uu,\Mm)$ into $\check{C}_\alt^{n+1}(\Uu,\Mm)$. To do this, define \emph{codegeneracy maps} 
		\begin{align*}
			\check{C}^n(\Uu,\Mm)\morphism[s_\ell]\check{C}^{n-1}(\Uu,\Mm)\;,\quad (s_\ell\psi)_{i_0,\ldots,i_{n-1}}=\psi_{i_0,\ldots,i_\ell,i_\ell,\ldots,i_{n-1}}\quad\text{for }\ell=0,\ldots,n-1
		\end{align*}
		(i.e., $s_\ell$ repeats the $\ell\ordinalth$ index) as well as \emph{transposition maps}
		\begin{align*}
			\check{C}^n(\Uu,\Mm)\morphism[t_\ell]\check{C}^n(\Uu,\Mm)\;,\quad (t_\ell\psi)_{i_0,\ldots,i_n}=\psi_{i_0,\ldots,i_{\ell-1},i_{\ell+1},i_\ell,i_{\ell+2},\ldots,i_{n-1}}\quad\text{for }\ell=0,\ldots,n-1
		\end{align*}
		(i.e., $t_\ell$ swaps the $\ell\ordinalth$ and $(\ell+1)\ordinalst$ index). As any permutation may be expressed as a composition of elementary transpositions, $\check{C}_\alt^n(\Uu,\Mm)\subseteq\check{C}^n(\Uu,\Mm)$ is given by the relations
		\begin{align*}
			s_\ell\psi=0\quad\text{and}\quad t_\ell\psi=-\psi\quad\text{for }\ell=0,\ldots,n-1
		\end{align*}
		So what we need to check to confirm that $\check{C}_\alt^*(\Uu,\Mm)$ is indeed a subcomplex of $\check{C}^*(\Uu,\Mm)$ is that the above relations are preserved by the differential $\hacek{d}$.
		
		One may easily check the relations
		\begin{align}\lbl{eq:cosimplicialDegeneracies}
			s_\ell d_i=\begin{cases}
				d_is_{\ell-1} & \text{if }i<\ell\\
				\id &  \text{if }i=\ell\text{ or }i=\ell+1\\
				d_{i-1}s_\ell &  \text{if }i>\ell+1
			\end{cases}
		\end{align}
		and
		\begin{align}\lbl{eq:transpositions}
			t_\ell d_j=\begin{cases}
				d_jt_{\ell} & \text{if }\ell<j-1\\
				d_\ell &  \text{if }\ell=j-1\\
				d_{\ell+1} &  \text{if }\ell=j\\
				d_jt_{\ell-1} & \text{if }\ell>j
			\end{cases}\;.
		\end{align}
		Now let $\psi\in\check{C}^n(\Uu,\Mm)$ such that $t_j\psi=-\psi$ for all $j=0,\ldots,n-1$. Using \eqreff{eq:transpositions}, we get
		\begin{align*}
			t_\ell\hacek{d}\psi&=\sum_{j=0}^{\ell-1}(-1)^jt_\ell d_j\psi+(-1)^\ell t_\ell d_\ell\psi+(-1)^{\ell+1} t_\ell d_{\ell+1}\psi+\sum_{j=\ell+2}^n(-1)^jt_\ell d_j\psi\\
			&=\sum_{j=0}^{\ell-1}(-1)^jd_jt_{\ell-1}\psi+(-1)^\ell d_{\ell+1}\psi+(-1)^{\ell+1} d_\ell\psi+\sum_{j=\ell+2}^{n}(-1)^j d_jt_\ell\psi\\
			&=-\sum_{j=0}^{\ell-1}(-1)^jd_j\psi-(-1)^\ell d_\ell\psi-(-1)^{\ell+1} d_{\ell+1}\psi-\sum_{j=\ell+2}^{n}(-1)^j d_j\psi\\
			&=-\hacek{d}\psi\;.
		\end{align*}
		Similarly, one can check that $s_\ell\hacek{d}\psi=0$ when $s_j\psi=0$ for all $j=0,1,\ldots,n-1$. This shows that $\hacek{d}$ restricts to a differential on $\check{C}_\alt
		^n(\Uu,\Mm)$, as required.
	\end{proof}
	It will eventually turn out that the cohomology groups $\check{H}_\alt^i(\Uu,\Mm)=H^i\left(\check{C}_\alt^*(\Uu,\Mm)\right)$ obtained from the alternating \vC ech complex are the same as the regular \vC ech cohomology groups $\check{H}^i(\Uu,\Mm)$.
\begin{rem}
	A \emph{cosimplicial object} of a category $\Aa$ is a sequence of objects $(X^n)_{n\geq 0}$ with morphisms $d_j\colon X^n\morphism X^{n+1}$ for $j=0,\ldots,n+1$ satisfying \eqreff{eq:simplicialStuff} and $s_j\colon X^n\morphism X^{n-1}$ for $j=0,\ldots,n$ satisfying a version of \eqreff{eq:simplicialStuff} together with \eqreff{eq:cosimplicialDegeneracies}. In other words, a cosimplicial object is a covariant functor from the \emph{simplex category} $\Delta$ to $\Aa$.
	
	There is a \emph{Dold--Puppe correspondence} between cochain complexes concentrated in nonnegative degrees and cosimplicial objects of an abelian category.  
\end{rem}
\begin{example}
	\begin{alphanumerate}
		\item \lbl{ex:FirstCechComputations}By the sheaf axiom, 
		\begin{align*}
			\Mm(X)&\simeq\left\{(m_i)_{i\in I}\in\prod_{i\in I}\Mm(U_i)\st m_i|_{U_{i,j}}=m_j|_{U_{i,j}}\right\}\\
			&=\ker\Big(\check{C}^0(\Uu,\Mm)\morphism[\hacek{d}^0]\check{C}^1(\Uu,\Mm)\Big)\simeq \check{H}^0(\Uu,\Mm)\\
			&=\ker\Big(\check{C}_\alt^0(\Uu,\Mm)\morphism[\hacek{d}^0]\check{C}_\alt^1(\Uu,\Mm)\Big)\simeq \check{H}_\alt^0(\Uu,\Mm)
		\end{align*}
		\item For the trivial cover $\Uu_0\colon X=X$, the \vC ech complex $\check{C}^*(\Uu_0,\Mm)$ has the form
		\begin{align*}
			\Mm(X)\morphism 0\morphism 0\morphism0\morphism\ldots
		\end{align*}
		and the alternating \vC ech complex $\check{C}_\alt^*(\Uu_0,\Mm)$ looks like
		\begin{align*}
			\Mm(X)\morphism[0]\Mm(X)\morphism[\id]\Mm(X)\morphism[0]\ldots\;,
		\end{align*}
		so
		\begin{align*}
			\check{H}^n(\Uu_0,\Mm)=\check{H}_\alt^n(\Uu_0,\Mm)=\begin{cases}
				\Mm(X) & \text{if }n=0\\
				0 & \text{else}
			\end{cases}\;.
		\end{align*}
		\item If $\Mm$ and $\Nn$ are presheaves of modules on $X$ and $\Uu$ is an open cover of $X$, then 
		\begin{align*}
			\check{C}^*(\Uu,\Mm\oplus\Nn)=\check{C}^*(\Uu,\Mm)\oplus\check{C}^*(\Uu,\Nn)
		\end{align*}
		and, more general, 
		\begin{align*}
			\check{C}^*\bigg(\Uu,\prod_{i\in I}\Mm_i\bigg)=\prod_{i\in I}\check{C}^*(\Uu,\Mm_i)\;.
		\end{align*}
		The same holds for $\check{C}_\alt^*(\Uu,-)$.
	\end{alphanumerate}
\end{example}
If $\Uu\colon X=\bigcup_{i\in I}U_i$ is a cover of a scheme $X$ by affine open subsets $U_i$, then all intersections $U_{i_0,\ldots,i_n}$ are affine again by Proposition~\reff{prop:SchemesAffineIntersec}. If $0\morphism\Mm'\morphism\Mm\morphism\Mm''\morphism 0$ is a short exact sequence in $\cat{QCoh}(X)$, Corollary~\reff{cor:GlobalSectionsExactOnAffine} provides short exact sequences
\begin{align*}
	0\morphism \check{C}^*(\Uu,\Mm')\morphism \check{C}^*(\Uu,\Mm)\morphism \check{C}^*(\Uu,\Mm'')\morphism 0
\end{align*}
and
\begin{align*}
	0\morphism \check{C}_\alt^*(\Uu,\Mm')\morphism \check{C}_\alt^*(\Uu,\Mm)\morphism \check{C}_\alt^*(\Uu,\Mm'')\morphism 0
\end{align*}
of chain complexes. For $\check{C}^*(\Uu,-)$ this is immediate from Definition~\reff{def:cech} and from the fact that products of short exact sequences are short exact again. To see this for $\check{C}_\alt^*(\Uu,-)$, choose any linear ordering of $I$ and note that 
\begin{align*}
	\check{C}_\alt^n(\Uu,\Mm)\simeq\prod_{i_0<\ldots<i_n\in I}\Mm(U_{i_0,\ldots,i_n})\;,
\end{align*}
then the same argument may be applied.

Taking long exact cohomology sequences we just proved
\begin{prop}\lbl{prop:LongExactCechSequence}
	If $\Uu$ is an affine open cover of a scheme $X$ and $0\morphism \Mm'\morphism\Mm\morphism\Mm''\morphism 0$ a short exact sequence of quasi-coherent sheaves of $\Oo_X$-modules, then there is a long exact cohomology sequence
	\begin{diagram*}
		\node[ob] (0o) at (0,1.5) {$0$};
		\node[ob] (0u) at (0,0) {$0$};
		\node[ob] (H0Z) [right=0.5 of 0o] {$\check{H}^0(\Uu,\Mm')$};
		\node[ob] (H0CX) [right=0.5 of H0Z] {$\check{H}^0(\Uu,\Mm)$};
		\node[ob] (H0CXx) [right=0.5 of H0CX] {$\check{H}^0(\Uu,\Mm'')$};
		\node[ob] (Z) at (0u -| H0Z) {$\Mm'(X)$};
		\node[ob] (CX) at (0u -| H0CX) {$\Mm(X)$};
		\node[ob] (CXx) at (0u -| H0CXx) {$\Mm''(X)$};
		\node[ob] (H1Z) [right=0.75 of H0CXx] {$\check{H}^1(\Uu,\Mm')$};
		\node[ob] (H1CX) [right=0.5 of H1Z] {$\check{H}^1(\Uu,\Mm)$};
		\node[ob] (dots) [right=0.5 of H1CX] {$\ldots$};
		\scriptsize
		\draw[->] (0u) -- (Z);
		\draw[->] (0o) -- (H0Z);
		\draw[->] (Z) -- (CX);
		\draw[->] (H0Z) -- (H0CX);
		\draw[->] (CX) -- (CXx);
		\draw[->] (H0CX) -- (H0CXx);
		\draw[->] (H0CXx) -- (H1Z)node[pos=0.5, above] {$d$};;
		\draw[->] (H1Z) -- (H1CX);
		\draw[->] (H0Z) -- (Z) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
		\draw[->] (H0CX) -- (CX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
		\draw[->] (H0CXx) -- (CXx) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
		\draw[->] (H1CX) -- (dots);
	\end{diagram*}
	and similar for $\check{H}_\alt^*(\Uu,-)$.
\end{prop}
\begin{rem}
	For arbitrary preschemes, the situation is more difficult (cf. Thomason, \emph{The Grothendieck Festschrift}).
\end{rem}
\begin{defi}
	An open cover $\Vv\colon X=\bigcup_{j\in J}V_j$ is a \defemph{refinement} of $\Uu\colon X=\bigcup_{i\in I}U_i$ if there is a map $v\colon J\morphism I$ such that $V_j\subseteq U_{v(j)}$ for all $j\in J$. Such a $v$ is called a \defemph{refinement map} for the pair $(\Vv,\Uu)$. 
\end{defi}
Note that Professor Franke isn't sure whether \emph{refinement map} is the usual term. Assuming the axiom of choice, the existence of $v$ is equivalent to every $V_j$ being contained in some $U_i$. 

A refinement map $v$ induces a morphism
\begin{align*}
	\check{C}^*(\Uu,\Mm)\morphism[v^*]\check{C}^*(\Vv,\Mm)\;,\quad(v^n\psi)_{j_0,\ldots,j_n}=\psi_{v(j_0),\ldots,v(j_n)}|_{V_{j_0,\ldots,j_n}}\quad\text{for }\psi\in\check{C}^n(\Uu,\Mm)\;.
\end{align*}
Clearly, $v^*$ commutes with the $d_j$, $s_j$, and $t_j$, hence restricts to a morphism of chain complexes $\check{C}_\alt^*(\Uu,\Mm)\morphism[v^*]\check{C}_\alt^*(\Vv,\Mm)$.
\begin{lem}
	\begin{alphanumerate}
		\item \lbl{lem:refinementPullback}A refinement $\Ww$ of a refinement $\Vv$ of $\Uu$ is a refinement of $\Uu$ and if $v$ and $w$ are associated refinement maps for $(\Vv,\Uu)$ and $(\Ww,\Uu)$, then $vw$ is a refinement map for $(\Ww,\Uu)$. Moreover, $(vw)^*=w^*v^*$ and the identity $\id_I$ is a refinement map for $(\Uu,\Uu)$ and $\id_I^*=\id_{\check{C}^*(\Uu,-)}$.
		\item Two arbitrary open covers have a common refinement. When $X$ is a prescheme, this common refinement can be chosen affine.
		\item If $v_1,v_2\colon J\morphism I$ are two refinement maps for $(\Vv,\Uu)$, then $v_1^*$ and $v_2^*$ induce the same morphism on \vC ech cohomology.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	Part \itememph{a} is obvious. For \itememph{b}, let $\Uu$ and $\Vv$ be open covers of $X$. Then $X=\bigcup_{(i,j)\in I\times J}U_i\cap V_j$ is a common refinement. When $X$ is a prescheme, we may cover each $U_i\cap V_j$ by affine open subsets and thus obtain a common affine refinement of $\Uu$ and $\Vv$.
	
	Now for part \itememph{c}. Define maps $h^n\colon\check{C}^n(\Uu,\Mm)\morphism\check{C}^{n-1}(\Vv,\Mm)$ as follows: We put 
	\begin{align*}
		h^n=\sum_{\ell=0}^{n-1}(-1)^\ell h_\ell\;,
	\end{align*}
	where $h_\ell\colon\check{C}^n(\Uu,\Mm)\morphism\check{C}^{n-1}(\Vv,\Mm)$ is given by
	\begin{align*}
		(h_\ell\psi)_{j_0,\ldots,j_{n-1}}=\psi_{v_1(j_0),\ldots,v_1(j_\ell),v_2(j_\ell),\ldots,v_2(j_{n-1})}|_{V_{j_0,\ldots,j_{n-1}}}\quad\text{for }\psi\in\check{C}^n(\Uu,\Mm)\;.
	\end{align*}
	Then it's a straightforward but tedious check that the following relations hold:
	\begin{align}\lbl{eq:SHIT}
		h_\ell d_k=\begin{cases}
			d_kh_{\ell-1} & \text{if }0\leq k<\ell\\
			h_{\ell-1}d_{k} & \text{if }0< k=\ell\\
			v_2^n & \text{if }0=k=\ell\\
			h_{\ell+1}d_{k} & \text{if }k=\ell+1<n\\
			v_1^n & \text{if }k=\ell+1=n\\
			d_{k-1}h_\ell & \text{if }k>\ell+1
		\end{cases}\;.
	\end{align}
	(I tried my best to get the indices right and I claim my hit ratio is way higher than Franke's). Our goal is to show 
	\begin{align*}
		\hacek{d}^{n-1}h^n+h^{n+1}\hacek{d}^n=v_2^n-v_1^n\;,
	\end{align*}
	for then $h^*$ is a cochain homotopy between $v_1^*$ and $v_2^*$ and it's a well-known fact from homological algebra that cochain homotopic maps induce the same morphisms on cohomology. Indeed, using \eqreff{eq:SHIT} we get
	\begin{align*}
		h^{n+1}\hacek{d}^n&=\sum_{\ell=0}^{n}\sum_{k=0}^{n+1}(-1)^{\ell+k}h_\ell d_k\\
		&=\begin{multlined}[t]
			\sum_{\ell=0}^{n}\sum_{k=0}^{\ell-1}(-1)^{\ell+k}h_\ell d_k+(-1)^0h_0d_0+\sum_{\ell=1}^{n}(-1)^{2\ell}h_\ell d_\ell\\
			+\sum_{\ell=0}^{n-1}(-1)^{2\ell+1}h_\ell d_{\ell+1}+(-1)^{2n+1}h_nd_{n+1}+\sum_{\ell=0}^{n}\sum_{k=\ell+2}^{n+1}(-1)^{\ell+k}h_\ell d_k
		\end{multlined}\\
		&=\begin{multlined}[t]
			\sum_{\ell=0}^{n}\sum_{k=0}^{\ell-1}(-1)^{\ell+k}d_k h_{\ell-1}+v_2^n+\sum_{\ell=1}^{n}h_{\ell-1} d_\ell\\
			-\sum_{\ell=0}^{n-1}h_\ell d_{\ell+1}-v_1^n+\sum_{\ell=0}^{n}\sum_{k=\ell+2}^{n+1}(-1)^{\ell+k}d_{k-1} h_{\ell}
		\end{multlined}\\
		&=\sum_{\ell=0}^{n-1}\sum_{k=0}^{\ell}(-1)^{\ell+1+k}d_k h_{\ell}+\sum_{\ell=0}^{n}\sum_{k=\ell+1}^{n}(-1)^{\ell+k+1}d_{k} h_{\ell}+v_2^n-v_1^n\\
		&=-\sum_{k=0}^{n}\sum_{\ell=0}^{n-1}(-1)^{\ell+k}d_kh_\ell +v_2^n-v_1^n\\
		&=-\hacek{d}^{n-1}h^n+v_2^n-v_1^n\;,
	\end{align*}
	as required.
\end{proof}
\begin{cor}\lbl{cor:refinementPullback}
	Let $\Mm$ be a presheaf of modules on a space $X$ and $\Uu,\Vv$ be open covers of $X$.
	\begin{alphanumerate} 
		\item If $\Vv$ is a refinement of $\Uu$, we have a canonical morphism 
		\begin{align*}
			\tau_{\Uu,\Vv}\colon \check{H}^*(\Uu,\Mm)\morphism\check{H}^*(\Vv,\Mm)
		\end{align*}
		satisfying $\tau_{\Vv,\Ww}\tau_{\Uu,\Vv}=\tau_{\Uu,\Ww}$ if $\Ww$ is another open cover of $X$ which is a refinement of $\Vv$, as well as $\tau_{\Uu,\Uu}=\id$.
		\item If $\Uu$ is a refinement of $\Vv$ and $\Vv$ a refinement of $\Uu$, then $\tau_{\Uu,\Vv}$ and $\tau_{\Vv,\Uu}$ are isomorphisms which are inverse to each other.
		\item If there is an $i^*\in I$ such that $U_{i^*}=X$, then $\check{H}^n(\Uu,\Mm)$ vanishes for $n\geq 1$.
	\end{alphanumerate}
\end{cor}
\begin{proof}
	Part \itememph{a} follows from Lemma~\reff{lem:refinementPullback}. Part \itememph{b} follows from \itememph{a} as $\tau_{\Vv,\Uu}\tau_{\Uu,\Vv}=\tau_{\Uu,\Uu}=\id$. Part \itememph{c} follows from \itememph{b} and Example~\reff{ex:FirstCechComputations} as $\Uu$ and the trivial cover $\Uu_0\colon X=X$ are refinements of each other in this case.
\end{proof}
\begin{rem}\lbl{rem:trivialCalt}
	In general, the cochain homotopy used in the proof of Lemma~\reff{lem:refinementPullback} won't preserve the subcomplex $\check{C}_\alt^*(-,\Mm)\subseteq\check{C}^*(-,\Mm)$. However, Corollary~\reff{cor:refinementPullback}\itememph{c} for $\check{H}_\alt^*(\Uu,\Mm)$ can still be obtained, using the \emph{cochain contraction} $h^*\colon \check{C}^*(\Uu,\Mm)\morphism\check{C}^*(\Uu,\Mm)$, where $h^n\colon \check{C}^n(\Uu,\Mm)\morphism\check{C}^{n-1}(\Uu,\Mm)$ for $n\geq 1$ is given by
	\begin{align*}
		(h^n\psi)_{i_0,\ldots,i_n}=\psi_{i^*,i_0,\ldots,i_n}\;.
	\end{align*}
	It's a straightforward check that $h^*$ preserves $\check{C}_\alt^*(\Uu,\Mm)\subseteq \check{C}^*(\Uu,\Mm)$. Moreover, one has the relations
	\begin{align*}
		h^nd_k=\begin{cases}
			\id &\text{if }k=0\\
			d_{k-1}h^{n-1} & \text{if }k>0
		\end{cases}\;,
	\end{align*}
	hence
	\begin{align*}
		\hacek{d}^{n-1}h^n+h^{n+1}\hacek{d}^n&=\sum_{k=0}^{n}(-1)^kd_kh^n+\sum_{k=0}^{n+1}(-1)^kd_kh^{n+1}\\
		&=\id+\sum_{k=0}^{n}\left((-1)^k+(-1)^{k+1}\right)d_kh^n\\
		&=\id\;,
	\end{align*}
	proving that $h^*$ is indeed a cochain contraction, hence $\check{H}_\alt^i(\Uu,\Mm)=0$ for $i>0$. For our purposes, this will turn out to be sufficient.
\end{rem}
We now arrive at the main result of this section.
\begin{prop}\lbl{prop:CechCohoOnScheme}
	 Let $X$ be a quasi-compact scheme, $\Mm$ be a quasi-coherent $\Oo_X$-module and $\Uu$ and affine open cover of $X$.
	\begin{alphanumerate}
		\item If $\Vv$ is another affine open cover of $X$ which is a refinement of $\Uu$, then
		\begin{align*}
			\tau_{\Uu,\Vv}\colon \check{H}^*(\Uu,\Mm)\isomorphism\check{H}^*(\Vv,\Mm)\;.
		\end{align*}
		\item The inclusion $\check{C}_\alt^*(\Uu,\Mm)\subseteq \check{C}^*(\Uu,\Mm)$ of cochain complexes induces an isomorphism
		\begin{align*}
			\check{H}_\alt^*(\Uu,\Mm)\isomorphism\check{H}^*(\Uu,\Mm)\;.
		\end{align*}
		\item If $X$ is affine and $i\geq 1$, then $\check{H}_\alt^i(\Uu,\Mm)=\check{H}^i(\Uu,\Mm)=0$.
	\end{alphanumerate}
\end{prop}
Before the proof, a lemma.
\begin{lem}\lbl{lem:CohomologyOfPushforward}
	For an open cover $\Uu\colon X=\bigcup_{i\in I}\Uu_i$ of a topological space $X$ and a continuous map $f\colon Y\morphism X$, let $f^{-1}(\Uu)$ be the cover $Y=\bigcup_{i\in I}f^{-1}(U_i)$. Let $\Ff$ be a sheaf of abelian groups on $Y$.
	\begin{alphanumerate}
		\item We have an isomorphism of cochain complexes $\check{C}^*(f^{-1}(\Uu),\Ff)\simeq \check{C}^*(\Uu,f_*\Ff)$ and this isomorphism restricts to an isomorphism $\check{C}_\alt^*(f^{-1}(\Uu),\Ff)\simeq \check{C}_\alt^*(\Uu,f_*\Ff)$.
		\item If the image of $f$ is contained in one of the open subsets $U_i$, then $\check{H}^i(\Uu,f_*\Ff)=\check{H}_\alt^i(\Uu,f_*\Ff)=0$ for $i\geq 1$.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	Part \itememph{a} is pretty much tautological. Let $\Vv=f^{-1}(\Uu)$, $V_i=f^{-1}(U_i)$, then we have $V_{i_0,\ldots,i_n}=f^{-1}(U_{i_0,\ldots,i_n})$, hence $f_*\Ff(V_{i_0,\ldots,i_n})=\Ff(U_{i_0,\ldots,i_n})$ by definition of the \emph{direct image} $f_*\Ff$. The differentials $\hacek{d}$ as well as the degeneracy and transposition maps $s_\ell,t_\ell$ of $\check{C}^*(f^{-1}(\Uu),\Ff)$ and $\check{C}^*(\Uu,f_*\Ff)$ clearly coincide, proving the asserted isomorphisms of cochain complexes.
	
	Part \itememph{b} follows from \itememph{a}, Corollary~\reff{cor:refinementPullback}\itememph{c} and Remark~\reff{rem:trivialCalt}.
\end{proof}
\begin{proof}[Proof of Proposition~\reff{prop:CechCohoOnScheme}]
	Part \itememph{a}. We fix the covers $\Uu$ and $\Vv$ and consider the following conditions on $\Mm$:
	\begin{quote}
		$\Mm$ satisfies $A_i(\Mm)$ iff $\check{H}^j(\Uu,\Mm)\morphism[\tau_{\Uu,\Vv}]\check{H}^j(\Vv,\Mm)$ is an isomorphism for $j<i$ and injective for $i=j$.
	\end{quote}
	\begin{claim}\lbl{claim:AiAi+1}
		For a short exact sequence $0\morphism \Mm'\morphism \Mm\morphism \Mm''\morphism 0$ of quasi-coherent $\Oo_X$-modules one has the implication
		\begin{align*}
		\left[A_{i+1}(\Mm)\text{ and }A_i(\Mm'')\right] \Longrightarrow A_{i+1}(\Mm')\;.
		\end{align*}
	\end{claim}
	To prove Claim~\reff{claimAiAi+1}, consider the commutative diagram
	\begin{diagram*}
		\node[ob] (A) at (0,1.5) {$\check{H}^{j-1}(\Uu,\Mm)$};
		\node[ob] (B) at (3,1.5) {$\check{H}^{j-1}(\Uu,\Mm'')$};
		\node[ob] (C) at (6,1.5) {$\check{H}^{j}(\Uu,\Mm')$};
		\node[ob] (D) at (9,1.5) {$\check{H}^j(\Uu,\Mm)$};
		\node[ob] (E) at (12,1.5) {$\check{H}^{j}(\Uu,\Mm'')$};
		\node[ob] (A') at (0,0) {$\check{H}^{j-1}(\Vv,\Mm)$};
		\node[ob] (B') at (3,0) {$\check{H}^{j-1}(\Vv,\Mm'')$};
		\node[ob] (C') at (6,0) {$\check{H}^{j}(\Vv,\Mm')$};
		\node[ob] (D') at (9,0) {$\check{H}^{j}(\Vv,\Mm)$};
		\node[ob] (E') at (12,0) {$\check{H}^{j}(\Vv,\Mm'')$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C);
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C');
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (A) -- (A') node[pos=0.5, left] {$\alpha$};
		\draw[->] (B) -- (B') node[pos=0.5, left] {$\beta$};
		\draw[->] (C) -- (C') node[pos=0.5, left] {$\gamma$};
		\draw[->] (D) -- (D') node[pos=0.5, left] {$\delta$};
		\draw[->] (E) -- (E') node[pos=0.5, left] {$\epsilon$};
	\end{diagram*}
	When $j\leq i$, then $\alpha,\beta$, and $\delta$ are isomorphisms, while $\epsilon$ is injective, proving $\gamma$ to be an isomorphism by the five lemma. When $j=i+1$, $\alpha$ is an isomorphism by $A_{i+1}(\Mm)$ while $\beta$ and $\delta$ are injective, proving $\gamma$ to be injective by the four lemma. Claim~\reff{claim:AiAi+1} follows.
	\begin{claim}\lbl{claim:BigN}
		For any quasi-coherent $\Oo_X$-module $\Mm$ there are a quasi-coherent $\Oo_X$-module $\Nn$ such that $A_i(\Nn)$ holds for arbitary $i$, and a monomorphism $\Mm\monomorphism\Nn$.
	\end{claim}
	To show this, let $j_W\colon W\morphism X$ be the embedding of any affine open subset $W$ contained in one of the open subsets forming the cober $\Vv$. As $X$ is a scheme, the morphism $j_W$ is affine, i.e., preimages of affine open subsets are affine (cf. \cite[Definition~2.5.1]{alggeo1}). Indeed, since preimages in this case are intersections with $W$, this follows from Proposition~\reff{prop:SchemesAffineIntersec}. Being an open embedding, $j_W$ is also quasi-separated. By Proposition~\reff{prop:PushforwardOfQcIsQc} and Proposition~\reff{prop:QCohHasKerCoker}\itememph{b}, $(j_W)_*\Mm|_W$ is a quasi-coherent $\Oo_X$-module. Since $X$ is quasi-compact, we find finitely many affine open subsets $W_1,\ldots,W_n$ covering $X$, each $W_i$ contained in an element of $\Vv$ (that is, $X=\bigcup_{i=1}^nW_i$ is a finite affine refinement of $\Vv$). Then
	\begin{align*}
		\Nn\coloneqq\bigoplus_{i=1}^n(j_{W_i})_*\Mm|_{W_i}
	\end{align*}
	is quasi-coherent by Proposition~\reff{prop:QCohHasKerCoker}\itememph{a}.
	
	We have morphisms
	\begin{align*}
		\Mm(U)&\morphism\Nn(U)=\bigoplus_{i=1}^n(j_{W_i})_*(\Mm|_{W_i})(U)=\bigoplus_{i=1}^n\Mm(U\cap W_i)\\
	m&\longmapsto (m|_{U\cap W_i})_{i=1}^n
	\end{align*}
	which are injective as $\Mm$ satisfies the sheaf axiom and form a morphism of $\Oo_X$-modules $\Mm\morphism\Nn$, which is thus a monomorphism.
	
	By Example~\reff{ex:FirstCechComputations}\itememph{c}, 
	\begin{align*}
		\check{H}^k(\Uu,\Nn)=\bigoplus_{i=1}^n\check{H}^k(\Uu,(j_{W_i})_*\Mm|_{W_i})
	\end{align*}
	and same for $\Vv$. But Example~\reff{ex:FirstCechComputations}\itememph{a} and  Lemma~\reff{lem:CohomologyOfPushforward}\itememph{b} (which applies here as every $W_i$ is contained in an element of $\Vv$, thus also of $\Uu$) show that 
	\begin{align*}
		\check{H}^k(\Uu,(j_{W_i})_*\Mm|_{W_i})=\check{H}^k(\Vv,(j_{W_i})_*\Mm|_{W_i})=\begin{cases}
			\Mm(W_i) &\text{if }k=0\\
			0 & \text{else}
		\end{cases}\;,
	\end{align*}
	hence $(j_{W_i})_*\Mm|_{W_i}$ has property $A_i$ for arbitrary $i$. Now $\Nn$ inherits the property $A_i$ from its summands, proving Claim~\reff{claim:BigN}.
		
	We are now able to finish the proof of Proposition~\reff{prop:CechCohoOnScheme}\itememph{a}. We prove by induction on $i$ that $A_i(\Mm)$ holds for arbitrary quasi-coherent $\Oo_X$-modules $\Mm$.  For $i=0$, note that $\check{H}^0(\Uu,\Mm)\simeq \check{H}^0(\Vv,\Mm)\simeq \Mm(X)$ for all $\Oo_X$-modules $\Mm$ (quasi-coherent or not), i.e., $A_0(\Mm)$ holds. 
	
	Now suppose $i\geq 1$ and $A_{i-1}$ holds for every quasi-coherent $\Oo_X$-module. Using Claim~\reff{claim:BigN}, we choose an embedding $\Mm\monomorphism[\iota]\Nn$ where $\Nn$ is quasi-coherent and satisfies $A_i$, then apply Claim~\reff{claim:AiAi+1} to the exact sequence
	\begin{align*}
		0\morphism\Mm\morphism[\iota]\Nn\morphism\coker(\iota)\morphism 0
	\end{align*}
	to derive $A_i(\Mm)$ from $A_i(\Nn)$ and $A_{i-1}(\coker(\iota))$. Here, Proposition~\reff{prop:QCohHasKerCoker}\itememph{a} ensures that $\coker(\iota)$ is quasi-coherent as well.
	
	Part \itememph{b}. The proof of part \itememph{a} can be carried over with the following modifications.
	\begin{itemize}
		\item $A_i(\Mm)$ is now the condition that $\check{H}_\alt^j(\Uu,\Mm)\morphism \check{H}^j(\Uu,\Mm)$ is an isomorphism when $j<i$ and injective for $j=i$.
		\item Claim~\reff{claim:AiAi+1} also holds for the new $A_i$.
		\item If $W\subseteq X$ is affine and contained in one of the $V_i$ and $\Ff\in\Ob(\cat{Qcoh}(W))$, then $(j_W)_*\Ff$ satisfies all $A_i$ (which follows like above from Lemma~\reff{lem:CohomologyOfPushforward}\itememph{b} and Example~\reff{ex:FirstCechComputations}).
	\end{itemize}
	
	Part \itememph{c}. Apply \itememph{a} with $\Uu$ the trivial cover $X=X$ and $\Vv$ any affine open cover of $X$ to conclude $\check{H}^i(\Vv,\Mm)=0$ when $i\geq 1$ and $\Mm$ is a quasi-coherent $\Oo_X$-module. Then one uses \itememph{b} to show that $\check{H}_\alt^*(\Vv,\Mm)$ also vanishes in positive degrees.
\end{proof}
\begin{defi}
	Let $X$ be a quasi-compact scheme and $\Mm$ a quasi-coherent $\Oo_X$-module. We put
	\begin{align*}
		H^i(X,\Mm)\coloneqq \check{H}^i(\Vv_0,\Mm)\;,
	\end{align*}
	where $\Vv_0$ is the affine open cover of $X$ consisting of all affine open subsets of $X$.
\end{defi}
Summing up our previous work, we obtain the following Theorem~\reff{thm:CohoOnSchemes} in full glory.
\begin{thm}\lbl{thm:CohoOnSchemes}
	Let $X$ be a quasi-compact scheme and $\Mm$ a quasi-coherent $\Oo_X$-module.
	\begin{alphanumerate}
		\item If $\Uu$ is any affine open over of $X$, then
		\begin{align*}
			H^*(X,\Mm)\isomorphism[\tau_{\Uu,\Vv_0}]\check{H}^*(\Uu,\Mm)\lisomorphism \check{H}_\alt^*(\Uu,\Mm)
		\end{align*}
		are isomorphisms compatible with the (iso)morphisms $\check{H}^*(\Uu,\Mm)\morphism[\tau_{\Uu,\Vv}]\check{H}^*(\Vv,\Mm)$ when $\Vv$ is an affine refinement of $\Uu$.
		\item When $X$ is affine, $H^i(X,\Mm)=0$ when $i\geq 1$.
		\item There is a canonical isomorphism $H^0(X,\Mm)\simeq \Mm(X)$.
		\item When $0\morphism \Mm'\morphism\Mm\morphism\Mm''\morphism0$ is a short exact sequence of quasi-coherent $\Oo_X$-modules, one has a long exact cohomology sequence
		\begin{multline*}
			\begin{tikzpicture}[line cap=round, line join=round]
			\node[ob] (0o) at (0,0) {$0$};
			\node[ob] (0u) at (0,1.5) {$0$};
			\node[ob] (H0Z) [right=0.5 of 0o] {$H^0(X,\Mm')$};
			\node[ob] (H0CX) [right=0.5 of H0Z] {$H^0(X,\Mm)$};
			\node[ob] (H0CXx) [right=0.5 of H0CX] {$H^0(X,\Mm'')$};
			\node[ob] (Z) at (0u -| H0Z) {$\Mm'(X)$};
			\node[ob] (CX) at (0u -| H0CX) {$\Mm(X)$};
			\node[ob] (CXx) at (0u -| H0CXx) {$\Mm''(X)$};
			\node[ob] (H1Z) [right=0.75 of H0CXx] {$H^1(X,\Mm')$};
			\node[ob] (H1CX) [right=0.5 of H1Z] {$\ldots$};
			\scriptsize
			\draw[->] (0u) -- (Z);
			\draw[->] (0o) -- (H0Z);
			\draw[->] (Z) -- (CX);
			\draw[->] (H0Z) -- (H0CX);
			\draw[->] (CX) -- (CXx);
			\draw[->] (H0CX) -- (H0CXx);
			\draw[->] (H0CXx) -- (H1Z)node[pos=0.5, above] {$d$};;
			\draw[->] (H1Z) -- (H1CX);
			\draw[->] (H0Z) -- (Z) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
			\draw[->] (H0CX) -- (CX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
			\draw[->] (H0CXx) -- (CXx) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
			\end{tikzpicture}\\
			\ldots \morphism H^{i-1}(X,\Mm'')\morphism[d]H^i(X,\Mm')\morphism H^i(X,\Mm)\morphism H^i(X,\Mm'')\morphism[d]\ldots
		\end{multline*}
	\end{alphanumerate}
\end{thm}
\begin{proof}
	Part \itememph{a} follows from Proposition~\reff{prop:CechCohoOnScheme} and the fact that every affine open cover $\Uu$ is a refinement of $\Vv_0$. Part \itememph{b} is Proposition~\reff{prop:CechCohoOnScheme}\itememph{c}. Part \itememph{c} was seen in Example~\reff{ex:FirstCechComputations}\itememph{a} and \itememph{d} follows from Proposition~\reff{prop:LongExactCechSequence}.
\end{proof}
\begin{cor}
	Let $0\morphism \Mm'\morphism[\alpha]\Mm\morphism[\beta]\Mm''\morphism0$ be a short exact sequence of $\Oo_X$-modules, where $X$ is any prescheme. Then if two of $\Mm',\Mm,\Mm''$ are quasi-coherent, so is the third, and for any affine open subset $U\subseteq X$ the sequence
	\begin{align}\lbl{eq:exactAffineSectionSequence}
		0\morphism \Mm'(U)\morphism[\alpha]\Mm(U)\morphism[\beta]\Mm''(U)\morphism 0\tag{$*$}
	\end{align}
	is exact.
\end{cor}
\begin{proof}
	We have seen in Proposition~\reff{prop:QCohHasKerCoker} that the category $\cat{QCoh}(X)$ of quasi-coherent $\Oo_X$-modules is stable under kernels and cokernels. Therefore, $\Mm'$ is quasi-coherent when $\Mm$ and $\Mm''$ are and $\Mm''$ is quasi-coherent when $\Mm'$ and $\Mm$ are. We may thus assume that $\Mm'$ and $\Mm''$ are the quasi-coherent ones.
	
	To show exactness of \eqreff{eq:exactAffineSectionSequence}, we may replace $X$ by $U$ and the involved sheaves by their restriction to $U$ and thus assume that $X=U=\Spec R$ is affine. This may also be assumed in the proof of quasi-coherentness of $\Mm$, which is a local question. We then only need to show surjectivity of $\Mm(X)\morphism[\beta]\Mm''(X)$. If we had the long exact cohomology sequence available, this would be an immediate consequence of the vanishing of $H^1(X,\Mm')$ -- but we haven't, so what the proof does is mimicking the cohomological argument on foot. For this, let $m''\in\Mm''(X)$. As $\Mm\morphism[\beta]\Mm''$ is an epimorphism and the affine open subsets form a topology base in $X$, there is an affine open cover $\Vv\colon X=\bigcup_{i\in I}V_i$ such that $m''|_{V_i}$ is in the image of $\beta(m_i)$ for some $m_i\in \Mm(V_i)$.
	
	The $m_i$ satisfy $\beta(m_i|_{V_{i,j}}-m_j|_{V_{i,j}})=0\in\Mm''(V_{i,j})$, hence there are $m'_{i,j}\in\Mm(V_{i,j})$ such that $\alpha(m'_{i,j})=m_i|_{V_{i,j}}-m_j|_{V_{i,j}}$, the sequence $0\morphism\Mm'(V_{i,j})\morphism[\alpha]\Mm(V_{i,j})\morphism[\beta]\Mm''(V_{i,j})$ being exact. Consider the elements $\mu=(m_i)_{i\in I}\in \check{C}^0(\Vv,\Mm)$ and $\mu'=(m'_{i,j})_{(i,j)\in I^2}\in \check{C}^1(\Vv,\Mm')$. Then $\alpha(\mu')=\hacek{d}\mu$. Thus 
	\begin{align*}
		\alpha(\hacek{d}\mu')=\hacek{d}\alpha(\mu')=\hacek{d}^2\mu=0\;,
	\end{align*}
	hence $\hacek{d}\mu'=0$ by injectivity of $\alpha$. This means that $\mu'$ is a cocycle, and by the vanishing of $\check{H}^1(\Vv,\Mm')$ (due to Proposition~\reff{prop:CechCohoOnScheme}\itememph{c}), also a coboundary. That is, $\mu'=\hacek{d}\lambda'$ for some $\lambda\in\check{C}^0(\Vv,\Mm')$ (note that at this point Professor Franke run out of primes, though there are apparently infinitely many of them). Let $\lambda=\alpha(\lambda')$. As $\hacek{d}(\mu-\lambda)=\alpha(\mu')-\alpha(\mu')=0$, the $\mu_i-\lambda_i$ lift by the sheaf axiom to a single element $m^*\in\Mm(X)$ such that $m^*|_{V_i}=\mu_i-\lambda_i$. Since $\beta(\mu-\lambda)=\beta(\mu)-\beta(\alpha(\lambda'))=\beta(\mu)$, we have $\beta(m^*)=m''$. This proves the surjectivity of $\Mm(X)\morphism\Mm''(X)$ and thus \eqreff{eq:exactAffineSectionSequence}.
	
	To show that $\Mm$ is quasi-coherent, consider $0\morphism M'\morphism M\morphism M''\morphism 0$ where $M'=\Mm'(X)$, $M=\Mm(X)$, and $M''=\Mm''(X)$ which is an exact sequence of $R$-modules (as we just proved). As pointed out in the proof of Proposition~\reff{prop:QCohHasKerCoker}\itememph{a},  the functor $R\cat{-Mod}\morphism\cat{QCoh}(\Spec R)$ mapping $N\mapsto \snake{N}$ preserves kernels and cokernels, hence the diagram
	\begin{diagram*}
		\node[ob] (A) at (0,1.5) {$0$};
		\node[ob] (B) at (2,1.5) {$\snake{M}'$};
		\node[ob] (C) at (4,1.5) {$\snake{M}$};
		\node[ob] (D) at (6,1.5) {$\snake{M}''$};
		\node[ob] (E) at (8,1.5) {$0$};
		\node[ob] (A') at (0,0) {$0$};
		\node[ob] (B') at (2,0) {$\Mm'$};
		\node[ob] (C') at (4,0) {$\Mm$};
		\node[ob] (D') at (6,0) {$\Mm''$};
		\node[ob] (E') at (8,0) {$0$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C);
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C');
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (B) -- (B') node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
		\draw[->] (C) -- (C');% node[pos=0.5, left] {$\gamma$};
		\draw[->] (D) -- (D') node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\end{diagram*}
	has exact rows. Since $\snake{M}'\morphism\Mm'$ and $\snake{M}''\morphism\Mm''$ are isomorphisms, so is $\snake{M}\morphism\Mm$ by the five lemma.
\end{proof}
In the following, if $\Uu\colon X=\bigcup_{i\in I}U_i$ is an open cover and $Y\subseteq X$, we will write $\Uu\cap Y$ for the open cover $Y=\bigcup_{i\in I}(Y\cap U_i)$.
\begin{cor}
	Let $X$ be a quasi-coherent scheme.
	\begin{alphanumerate}
		\item If $W\monomorphism[j]X$ is the embedding of the affine open subset $W$ and $\Mm\in\Ob(\cat{QCoh}(X))$, then $H^p(X,j_*\Mm)=0$ for $p\geq 1$.
		\item Let $W_i\monomorphism[j_i]X$ be the embeddings of affine open subsets $W_i$ for $i=1,\ldots,n$. Let $W=\bigcup_{i=1}^nW_i$. If $\Mm\in\Ob(\cat{QCoh}(X))$, then
		\begin{align*}
			H^p\bigg(X,\bigoplus_{i=1}^n(j_i)_*\Mm|_{W_i}\bigg)=0\quad\text{for }p\geq 1
		\end{align*}
		and if $\Kk$ denotes the kernel of $\Mm\morphism\bigoplus_{i=1}^n(j_i)_*\Mm|_{W_i}$ sending $m\in\Mm(U)$ to
		\begin{align*}
			\left(m|_{U\cap W_i}\right)_{i=1}^n\in\bigoplus_{i=1}^n\Mm(U\cap W_i)=\bigoplus_{i=1}^n(j_i)_*\Mm|_{W_i}(U)
		\end{align*}
		satisfies $\Kk|_W=0$.
	\end{alphanumerate}
\end{cor}
\begin{proof}
	Part \itememph{a}. Let $\Uu$ be any affine open cover of $X$. By Proposition~\reff{prop:SchemesAffineIntersec}, the $U_i\cap W$ are affine and we have $\check{H}^p(\Uu\cap W,\Mm)\simeq \check{H}^p(\Uu,j_*\Mm)=0$ by Lemma~\reff{lem:CohomologyOfPushforward}\itememph{a} and Proposition~\reff{prop:CechCohoOnScheme}\itememph{c}.
	
	Part \itememph{b} follows from the fact that each $j_i$ is a monomorphism and the sheaf axiom.
\end{proof}
\begin{lem}\lbl{lem:LocalizedCechComplex}
	Let $\Uu$ be a finite open cover of the quasi-separated prescheme $X$ by quasi-compact open subsets and $f\in\Oo_X(X)$. By the universal property of localization, we have morphisms $\Mm(U)_f\morphism\Mm(U\setminus V(f))$ for arbitrary $\Oo_X$-modules $\Mm$ and open $U\subseteq X$. When applied to $U=U_{i_0,\ldots,i_n}$, this gives a morphism
	\begin{align*}
		\check{C}^*(\Uu,\Mm)_f\morphism\check{C}^*\Big(\Uu\cap\big(X\setminus V(f)\big),\Mm\Big)
	\end{align*}
	of \vC ech complexes. When $\Mm$ is quasi-coherent, this is an isomorphism.
\end{lem}
\begin{rem*}
	The structure of an $\Oo_X(X)$-module on $\check{C}^*(\Uu,\Mm)$ is obtained using the $\Oo_X(U_{i_0,\ldots,i_n})$-module structures on $\Mm(U_{i_0,\ldots,i_n})$ followed by $\Oo_X(X)\morphism \Oo_X(U_{i_0,\ldots,i_n})$. Taking the product over all $(i_0,\ldots,i_n)\in I^{n+1}$ gives the structure of a cochain complex of $\Oo_X(X)$-modules on $\check{C}^*(\Uu,\Mm)$, which is used in the formulation of Lemma~\reff{lem:LocalizedCechComplex}. The morphism under investigation is a morphism of cochain complexes  of $\Oo_X(X)_f$-modules.
\end{rem*}
\begin{proof}[Proof of Lemma~\reff{lem:LocalizedCechComplex}]
	As $\check{C}^n(\Uu,\Mm)=\prod_{(i_0,\ldots,i_n)\in I^{n+1}}\Mm(U_{i_0,\ldots,i_n})$ is a finite product and localization commutes with finite products, it is sufficient to show that
	\begin{align*}
		\Mm(U_{i_0,\ldots,i_n})_f\isomorphism\Mm(U_{i_0,\ldots,i_n}\setminus V(f))\;.
	\end{align*}
	By Definition~\reff{def:Quasicoherent}\itememph{c}, this will hold if $U_{i_0,\ldots,i_n}$ is quasi-compact and quasi-separated. It is quasi-separated as an open subset of the quasi-separated prescheme $X$. It is quasi-compact as an intersection of the quasi-compact subsets $U_{i_0},\ldots,U_{i_n}$ using quasi-separatedness of $X$.
\end{proof}
\begin{prop}
	Let $X$ be a quasi-compact scheme, $\Mm$ a quasi-coherent $\Oo_X$-module, and $f\in\Oo_X(X)$. Then we have a canonical isomorphism
	\begin{align*}
		H^*(X,\Mm)_f\isomorphism H^*\left(X\setminus V(f),\Mm|_{X\setminus V(f)}\right)\;.
	\end{align*}
\end{prop}
\begin{proof}
	Follows from Lemma~\reff{lem:LocalizedCechComplex}. Note that the open subset $X\setminus V(f)\subseteq X$ is a scheme again by \cite[Fact~1.5.9\itememph{c}]{alggeo1} and quasi-compact by \cite[Fact~2.1.2]{alggeo1}.
\end{proof}
\begin{rem*}
	In general, there is the notion of \emph{derived functors} (from Grothendieck's famous \emph{T\^{o}hoku paper}) applicable to the left-exact functors on an abelian category with sufficiently many injective objects, like $\Rr\cat{-Mod}$ ($\Rr$ being any sheaf of rings on any topological space) and $\cat{QCoh}(X)$ ($X$ being any prescheme). When $\Mm$ is an $\Rr$-module on any topological space $X$, the derived functors taken on the category of $\Rr$-modules or sheaves of abelian groups are canonically isomorphic. When $X$ is quasi-compact (or paracompact, this is actually sufficient) scheme, these are isomorphic to the cohomology introduced here and also to the derived functor of the global section functor taken for $\cat{QCoh}(X)$.
\end{rem*}
\section{The affinity criterion of Serre}
\begin{prop}[Serre's affinity criterion]\lbl{prop:serreAffinity}
	For a quasi-compact scheme $X$, the following conditions are equivalent.
	\begin{alphanumerate}
		\item $X$ is affine.
		\item $H^p(X,\Mm)=0$ for $p\geq 1$ when $\Mm$ is a quasi-coherent $\Oo_X$-module.
		\item $H^1(X,\Jj)=0$ when $\Jj$ is a quasi-coherent sheaf of ideals on $X$.
	\end{alphanumerate}
\end{prop}
\begin{rem*}
	In EGA III, this is shown under the weaker assumptions that $X$ is quasi-compact and quasi-separated (instead of separated), using $H^*$ defined as a derived functor on $\Oo_X\cat{-Mod}$.
\end{rem*}
We need the following.
\begin{prop}
	\begin{alphanumerate}
		\item\lbl{prop:closedPoint} If $Z$ is a non-empty quasi-compact closed subset of a prescheme $X$, it contains a closed point.
		\item\lbl{prop:qcSheafOfIdealsDefinedByVf} If $Z\subseteq X$ is a closed subset of a prescheme $X$, then $\Jj(U) := \{f \in \Oo_X(U) \mid Z\cap U \subseteq V(f)\}$
defines a quasi-coherent sheaf of ideals.
	\item\lbl{prop:intersectQc} If $\Nn_{1,2}\subseteq \Mm$ arae quasi-coherent subsheaves of the quasi-coherent sheaf of modules $\Mm$, $\Nn_1 \cap \Nn_2(U) := \Nn_1(U)\cap
\Nn_2(U)$ defines a quasi-coherent sheaf of modules.
	\end{alphanumerate}
\end{prop}
\begin{proof}
	Part \itememph{a} is proved in \cite[Proposition~2.1.1]{alggeo1}

	Part \itememph{b}: Let $V\subseteq X$ be quasi-compact and quasi-separated, $f\in\mathcal Oo_X(V)$ and $\varphi \in \Jj(V)$ such
	that $\varphi\vert_{U\cap V(f)}=0$. Then as $\Oo_X$ is quasi-coherent, there exists $n\in\IN$ such that $f^n\varphi = 0$ (cf. Remark 1.1.2 ??).
	If $\psi \in \Jj(U\setminus V(f))$ then as $\Oo_X$ is quasi-coherent, there is $n\in\IN$ such that $f^n\psi$ extends to $g\in \Oo_X(U)$ and $fg$
	extends $f^{n+1}\psi$ and is in $Jj(U)$ as $(Z\cap U)\setminus V(f)\subseteq V(\psi)\subseteq V(f^{n+1} \psi)=V(g\vert_{U\setminus V(f)})$
	and $V(f)\subseteq V(fg)$. Thus $\Jj(V)_f\xrightarrow\cong g\Jj(V\setminus V(f))$.

	Part \itememph{c}: It is directly possible to verify $(\Nn_1\cap \Nn_2)(U)_f\xrightarrow\cong (\Nn_1\cap \NN_2)(U\setminus V(f))$ similar
	as above. Alternatively, note that $\Nn_1\cap \Nn_2 = \ker(\Nn_1\rightarrow M\rightarrow\Mm/\Mm_2)$.
\end{proof}
\begin{proof}[Proof of Proposition \reff{prop:serreAffinity}]
\itememph{a} $\rightarrow$ \itememph{b}: This follows from Theorem 1.

\itememph{b} $\rightarrow$ \itememph{c}: Trivial.

\itememph{c} $\rightarrow$ \itememph{a}: We first derive
\begin{fact*}[c++]
If $\Mm\subseteq \Oo_X^n$ is a quasi-coherent submodule, then $H^1(X,\Mm)=0$.
\end{fact*}
\begin{proof}[Proof of c++]
Induction on $n$, $n=0$ being trivial. If $(\Oo_X^{n-1})(U)$ is identified with
$\{(f_1,\dotsc,f_{n-1},0) \in \Oo_X(V)^n\} \subseteq \Oo_X(U)^n$, then
$\Mm' = \Mm\cap \Oo_X^{n-1}$ is quasi-coherent by Proposition \reff{prop:intersectQc} c).
Moreover, $\Mm'' := \Mm/\Mm'\rightarrow \Oo_X, (f_1,\dotsc,f_n)\mapsto f_n$
is a monomorphism. Hence $H^1(X,\Mm')=0$ by induction and $H^1(X,\Mm'')=0$ by c). 
Now looking at the piece
\begin{align*}
H^1(X,\Mm')\rightarrow H^1(X,\Mm)\rightarrow H^1(X,\Mm'')
\end{align*}
of the long exact cohomology sequence, we get $H^1(X,\Mm)=0$; completing the induction.
\let\oldqed\qedsymbol
\def\qedsymbol{\oldqed{} for c++}
\end{proof}
\emph{Proof of \itememph{a}}
Let $R=\Oo_X(X)$, so we have a morphism $X\xrightarrow p\Spec R$ corresponding to $\id_R$
under the adjunction
\begin{align*}
\Hom(X,\Spec R) \simeq \Hom(R,\Oo_X(X)).
\end{align*}
We have to show that $p$ is an isomorphism. For this it is sufficient to show
\begin{alphanumerate}
	\item[\itememph{\alpha}] If $f\in R$ is chosen such that $X\setminus V(f)$ is affine, then $X\setminus V(f) = p^{-1}(\Spec R\setminus V(f))$
	is isomorphically mapped to $\Spec R\setminus V(f)$ by $p$.
	\item[\itememph{\beta}] The open subsets $X\setminus V(f)$ with $f$ as in $\alpha$ cover $X$.
	\item[\itememph{\gamma}] If $(f_i)_{i=1}^n \in R^n$ are as in \itememph{\alpha} and $X=\bigcup_{i=1}^n (X\setminus V(f))$ then
$\Spec R = \bigcup_{i=1}^n (\Spec R)\setminus V(f_i)$.
\end{alphanumerate}
By \itememph{\beta} and the quasi-compactness of $X$, it is possible to find
$(f_1,\dotsc,f_n)n R^n$ to which \itememph{\gamma} may be applied. Then the open subsets
$U_i = (\Spec R)\setminus V(f_i)$ cover $\Spec R$
and $p^{-1}(U_i) \xrightarrow[\cong]p U_i$. By the sheaf axiom, we then get
$\Spec R\xrightarrow[\cong]p X$.
\emph{Proof of \itememph{\alpha}}:
If $X\setminus V(f)$ is affine, we get
\begin{diagram*}%Let's try it
\node[ob] (Xf) at (0,2) {${X\setminus V(f)}$};
\node[ob] (SpecOX) at (5,2) {${\Spec(\Oo_X(X\setminus V(f)))\cong \Spec(R_f)}$};
\node[ob] (X) at (0,0) {$X$};
\node[ob] (SpecR) at (5,0) {${\Spec R}$};
\scriptsize
\draw[->] (Xf) -- (X);
\draw[->] (X) -- (SpecR);
\draw[->] (SpecOX) -- (SpecR);
\draw[->] (Xf) -- (SpecOX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
\end{diagram*}
Here, we use that $\Oo_X$ is quasi-compact and $X$ is quasi-compact and quasi-separated in Remark 1.1.2.
This shows \itememph{\alpha}

\emph{Proof of \itememph{\beta}}:
Let $U\subseteq X$ be the union of the affine open subsets of the form $X\setminus V(f)$
and $Z=X\setminus U$. If $Z\neq \emptyset$, there is a closed point $z\in Z$ by Proposition \reff{prop:closedPoint} a).
We have an affine open neighbourhood $V$ of $z$. Let $Y_1\subseteq X$ be the closed subset $X\setminus V$, let
$Y_2 := \{z\}$ and $Y = Y_1\cup Y_2$. The sheaf of ideals $\Jj$ of functions $f\in \Oo_X(W)$ such
that $Y\cap W\subseteq V(f)$ is quasi-coherent by Proposition \reff{prop:qcSheafOfIdealsDefinedByVf} b).
By \itememph{c}, we have $H^1(X,\Jj)=0$. Let $Y$ also denote the closed subprescheme of $X$ defined
by $\Jj$ and $Y\xrightarrow iX$ its immersion, i.e. $\Jj = \ker(\O_X\xrightarrow{i^\ast} i_\ast \Oo_Y)$. We get
some $\varphi\in\Oo_Y(Y) = (i_\ast \Oo_Y)(X)$ such that
$\varphi\vert_{Y_1}=0$ and $\varphi\vert_{Y_2}=1$ as $Y$ is the dijoint union of the open subsets $Y_{1,2}$.

By the cohomology sequence
\begin{align*}
\Oo_X(X)\rightarrow (i_\ast \Oo_Y)(X)\rightarrow H^1(X,\Jj)=0,
\end{align*}
there is some $f\in\Oo_X(X)$ such that $f\vert_Y=\varphi$. Hence
$Y_1\subseteq V(f)$ and $z\notin V(f)$, hence
$z\in X\setminus V(f) = (X\setminus Y_1)(\setminus V(f) = V\setminus V(f)$, which is an affine open subset of $X$.
We get $z\in U$, a contradiction.

\emph{Proof of \itememph{\gamma}}: Let $f_1,\dotsc,f_n$ be as requested. Then $\Oo_X^n\xrightarrow{f_1,\dotsc,f_n)} \Oo_X$
is an epimorphism as the $U_i = X\setminus V(f_i)$
cover $X$ and $\Oo_X\xrightarrow{f_i} \Oo_X$ is an isomorphism of $U_i$.
Let $\Mm$ be the kernel of this epimorphism. We have
\begin{diagram*}
\node[ob] (Rn) at (0,2) {$R^n$};
\node[ob] (R) at (5,2) {$R$};
\node[ob] (OxXn) at (0,0) {$\Oo_X(X)^n$};
\node[ob] (OxX) at (5,0) {$\Oo_X(X)$};
\node[ob] (H1M) at (7,0) {$H^1(X,\Mm)$};
\draw[->] (Rn) -- (OxXn) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
\draw[->] (R) -- (OxX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
\draw[->] (Rn) -- (R) node[pos=0.5, above=-0.25ex, sloped] {$(g_i)_{i=1}^n \mapsto \sum_i g_i f_i$};
\draw[->] (OxXn) -- (OxX) node[pos=0.5, above=-0.25ex, sloped] {$(f_1,\dotsc,f_n)$};
\draw[->] (OxX) -- (H1M);
\end{diagram*}
We have $H^1(X,\Mm)=0$ by c++, hence the $f_i$ generate $R$ as an ideal of $R$ and $\bigcap_{i=1}^n V(f_i)=\emptyset$
in $\Spec R$ as stated.
\end{proof}
\begin{rem*}
$H^1(X,\Oo_X)=0$ is not enough (even when $X$ is a quasi-compact scheme) for the affinity of $X$ as it holds, e.g., for $X=\IP^n_R$.
\end{rem*}
\section{Cohomological dimension}
\begin{prop}[Grothendieck]
Let $X$ be a scheme (Noetherian?) and $Z\subseteq X$ a closed subset which Noetherian as topoloigcal space.
THen $H^p(X,\Mm)=0$ when $\Mm\in \Ob(\cat{QCoh}(X))$ such that
$\Mm\vert_{X\setminus Z}=0$ and $p>\dim(Z)$ (the Krull dimension of $Z$, which may be infinite).
\end{prop}
\begin{proof}
There is nothing to show if $\dim(Z)=\infty$, so we may show this by induction on $\dim(Z)$.

If $\dim(Z)=0$, then the decomposition of $Z$ into its irreducible components $Z=\bigcup_{i=1}^n Z_i$ can be written as $Z_i = \{z_i\}$
where $z_i$ is a closed point of $X$.

As the affine open subsets form a topology base on $X$, there are affine open neighbourhoods $W_i\subseteq X$ of $z_i$
such that $Z\cap W_i = \{z_i\}$. Let $\Mm_i := (\iota_i)_\ast\left(\Mm\vert_{W_i}\right)$ where 
$W_i\xrightarrow{\iota_i} X$ is the open immersion.
Let $\tilde \Mm := \bigoplus_{i=1}^n \Mm_i$. We have seen in the corollaries to Theorem \lbl{thm:CohoOnSchemes} that
$H^p(X,\tilde\Mm)=0$ when $p>0$% and that $\ker(M\rigtharrow\tilde\Mm)$ vanishes on $W=\bigcup_{i=1}^n W_i$.
%As $\Mm$ and $\tilde\Mm$ vanish on $U=X\setminus Z$ and $X=U\cup W$, it follows that $\Mm\rightarrow \tilde\Mm$ is a monomorphism
.
Moreover, $(\Mm_i)_{Z_j}=0$ when $i\neq j$ while $\Mm\rightarrow \Mm_i$ is an isomorphism of $W_i$, hence of stalks at $z_i$.
Moreover, since $\Mm$ and $\Mm_i$ vanish on $X\setminus Z$,
we see that $\Mm\xrightarrow\cong\tilde\Mm$ and the asertion follows.

\emph{Inductive step}: Let $\dim(Z)$ be finite and the assertino be proved for $\Mm \in\mathrm{Qc}(X)$ supported on closed
subsets of smaller Krull dimension. Let $Z=\bigcup_{i=1}^n Z_i$ be the decomposition into irreducible components
and let $\eta_i$ be the generic point of $Z_i$. We have $\eta_i\notin Z_j$ for $i\neq j$, by the minimality
of $Z=\bigcup_{i=1}^n$. As the affine open subsets form a topology base, there are affine open neighbourhoods
$W_i$ of $\eta_i$ such that $W_i\cap Z_j=\emptyset$ for $i\neq j$.

Let $\Mm_i = (\iota_i)_\ast\left(\Mm\vert_{W_i}\right)$ where $W_i\xrightarrow\iota_iX$ is the inclusion.

\textbf{Claim}: Kernel and cokernel of $\Mm\rightarrow\tilde \Mm =\bigoplus_{i=1}^n \Mm_i$ vanish outside of
$\tilde Z = Z\setminus \bigcup_{i=1}^n W_i$.
\end{proof}
\appendix
\chapter{Appendix -- category theory corner}
\setcounter{thm}{0}
\renewcommand*{\thethm}{\Alph{thm}}
\section{Towards abelian categories}
\begin{defi}
	\begin{alphanumerate}
		\item \lbl{def:additiveCategory}A \defemph{pointed} category is a category with initial and final objects, such that the canonical (unique) morphism from the initial to the final object is an isomorphism.
		\item An \defemph{additive} category $\Aa$ is a pointed category which has a product $X\times Y$ (i.e., a fibre product over the final object $*$) and coproduct $X\amalg Y$ (i.e., a dual fibre product with respect to the initial object $*$) such that the canonical morphism $X\amalg Y\morphism X\times Y$ is an isomorphism for all objects $X,Y\in\Ob(\Aa)$ and such that the resulting addition law on $\Hom_\Aa(X,Y)$ defines a group structure for all $X,Y\in\Ob(\Aa)$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	 \begin{alphanumerate}
	 	\item When $\Aa$ is a pointed category and $X,Y\in\Ob(\Aa)$, let the \emph{zero morphism} (which we denote $0$) $X\morphism[0]Y$ be defined by $X\morphism *\morphism Y$, where $*$ is the both initial and final object.
	 	\item We will construct the canonical morphism $X\amalg Y\morphism[c]X\times Y$ from Definition~\reff{def:additiveCategory}\itememph{b}. The product $X\times Y$ comes with canonical projections $X\lmorphism[p_1]X\times Y\morphism[p_2]Y$ such that given morphisms $T\morphism[\xi]X$ and $T\morphism[\upsilon]Y$ there is a unique $T\morphism[\xi\times\upsilon]X\times Y$ such that
	 	\begin{diagram*}
	 		\node (XY) at (0,0) {$X\times Y$};
	 		\node (X) at (-1,1.25) {$X$};
	 		\node (Y) at (-1,-1.25) {$Y$};
	 		\node (T) at (2.5,0) {$T$};
	 		\scriptsize
	 		\draw[->] (XY) -- (X) node[pos=0.5, above right] {$p_1$};
	 		\draw[->] (XY) -- (Y) node[pos=0.5, below right] {$p_2$};
	 		\draw[->, dashed] (T) -- (XY) node[pos = 0.5, above] {$\exists!\ \xi\times \upsilon$};
	 		\draw[->, bend right] (T) to node[pos=0.5,below left] {$\xi$} (X);
	 		\draw[->, bend left] (T) to node[pos=0.5,above left] {$\upsilon$} (Y);
	 	\end{diagram*}
	 	commutes.
	 	
	 	Similarly, the coproduct $X\amalg Y$ has morphisms $X\morphism[i_1]X\amalg Y\lmorphism[i_2]Y$ such that given morphisms $X\morphism[\xi]T$ and $Y\morphism[\upsilon]T$ there is a unique morphism $X\amalg Y\morphism[\xi\amalg\upsilon]T$ such that
	 	\begin{diagram*}
	 		\node (XY) at (0,0) {$X\amalg Y$};
	 		\node (X) at (-1,1.25) {$X$};
	 		\node (Y) at (-1,-1.25) {$Y$};
	 		\node (T) at (2.5,0) {$T$};
	 		\scriptsize
	 		\draw[<-] (XY) -- (X) node[pos=0.5, above right] {$i_1$};
	 		\draw[<-] (XY) -- (Y) node[pos=0.5, below right] {$i_2$};
	 		\draw[->, dashed] (XY) -- (T) node[pos = 0.5, above] {$\exists!\ \xi\amalg \upsilon$};
	 		\draw[<-, bend right] (T) to node[pos=0.5,below left] {$\xi$} (X);
	 		\draw[<-, bend left] (T) to node[pos=0.5,above left] {$\upsilon$} (Y);
	 	\end{diagram*}
	 	commutes.
	 	
	 	Using the universal property of $X\times Y$, we get a unique morphism $X\morphism[\alpha]X\times Y$ such that $p_1\alpha=\id_X$, $p_2\alpha=0$ and a unique morphism $Y\morphism[\beta]X\times Y$ such that $p_1\beta=0$ and $p_2\beta=\id_Y$. Then 
	 	\begin{align*}
	 		c\colon X\amalg Y\xrightarrow{\alpha\amalg\beta}X\times Y
	 	\end{align*}
	 	is the morphism we are looking for. It is unique with the property that $p_1 c i_1=\id_X$, $p_1 c i_2=0$, $p_2 c i_1=0$, and $p_2 c i_2=\id_Y$.
	 	\item For abelian groups and modules over a ring, both $X\amalg Y$ and $X\times Y$ are given by $\left\{(x,y)\st x\in X,\ y\in Y\right\}$ with component-wise operations and $p_1(x,y)=x$, $p_2(x,y)=y$, $i_1(x)=(x,0)$, and $i_2(y)=(0,y)$.
	 	\item For an additive category $\Aa$, it follows that finite products $\prod_{i=1}^nX_i$ and coproducts $\coprod_{i=1}^nX_i$ (of some objects $X_1,\ldots,X_n\in\Ob(\Aa)$) exist and are canonically isomorphic. We typically denote both by $\bigoplus_{i=1}^nX_i$ in that case.
	 	\item We would like to describe the addition on $\Hom_\Aa(X,Y)$. For a pair of morphisms $X\doublemorphism[a][b]Y$ we denote the composition
	 	\begin{align*}
	 		X\xrightarrow{\id_X\times\id_X}X\oplus X\xrightarrow{a\amalg b}Y
	 	\end{align*}
	 	by $a+b$. Then $0$ is a neutral element and associativity holds, but the existence of inverse elements needs to be imposed to obtain indeed a group structure.
	 	\item It is, however, automatically abelian. What we need to show is $(a\amalg b)\circ\Delta=(b\amalg a)\circ\Delta$ with $\Delta=\id_X\times \id_X$. The universal property of coproducts gives a unique $X\oplus X\morphism[\sigma]X\oplus X$ such that
	 	\begin{diagram*}
	 		\node (XX2) at (0,0) {$X\oplus X$};
	 		\node (X1) at (-1,1.25) {$X$};
	 		\node (X2) at (-1,-1.25) {$X$};
	 		\node (XX1) at (-2,0) {$X\oplus X$};
	 		\node (Y) at (2.5,0) {$Y$};
	 		\scriptsize
	 		\draw[<-] (XX2) -- (X1) node[pos=0.5, above right] {$i_1$};
	 		\draw[<-] (XX2) -- (X2) node[pos=0.5, below right] {$i_2$};
	 		\draw[->] (XX2) -- (Y) node[pos = 0.5, above] {$a\amalg b$};
	 		\draw[<-, bend right] (Y) to node[pos=0.5,below left] {$a$} (X1);
	 		\draw[<-, bend left] (Y) to node[pos=0.5,above left] {$b$} (X2);
	 		\draw[<-] (XX1) -- (X1) node[pos=0.5, above left] {$i_2$};
	 		\draw[<-] (XX1) -- (X2) node[pos=0.5, below left] {$i_1$};
	 		\draw[->, dashed] (XX1) -- (XX2) node[pos=0.5, above] {$\exists!\ \sigma$};
	 	\end{diagram*}
	 	commutes. Then $\sigma$ is easily seen to be an isomorphism and $b\amalg a=(a\amalg b)\circ \sigma$ by the uniqueness of $b\amalg a$. It thus suffices to show $\sigma\Delta=\Delta$. By the uniqueness of $\Delta$, this is equivalent to $p_1\sigma\Delta=\id_X$ and $p_2\sigma\Delta=\id_X$. We claim that $p_1\sigma=p_2$ and vice versa, which would finish the proof. To see this, note that $p_1\sigma=p_2$ is equivalent to $p_1\sigma i_1=p_2i_1=0$ and $p_1\sigma i_2=p_2i_2=\id_X$ by the universal property of the coproduct $X\oplus X$. This follows from $\sigma i_1=i_2$ and $\sigma i_2=i_1$ by definition of $\sigma$.
	 \end{alphanumerate}
\end{rem*}
\begin{example*} The following are additive categories.
	\begin{alphanumerate}
		\item Modules over a given ring $R$ (in particular, abelian groups).
		\item Sheaves of modules.
		\item Banach spaces with bounded linear maps as morphisms. The common initial and final object is the zero space and $A\oplus B=\left\{(a,b)\st a\in A,\ b\in B\right\} $ with $\max\{\|a\|,\|b\|\}$ or $\|a\|+\|b\|$ as norm (this category will turn out not to be abelian).
		\item Free or projective modules over a ring $R$.
	\end{alphanumerate}
\end{example*}
\begin{defi}\lbl{def:Kernel}
	Let $A\morphism[\alpha]B$ be a morphism in an additive category $\Aa$. The \defemph{kernel} $\ker(A\morphism[\alpha]B)$ of $\alpha$ (if it exists) comes with a morphism $\ker(\alpha)\morphism[\iota]A$ satisfying the universal property
	\begin{align*}
	\Hom_\Aa\left(T,\ker\Big(A\morphism[\alpha]B\Big)\right)&\isomorphism \left\{f\in \Hom_\Aa\st \alpha f=0\right\}\\
	\left(T\morphism[\tau]A\right)&\longmapsto f=\iota\tau
	\end{align*}
	for any test object $T\in\Ob(\Aa)$. 
\end{defi}
\begin{varthm}{defi}\lbl{def:Cokernel}
	Similarly, the \defemph{cokernel} of $\alpha$ (if existent) comes with a morphism $B\morphism[\pi]\coker(\alpha)$ and satisfies
	\begin{align*}
	\Hom_\Aa\left(\coker\Big(A\morphism[\alpha]B\Big),T\right)&\isomorphism \left\{g\in\Hom_\Aa(B,T)\st g\alpha=0\right\}\\
	\left(\coker(\alpha)\morphism[\tau]T\right)&\longmapsto g=\tau\pi
	\end{align*}
	for any test object $T\in\Ob(\Aa)$.
\end{varthm}
	
	
\begin{rem}\lbl{rem:KernelCokernel}
	Kernels and cokernels in an additive category $\Aa$ are special cases of \emph{equalizers} and \emph{coequalizers} (cf.\ \cite[Definition~A.3.2 and Definition~A.3.4]{alggeo1}), respectively. Indeed, we have
	\begin{align*}
		\ker\Big(A\morphism[\alpha]B\Big)=\Eq\Big(A\doublemorphism[\alpha][0]B\Big)\quad\text{and}\quad\coker\Big(A\morphism[\alpha]B\Big)=\Coeq\Big(A\doublemorphism[\alpha][0]B\Big)\;. 
	\end{align*}
	But we can reconstruct equalizers and coequalizers from kernels and cokernels via
	\begin{align*}
		\Eq\Big(A\doublemorphism[\alpha][\beta]B\Big)=\ker\Big(A\xrightarrow{\alpha-\beta}B\Big)\quad\text{and}\quad \Coeq\Big(A\doublemorphism[\alpha][\beta]B\Big)=\coker\Big(A\xrightarrow{\alpha-\beta}B\Big)
	\end{align*}
	(the minus here is the one obtained from additivity of $\Aa$).
	
	\begin{defi}\lbl{def:EffectiveMono}
		A morphism $A\morphism[i]B$ is an \defemph{effective monomorphism}, if the following equivalent conditions hold.
		\begin{alphanumerate}
			\item (In any category) We have a bijection
			\begin{align*}
			\Hom_\Aa(T,A)&\isomorphism\left\{f\in\Hom_\Aa(T,B)\st 
			\begin{array}{c}
			\alpha f=\beta f\text{ if }B\doublemorphism[\alpha][\beta]S\text{ is any pair of}\\ 
			\text{morphisms such that }\alpha i=\beta i
			\end{array}
			\right\}\\
			t\in\Hom_\Aa(T,A) &\longmapsto f=it\;.
			\end{align*}
			\item (If the category has finite colimits) $i$ is an equalizer of something.
			\item (In additive categories with kernels and cokernels) $i$ is the kernel of an appropriate morphism.
			\item (In additive categories with kernels and cokernels) $i$ is the kernel of its cokernel.
		\end{alphanumerate}
	\end{defi}
	\begin{varthm}{defi}\lbl{def:EffectiveEpi}
		Dually, $A\morphism[p]B$ is an \defemph{effective epimorphism} if the following equivalent conditions hold.
		\begin{alphanumerate}
			\item (In any category) We have a bijection
			\begin{align*}
			\Hom_\Aa(B,T)&\isomorphism\left\{f\in\Hom_\Aa(A,T)\st 
			\begin{array}{c}
			f\alpha =f\beta\text{ if }S\doublemorphism[\alpha][\beta]A\text{ is any pair of}\\
			\text{morphisms such that }p\alpha =p\beta 
			\end{array}
			\right\}\\
			t\in\Hom_\Aa(B,T) &\longmapsto f=tp\;.
			\end{align*}
			\item (If the category has finite limits) $p$ is a coequalizer of something.
			\item (In additive categories with kernels and cokernels) $p$ is the cokernel of an appropriate morphism.
			\item (In additive categories with kernels and cokernels) $p$ is the cokernel of its kernel.
			\item $B^\op\morphism[p^\op]A^\op$ is an effective monomorphism in the dual category $\Aa^\op$.
		\end{alphanumerate}
	\end{varthm}
	In any category, a morphism which is mono and effectively epi (or epi and effectively mono) is an isomorphism, but there are examples of morphisms which are simultaneously mono and epi but not an isomorphism (e.g.\ $\IZ\monomorphism\IQ$ in the category of rings). This needs to be ruled out by a definition, and that's what is happening now! 
\end{rem}
\begin{defi}
	A category $\Aa$ is \defemph{abelian}, if it is additive, has kernels and cokernels and such that every monomorphism is effectively mono, every epimorphism is effectively epi, and (thus) any morphism which is both a mono- and an epimorphism is an isomorphism.
\end{defi}
\begin{rem*}
	\begin{alphanumerate}
		\item The three conditions on mono- and epimorphisms are not independent. The last condition, i.e.\ that every morphism which is both a mono- and an epimorphism is an isomorphism, follows from either of the former two.
		\item Since equalizers and coequalizers in an abelian category $\Aa$ can be constructed from kernels and cokernels (cf.\ Remark~\reff{rem:KernelCokernel}) and we already have finite products and coproducts from additivity of $\Aa$, we deduce that $\Aa$ has arbitrary finite limits and colimits. Indeed, we proved on exercise sheet \#7 from Algebraic Geometry I that finite limits can be constructed from equalizers and finite products, and, given coequalizers and finite coproducts instead, it's just the same for finite colimits.
		
		Conversely, the existence of finite limits and colimits guarantees that $\Aa$ has equalizers, coequalizers, finite products, and finite products, all of them being special cases of finite limits and colimits.
	\end{alphanumerate}
	
\end{rem*}
The category of modules (over a ring $R$) or sheaves of modules are abelian categories (as we are going to prove in a moment), but not Banach spaces or projective modules over most rings.
\begin{prop}\lbl{prop:RmodAbelian}
	The category $\Rr\cat{-Mod}$ of sheaves of modules (over a sheaf of rings $\Rr$ on some topological space $X$) is abelian.
\end{prop}
For clarity (and to better distinguish between the proof and Professor Franke's remarks about it), we will chop the proof into some lemmas.
\begin{lem}
	The category $\Rr\cat{-Mod}$ is additive.
\end{lem}
\begin{proof}
	First note that the zero sheaf $0$ is a common initial and final object. A direct sum of $\Mm,\Nn\in\Ob(\Rr\cat{-Mod})$ is given by
	\begin{align*}
	(\Mm\oplus\Nn)(U)=\left\{(m,n)\st m\in\Mm(U), n\in\Nn(U)\right\}\quad\text{for all }U\subseteq X\text{ open}
	\end{align*}
	(it's clear that this is a presheaf and it inherits the sheaf axiom from $\Aa$ and $\Nn$) with component-wise module operations and with $\Mm\lmorphism[p]\Mm\oplus\Nn\morphism[q]\Nn$ and $\Mm\morphism[i]\Mm\oplus\Nn\lmorphism[j]\Nn$ given by $p(m,n)=m$, $q(m,n)=n$, $i(m)=(m,0)$, and $j(n)=(0,n)$ on open subsets $U\subseteq X$ and $m\in\Mm(U)$, $n\in\Nn(U)$.
	
	If $\Mm\morphism[\mu]\Tt\lmorphism[\nu]\Nn$ are given, $\Mm\oplus\Nn\morphism[\mu\amalg\nu]\Tt$ sending $(m,n)\in(\Mm\oplus\Nn)(U)$ to $\mu(m)+\nu(n)$ verifies the universal property of the coproduct for $\Mm\oplus\Nn$. Similarly, $\Tt\morphism[\mu\times\nu]\Mm\oplus\Nn$ given by $(\mu\times\nu)(t)=(\mu(t),\nu(t))$ for $t\in\Tt(U)$ confirms the universal property of the product for $\Mm\oplus\Nn$. Also, $c=\id_{\Mm\oplus\Nn}$ is the unique endomorphism $c$ of that object such that $pci=\id_\Mm$, $qcj=\id_\Nn$, $pcj=0$, and $qci=0$. Thus, $\Rr\cat{-Mod}$ is additive (the group structure on $\Hom$ sets being easily verified).
\end{proof}
\begin{lem}\lbl{lem:RModHasKernels}
	The category $\Rr\cat{-Mod}$ has kernels.
\end{lem}
\begin{proof}
	Let $\Mm\morphism[f]\Nn$ be a morphism of sheaves of $\Rr$-modules and $\Kk$ be the sheaf given by 
	\begin{align*}
		\Kk(U)=\ker\Big(\Mm\morphism[f]\Nn\Big)(U)\coloneqq\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)
	\end{align*}
	(you should convince yourself that this indeed satisfies the sheaf axiom). Then the inclusion $\Kk\morphism[\kappa]\Mm$ is a monomorphism as $\Kk(U)\monomorphism\Mm(U)$ is injective for every open subset $U\subseteq X$. 
	
	If $\Tt\morphism[\tau]\Mm$ is a morphism of $\Rr$-modules such that $f\tau=0$, then, for every $t\in\Tt(U)$, we have $f(\tau(t))=0$, hence $\snake{\tau}(t)\coloneqq\tau(t)\in\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)=\Kk(U)$ and $\tau$ factors over 
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$\Tt$};
		\node[ob](A) at (2.5,1.25) {$\Mm$};
		\node[ob](RS) at (1.25,0) {$\Kk$};
		\scriptsize
		\draw[->] (R) -- (A) node[pos=0.5, above] {$\tau$};
		\draw[->, dashed] (R) -- (RS) node[pos=0.5, below left] {$\exists!\ \snake\tau$};
		\draw[right hook->] (RS) -- (A) node[pos=0.5, below right] {$\kappa$};
	\end{diagram*}
	This proves that $\Kk$ is indeed a kernel of $f$ in the category $\Rr\cat{-Mod}$.
\end{proof}
\begin{rem}
	\begin{alphanumerate}
		\item \lbl{rem:SheafMonomorphism}It is a consequence of the exactness of the $\colimit$ functor (for filtered systems of abelian groups; exactness of $\colimit$ does \emph{not} hold in general, not even for filtered colimits in abelian categories), that 
		\begin{align*}
		\Kk_x=\colimit[U\ni x]\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\ker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.
		\end{align*}
		This isomorphism can also be seen in a straightforward way.
		
		\item One may check that in any additive category (with kernels), a morphism $i$ is a monomorphism iff $\ker(i)=0$. Thus, in our example we have the equivalent conditions
		\begin{alphanumerate}
			\item[\itememph{\alpha}] $\Mm\morphism[f]\Nn$ is a monomorphism.
			\item[\itememph{\beta}] $\Mm(U)\morphism[f]\Nn(U)$ is injective for all open subsets $U\subseteq X$.
			\item[\itememph{\gamma}] $\ker(f)=0$ (the zero sheaf).
			\item[\itememph{\delta}] $\Mm_x\morphism[f]\Nn_x$ is injective for all $x\in X$.
		\end{alphanumerate}
	\end{alphanumerate}
	The construction of cokernels won't be that straightforward (duh!), related to the fact that epimorphisms in categories of sheaves aren't as simple as you might think. If $\Gg$ and $\Hh$ are sheaves on some topological space $X$ and $f$ is a morphism between them such that $\Gg(U)\morphism[f]\Hh(U)$ is surjective for all open $U$, then $f$ is an epimorphism, but there are epimorphisms $f$ for which this fails. 
	
	However, it follows from the fact that a sheaf $\Gg$ is canonically isomorphic to its sheafification $\Gg^\sh$ (cf. \cite[Proposition~1.2.1\itememph{d}]{alggeo1}) that a morphism between sheaves (of sets, groups, \ldots) is uniquely determined by the maps it induces on stalks. Thus, $\Gg\morphism\Hh$ is an epimorphism if $\Gg_x\morphism\Hh_x$ is an epimorphism in the respective target category for all $x\in X$.
\end{rem}
\begin{lem}\lbl{lem:RmodHasCokernels}
	The category $\Rr\cat{-Mod}$ has cokernels.
\end{lem}
\begin{proof}
	For a morphism $\Mm\morphism[f]\Nn$ of sheaves of $\Rr$-modules, the map 
	\begin{align*}
		U\mapsto \coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)=\Mm(U)/\Nn(U)\quad\text{for }U\subseteq X\text{ open}
	\end{align*}
	defines a presheaf $\Ff$ of $\Rr$-modules, but in general, $\Ff$ will fail to be a sheaf. We put $\Cc=\Ff^\sh$ (the \emph{sheafification} of $\Ff$, cf. \cite[Definition~1.2.3]{alggeo1}) and claim that $\Nn\morphism\Cc$ is a cokernel of $f$.
	
	Our first goal is to show that
	\begin{align}\lbl{eq:SheafCokernel}
		\Cc_x\simeq\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.\tag{$*$}
	\end{align}
	In the lecture, we did a direct proof, which was somewhat ugly and (in my opinion) lacking the essential step. From \cite[Proposition~1.2.1\itememph{a}]{alggeo1}, we get that $\Cc_x\simeq\Ff_x$ (which is basically what we proved in the lecture for this particular special case), so we need to show that
	\begin{align*}
		\Ff_x=\colimit[U\ni x]\coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq \coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.
	\end{align*}
	Since $\Mm_x=\colimit[U\ni x]\Mm(U)$ and similar for $\Nn_x$, this amounts to showing that cokernels and certain colimits commute. But by Remark~\reff{rem:KernelCokernel}, cokernels are just a special case of colimits, so what we are actually going to show is that colimits commute with colimits -- in the following sense.
	\begin{lem}\lbl{lem:ColimitsCommute}
		Let $(X_{i,j})_{i\in I,j\in J}$ be objects of a category $\Aa$. For each $i_1,i_2\in I$ let there be an indexing set $I_{i_1,i_2}$ and for each $\alpha\in I_{i_1,i_2}$ and $j\in J$ a morphism
		\begin{align*}
			f_\alpha^j\colon X_{i_1,j}\morphism X_{i_2,j}\;.
		\end{align*}
		Similarly, for each $j_1,j_2\in J$ let there be an indexing set $J_{j_1,j_2}$ and for each $\beta\in J_{j_1,j_2}$ and $i\in I$ a morphism
		\begin{align*}
			g_\beta^i\colon X_{i,j_1}\morphism X_{i,j_2}\;.
		\end{align*}
		Moreover, suppose that for each $i_1,i_2\in I$ and $j_1,j_2\in J$ and $\alpha\in I_{i_1,i_2}$ and $\beta\in J_{j_1,j_2}$ the diagram
		\begin{diagram}[baseline=0cm-0.5ex][\lbl{diag:CokernelsCommute}]
			\node[ob] (a) at (0,0.75) {$X_{i_1,j_1}$};
			\node[ob] (b) at (0,-0.75) {$X_{i_1,j_2}$};
			\node[ob] (c) at (2.5,0.75) {$X_{i_2,j_1}$};
			\node[ob] (d) at (2.5,-0.75) {$X_{i_2,j_2}$};
			\scriptsize
			\draw[->] (a) -- (b) node[pos=0.5,left] {$g_\beta^{i_1}$};
			\draw[->] (a) -- (c) node[pos=0.5,above] {$f_\alpha^{j_1}$};
			\draw[->] (c) -- (d) node[pos=0.5,right] {$g_\beta^{i_2}$};
			\draw[->] (b) -- (d) node[pos=0.5,above] {$f_\alpha^{j_2}$};
			\tag{\#}
		\end{diagram}
		commutes. Then there is an isomorphism
		\begin{align*}
			\colimit[i\in I]\colimit[j\in J]X_{i,j}\simeq\colimit[j\in J]\colimit[i\in I]X_{i,j}\simeq\colimit[(i,j)\in I\times J]X_{i,j}\;.
		\end{align*}
	\end{lem}
	\begin{proof}
		Clearly, it is enough to show the rightmost isomorphism. What we need to show is that $L\coloneqq\colimit[j]\colimit[i]X_{i,j}$ satisfies the universal property of $L'\coloneqq\colimit[(i,j)]X_{i,j}$.
		
		 Let $T$ be an object of $\Aa$ and $\big(X_{i,j}\morphism[\tau_{i,j}]T\big)_{i\in I,j\in J}$ be a cocone below the diagram $(X_{i,j})_{i,j}$. That is, for every $\alpha\in I_{i_1,i_2}$ and $j\in J$ the diagram 
		\begin{diagram*}
			\node[ob](R) at (0,1.25) {$X_{i_1,j}$};
			\node[ob](A) at (2.5,1.25) {$X_{i_2,j}$};
			\node[ob](RS) at (1.25,0) {$T$};
			\scriptsize
			\draw[->] (R) -- (A) node[pos=0.5, above] {$f_\alpha^j$};
			\draw[->] (R) -- (RS) node[pos=0.5, below left] {$\tau_{i_1,j}$};
			\draw[<-] (RS) -- (A) node[pos=0.5, below right] {$\tau_{i_2,j}$};
		\end{diagram*}
		commutes. By the universal properties of the $L_j\coloneqq\smash{\colimit[i]X_{i,j}}$, the $\tau_{i,j}$ factor over some maps $L_j\morphism[\tau_j]T$. Moreover, for each $j_1,j_2\in J$ and $\beta\in J_{j_1,j_2}$, the compositions 
		\begin{align*}
			X_{i,j_1}\morphism[g_\beta^i]X_{i,j_2}\morphism L_{j_2}
		\end{align*}
		induce a map $L_{j_1}\morphism[g_\beta]L_{j_2}$ by the universal property of $L_{j_1}$ (here, we silently used the commutativity of \eqreff{diag:CokernelsCommute}, otherwise the above compositions wouldn't be a cocone below $(X_{i,j_1})_{i\in I}$). We thus get a diagram
		\begin{diagram*}
			\node[ob](x1) at (0,3) {$X_{i,j_1}$};
			\node[ob](x2) at (5,3) {$X_{i,j_2}$};
			\node[ob](l1) at (1.25,1.5) {$L_{j_1}$};
			\node[ob](l2) at (3.75,1.5) {$L_{j_2}$};
			\node[ob](t) at (2.5,0) {$T$};
			\scriptsize
			\draw[->] (x1) -- (x2) node[pos=0.5, above] {$g_\beta^i$};
			\draw[dashed,->] (l1) -- (l2) node[pos=0.5, above] {$g_\beta$};
			\draw[->] (x1) -- (l1);
			\draw[->] (x2) -- (l2);
			\draw[->, bend right=45] (x1) to node[pos=0.5, below left] {$\tau_{i,j_1}$} (t);
			\draw[->, bend left=45] (x2) to node[pos=0.5, below right] {$\tau_{i,j_2}$} (t);
			\draw[->] (l1) -- (t) node[pos=0.5, below left] {$\tau_{j_1}$};
			\draw[->] (l2) -- (t) node[pos=0.5, below right] {$\tau_{j_2}$};
		\end{diagram*}
	in which everything but the bottom-middle triangle commutes. We show that this triangle commutes as well. Indeed, by the universal property of $L_{j_1}$, $\tau_{j_1}$ is the unique morphism $L_{j_1}\morphism T$ making each
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$X_{i,j_1}$};
		\node[ob](A) at (2.5,1.25) {$L_{j_1}$};
		\node[ob](RS) at (1.25,0) {$T$};
		\scriptsize
		\draw[->] (R) -- (A);
		\draw[->] (R) -- (RS) node[pos=0.5, below left] {$\tau_{i,j_1}$};
		\draw[<-] (RS) -- (A);
	\end{diagram*}
	commute. But apparently, $\tau_{j_2}g_\beta$ has this property as well, proving $\tau_{j_1}=\tau_{j_2}g_\beta$. Then the morphisms $\big(L_{j}\morphism[\tau_j]T\big)_{j\in J}$ form a cocone below the diagram $(L_j)_{j\in J}$, hence factor uniquely over some $L\morphism[\tau]T$ by the universal property of $L$.	
	
	It remains to prove uniqueness of $\tau$. If $L\morphism[\tau]T$ is a morphism over which each $X_{i,j}\morphism[\tau_{i,j}]T$ factors, then the composition $L_j\morphism L\morphism[\tau]T$ must equal $\tau_j$ since $\tau_j$ is uniquely determined by the universal property of $L_j$. But $\tau$ is uniquely determined by the $\tau_j$, proving uniqueness.
\end{proof}
	Having thus proved \eqreff{eq:SheafCokernel}, we now proceed with the proof of Lemma~\reff{lem:RmodHasCokernels}. We have a morphism $\Nn\morphism\Cc$ sending $n\in \Nn(U)$ to
	\begin{align*}
	\bigg(\text{image of }n\text{ under }\Nn(U)\morphism\Nn_x\morphism\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\bigg)_{x\in U}\;.
	\end{align*}
	Since $\Cc_x\simeq\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)$, this morphism $\Nn\morphism\Cc$ induces surjections on stalks, hence is an epimorphism of sheaves. We show that the morphism $\Nn\morphism\Cc$ satisfies the universal property of the cokernel.
	
	Let $\Nn\morphism[\tau]\Tt$ be a morphism of sheaves of $\Rr$-modules such that $\tau f=0$. Let $U\subseteq X$ be open. For 
	\begin{align*}
		\nu=(\nu_x)_{x\in U}\in\Cc(U)\subseteq\prod_{x\in U}\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)
	\end{align*}
	we define $\tau_1(\nu)\in\prod_{x\in U}\Tt_x$ by selecting $n\in\Nn_x$ whose image in $\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)$ equals $\nu_x$, then put $\tau_1(\nu)_x=\tau(n)_x$ which is independent of the choice of $n$ as $\tau f=0$. It follows from the coherence condition for $\Cc$ that $\tau_1(\nu)$ satisfies the coherence condition for $\Tt^\sh$, i.e.\ $\tau_1(\nu)\in\Tt^\sh(U)\subseteq\prod_{x\in U}\Tt_x$. Hence there is $\Cc\morphism[\tau_2]\Tt$ such that $\tau_1=\Big(\Tt\isomorphism\Tt^\sh\Big)\circ\tau_2$ and $\tau_2$ makes
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$\Nn$};
		\node[ob](A) at (2.5,1.25) {$\Tt$};
		\node[ob](RS) at (1.25,0) {$\Cc$};
		\scriptsize
		\draw[->] (R) -- (A) node[pos=0.5, above] {$\tau$};
		\draw[->, dashed] (R) -- (RS) node[pos=0.5, below left] {$\exists!\ \tau_2$};
		\draw[->] (RS) -- (A);
	\end{diagram*}
	commutative. Uniqueness of $\tau_2$ is easy to see stalk-wise. It follows that $\Nn\morphism\Cc$ is ineed a cokernel of $f$.
\end{proof}
\begin{rem}\lbl{rem:SheafEpimorphism}
	One may check that in any additive category (with cokernels) a morphism $f$ is an epimorphism if $\coker(f)=0$. By our previous construction of cokernels and the description of stalks, we have equivalent conditions
	\begin{alphanumerate}
		\item $\Mm\morphism[f]\Nn$ is an epimorphism of sheaves of $\Rr$-modules.
		\item $\Mm_x\morphism[f]\Nn_x$ is surjective for all $x\in X$.
		\item For every open $U\subseteq X$ and $n\in\Nn(U)$ there are an open covering $U=\bigcup_{\lambda\in\Lambda}U_\lambda$ and $m_\lambda\in\Mm(U_\lambda)$ such that $n|_{U_\lambda}=f(m_\lambda)$
	\end{alphanumerate}
	\ldots but \itememph{c} does \emph{not} imply the surjectivity of $\Mm(U)\morphism[f]\Nn(U)$, unless, e.g., $f$ is also a monomorphism.
\end{rem}
\begin{proof}[Proof of Proposition~\reff{prop:RmodAbelian}]
	We verify the rest of the abelianness conditions. First, let $\Mm\morphism[f]\Nn$ be a mono- and epimorphism. Then it induces isomorphisms on stalks (by Remark~\reff{rem:SheafMonomorphism}\itememph{b} and Remark~\reff{rem:SheafEpimorphism}), hence is an isomorphism itself.
	
	Let $\Mm\morphism[i]\Nn$ be a monomorphism and $\Nn\morphism\Cc$ be its cokernel. Then 
	\begin{align*}
		\ker\left(\Nn\morphism\Cc\right)_x=\ker\left(\Nn_x\morphism\Cc_x\right)=\ker\left(\Nn_x\morphism\coker\Big(\Mm_x\morphism[i]\Nn_x\Big)\right)\simeq\Mm_x
	\end{align*}
	as $\Mm_x\morphism[i]\Nn_x$ is injective. Hence $\Mm\morphism\ker\left(\Nn\morphism\Cc\right)$ induces isomorphisms on stalks and thus is an isomorphism itself. It follows by Definition~\reff{def:EffectiveMono}\itememph{d} that any monomorphism is an effective monomorphism.
	
	Similar arguments apply to epimorphisms.	
\end{proof}
Recall the definition of an adjoint pair of functors.
\begin{defi}[{\cite[Definition~A.2.3]{alggeo1}}]\lbl{def:AdjointFunctors}
	Let $\Aa,\Bb$ be categories. A pair $\Aa\doublelrmorphism[L][R]\Bb$ of (covariant) functors is called \defemph{adjoint}, if there is a canonical bijection
	\begin{align*}
		\Hom_\Aa(X,RY)\isomorphism\Hom_\Bb(LX,Y)
	\end{align*}
	which is functorial in both $X\in\Ob(\Aa)$ and $Y\in\Ob(\Bb)$.
\end{defi}
\begin{rem}\lbl{rem:AdjunctionPreservesStuff}
	It can be easily seen that $L$ preserves colimits (in particular, coproducts, and in particular again, initial objects) and $R$ preserves limits (in particular, products, and in particular again, final objects). When $\Aa$ and $\Bb$ are additive, it follows that both $L$ and $R$ map $0$ to $0$ and are compatible with finite direct sums. Moreover, $L$ preserves cokernels and $R$ preserves kernels since these are special cases of colimits and limits, respectively (in particular, I have no idea what the purpose of Franke's extra calculation was).%We don't need this.%Because of
	%\begin{align*}
	%	\Hom_\Aa\left(T,R\Big[\ker\Big(X\morphism[f]Y\Big)\Big]\right)&\simeq \Hom_\Bb\left(LT,\ker\Big(X\morphism[f]Y\Big)\right)\\
	%	&\simeq\ker\left(\Hom_\Bb(LT,X)\morphism[f\circ]\Hom_\Bb(LT,Y)\right)\\
	%	&\simeq\ker\left(\Hom_\Aa(T,RX)\morphism[Rf\circ]\Hom_\Aa(T,RY)\right)\\
	%	&\simeq\Hom_\Aa\left(T,\ker\Big(RX\morphism[Rf]RY\Big)\right)\;,
	%\end{align*}
\end{rem}

\printbibliography

\end{document}          
