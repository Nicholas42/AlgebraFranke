\documentclass[a4paper,parskip=half,numbers=enddot, DIV=12]{scrreprt}
%\usepackage[utf8]{inputenc}

\usepackage{../header}
\usepackage{../frankenumbering}
\usepackage{../shortcuts}

\usepackage{csquotes}
%\usepackage{tikz-cd}%I cannot draw diagrams without it - Felix. %well, I can - Ferdinand
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
\setcounter{biburlnumpenalty}{7000}
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\addbibresource{../literatur.bib}

% Title Page
\title{Homological Methods in Commutative Algebra}
\author{Ferdinand Wagner}
\date{Sommersemester 2018}

\displaywidowpenalty=8000
%\postdisplaypenalty=8000
\widowpenalty=8000
\clubpenalty=8000

\begin{document}
\pagenumbering{Alph}
\maketitle
\pagenumbering{roman}

\thispagestyle{plain}
This text consists of notes on the lecture Homological Methods in Commutative Algebra, taught at the University of Bonn by Professor Jens Franke in the summer term (Sommersemester) 2018. The dual lecture Cohomological Methods in Mmutative Algebra was given in the winter term (Wintersemester) 2017/18.

Please report bugs, typos etc. through the \emph{Issues} feature of github.

\tableofcontents

\addchap{Introduction}
\pagenumbering{arabic}

Professor Franke started the lecture giving an idea of what the $\Tor$ and $\Ext$ functors do. Let $R$ be a commutative ring with $1$. For an exact sequence of $R$-modules
\begin{align*}
	0\morphism M'\morphism M\morphism M''\morphism 0
\end{align*}
and $T$ another $R$-module, the sequence 
\begin{align}\lbl{eq:TensorSequence}
	M'\otimes_RT\morphism M\otimes_RT\morphism M''\otimes_RT\morphism 0
\end{align}
is exact but usually can't be extended by $0$ on the left end. The same is true for
\begin{align}\lbl{eq:HomSequence}
	0\morphism\Hom_R(T,M')\morphism\Hom_R(T,M)\morphism\Hom_R(T,M'')
\end{align}
and
\begin{align}\lbl{eq:HomSequence2}
	0\morphism\Hom_R(M'',T)\morphism\Hom_R(M,T)\morphism\Hom_R(M',T)\;,
\end{align}
but again, they can't be extended by $0$ on the right in general.
\begin{example*}
	Take $R=\IZ$ and consider the exact sequence $0\morphism\IZ\morphism[\cdot2]\IZ\morphism\IZ/2\IZ\morphism0$. 
	\begin{alphanumerate}
		\item Let $T=\IZ/2\IZ$ in \eqreff{eq:TensorSequence}. Then $\IZ\otimes_\IZ\IZ/2\IZ\simeq\IZ/2\IZ$ and $\IZ/2\IZ\morphism[\cdot 2]\IZ/2\IZ$ is the zero morphism, showing that injectivity on the left end fails in \eqreff{eq:TensorSequence}.
		\item Let $T=\IZ/2\IZ$ in \eqreff{eq:HomSequence}. We claim that surjectivity fails on the right end. Indeed, if it was surjective, then $\id_{\IZ/2\IZ}\in\Hom_\IZ(\IZ/2\IZ,\IZ/2\IZ)$ would have to have a lift
		\begin{diagram*}
			\node[ob] (Z2) at (0,0) {$\IZ/2\IZ$};			
			\node[ob] (Z22) at (1.75,0) {$\IZ/2\IZ$};
			\node[ob] (Z) at (1.75,1.5) {$\IZ$};
			\draw[transform canvas={yshift=1pt}] (Z2) -- (Z22);
			\draw[transform canvas={yshift=-1pt}] (Z2) -- (Z22);
			\draw[->>] (Z) -- (Z22);
			\draw[->, dashed] (Z2) -- (Z);
		\end{diagram*}
		which it hasn't as $\IZ$ is $2$-torsion free and thus every morphism $\IZ/2\IZ\morphism\IZ$ must be $0$.
		\item Let $T=\IZ$ in \eqreff{eq:HomSequence2}. We claim that that surjectivity fails on the right end, or more specifically, that $\id_{\IZ}\in\Hom_\IZ(\IZ,\IZ)$ has no preimage. Indeed, if $f\in\Hom_\IZ(\IZ,\IZ)$ is a preimage of $\id_\IZ$, i.e. the composition $\IZ\morphism[\cdot2]\IZ\morphism[f]\IZ$ equals $\id_\IZ$, then $f$ must be given by $f(n)=\frac{n}{2}$ on $2\IZ$, but this can't be extended to all of $\IZ$, contradiction!
	\end{alphanumerate}
\end{example*}
To handle this deficiency, one constructs \emph{derived functors} $\Tor$ and $\Ext$, which give rise to long exact sequences
\begin{multline*}
	\ldots\morphism\Tor_2^R(M'',T)\morphism \Tor_1^R(M',T)\morphism \Tor_1^R(M,T)\morphism \Tor_1^R(M'',T)\\
	\morphism M'\otimes_RT\morphism M\otimes_RT\morphism M''\otimes_RT\morphism 0\;,
\end{multline*}
as well as
\begin{multline*}
	0\morphism\Hom_R(T,M')\morphism\Hom_R(T,M)\morphism\Hom_R(T,M'')\\
	\morphism\Ext_R^1(T,M')\morphism\Ext_R^1(T,M)\morphism\Ext_R^1(T,M'')\morphism\Ext_R^2(T,M')\morphism\ldots
\end{multline*}
and
\begin{multline*}
0\morphism\Hom_R(M'',T)\morphism\Hom_R(M,T)\morphism\Hom_R(M',T)\\
\morphism\Ext_R^1(M'',T)\morphism\Ext_R^1(M,T)\morphism\Ext_R^1(M',T)\morphism\Ext_R^2(M'',T)\morphism\ldots\;.
\end{multline*}
extending the open ends of \eqreff{eq:TensorSequence}, \eqreff{eq:HomSequence}, and \eqreff{eq:HomSequence2} respectively.

A highlight of this lecture will be \emph{Serre's characterization of regularity}.
\begin{thm*}
	For a  Noetherian local ring $R$ with maximal ideal $\mm$ and residue field $k$, the following are equivalent.
	\begin{alphanumerate}
		\item $\dim_k\mm/\mm^2=\dim R$ (i.e., $R$ is regular).
		\item There is some vanishing bound for $\Tor_\bullet ^R(-,-)$.
		\item \ldots and $\dim R$ is such a vanishing bound.
		\item There is some vanishing bound for $\Ext_R^\bullet (-,-)$.
		\item \ldots and $\dim R$ is again such a vanishing bound.
	\end{alphanumerate}
\end{thm*}
From this, one can deduce the following
\begin{cor*}
	If $R$ is a regular Noetherian local ring and $\pp\in\Spec R$, then $R_\pp$ is regular as well.
\end{cor*}

We will also introduce the notion of \emph{Cohen--Macaulay rings} and prove that they are \emph{universally catenary} (which is quite a generalization of what we did in Algebra I, cf. \cite[Theorem~10]{alg1}).
\begin{thm*}
	If $R$ is a regular Noetherian local ring or, more generally, a Cohen--Macaulay ring, then it is \defemph{universally catenary}: If $A$ is an $R$-algebra of finite type and $X\subseteq Y\subseteq Z$ are irreducible closed subsets of $\Spec A$, then
	\begin{align*}
		\codim(X,Y)+\codim(Y,Z)=\codim(X,Z)\;.
	\end{align*}
\end{thm*}

\chapter{\texorpdfstring{$\Tor$}{Tor} and \texorpdfstring{$\Ext$}{Ext} of \texorpdfstring{$R$}{R}-modules}
From now on, unless otherwise stated, our rings are commutative with $1$.
\section{Injective and projective modules and properties of \texorpdfstring{$\Ext_R^\bullet $}{Ext}}
\begin{prop}[Baer's criterion]\lbl{prop:InjectiveModules}
	For an $R$-module $N$, the following are equivalent.
	\begin{alphanumerate}
		\item The functor $\Hom_R(-,N)$ is exact.
		\item For any embedding $M'\monomorphism M$ of $R$-modules, $\Hom_R(M,N)\morphism\Hom_R(M',N)$ is surjective.
		\item Property \itememph{b} holds for $R=M$. In other words, if $I\subseteq R$ is any ideal, then any morphism $I\morphism N$ of $R$-modules extends to a morphism $R\morphism N$.
	\end{alphanumerate}
\end{prop}
\begin{rem}
	\begin{alphanumerate}
		\item \lbl{rem:Injective}Since there is a bijection
		\begin{align*}
			\Hom_R(R,M)&\isomorphism M\\
			\left(r\mapsto r\cdot m\right)&\longmapsfrom m\\
			\left(R\morphism[\phi]M\right)&\longmapsto \phi(1)\;,
		\end{align*}
		Proposition~\reff{prop:InjectiveModules}\itememph{c} can be reformulated as that any morphism $I\morphism N$ for $I\subseteq R$ an ideal has the form $i\mapsto i\cdot m$ for some $m\in M$.
		\item Note that Proposition~\reff{prop:InjectiveModules}\itememph{c} is trivial when $I=0$.
		\item When $R=\IZ$, every ideal $I\subseteq \IZ$ has the form $n\IZ$ for some $n\in\IZ$ and a morphism $n\IZ\morphism[\phi]N$ is uniquely determined by $\phi(n)$. Thus, an extension $\hat\phi$ of $\phi$ to $\IZ$ exists iff there is an element $\nu\in N$ such that $n\cdot\nu=\phi(n)$ (in that case, put $\hat\phi(1)=\nu$). Hence, Proposition~\reff{prop:InjectiveModules}\itememph{c}  amounts to whether the abelian group $N$ is \emph{divisible}, that is, whether $N\morphism[\cdot n]N$ is surjective for all $n\in\IZ$ (also cf.\ Definition~\reff{def:Divisible}).
	\end{alphanumerate}
\end{rem}
\begin{defi}
	\begin{alphanumerate}
		\item \lbl{def:injectiveModule}An $R$-module is called \defemph{injective} if it satisfies the equivalent conditions from Proposition~\reff{prop:InjectiveModules}.
		\item In an arbitrary category $\Aa$, an object $I$ is called \defemph{injective} if for every monomorphism $X\monomorphism Y$, the induced map $\Hom_\Aa(Y,I)\morphism\Hom_\Aa(X,I)$ is surjective, that is, for every morphism $X\morphism[\phi]I$ there is a (usually non-unique) lift
		\begin{diagram*}
			\node[ob] (X) at (0,0) {$X$};			
			\node[ob] (Y) at (1.75,0) {$Y$};
			\node[ob] (I) at (0,1.5) {$I$};
			\scriptsize
			\draw[right hook->] (X) -- (Y);
			\draw[->] (X) -- (I) node[pos=0.5, left] {$\phi$};
			\draw[->, dashed] (Y) -- (I) node[pos=0.5, above right] {$\exists\ \hat{\phi}$};
		\end{diagram*}
	\end{alphanumerate}
\end{defi}
\begin{proof}[Proof of Proposition~\reff{prop:InjectiveModules}]
	The implication \itememph{b} $\Rightarrow$ \itememph{c} is trivial. Let's prove \itememph{c} $\Rightarrow$ \itememph{b}. Let $M\morphism[f]N$ be a morphism of $R$-modules and consider
	\begin{align*}
		\MM=\left\{(Q,\phi)\st M\subseteq Q\subseteq M'\text{ and }\snake{\phi}\in\Hom_R(Q,N)\text{ such that }\phi|_M=f\right\}\;.
	\end{align*}
	$\MM$ becomes a partially ordered set via $(Q_1,\phi_1)\preceq (Q_2,\phi_2)\Leftrightarrow Q_1\subseteq Q_2$ and $\phi_2|_{Q_1}=\phi_1$. Then it's easy to see that Zorn's lemma is applicable, hence $\MM$ has a $\preceq$-maximal element $(Q_*,\phi_*)$. If \itememph{c} is satisfied and $Q_*\subsetneq M'$, there is an $m\in M'\setminus L_*$. Let $I=\left\{r\in R\st rm\in Q_*\right\}$ and let $I\morphism[g]N$ be given by $g(r)=\phi_*(rm)$. By \itememph{c}, there is a morphism $R\morphism[\gamma]N$ extending $g$, i.e., a $\nu\in N$ such that $\phi_*(rm)=r\nu$ when $r\in I$ (using Remark~\reff{rem:Injective}\itememph{a}). Let $\snake{Q}=Q_*+Rm$ and $\snake{\phi}(m_*+rm)=\phi_*(m_*)+r\nu$ for $m_*\in Q_*$ and $r\in R$, then it's easy to see that $\snake{\phi}$ is well-defined and $(Q_*,\phi_*)\prec (\snake{Q},\snake{\phi})$, a contradiction.
	
	The equivalence \itememph{a} $\Leftrightarrow$ \itememph{b} is easy to see as for any short exact sequence $0\morphism X\morphism Y\morphism Z\morphism 0$, the sequence $0\morphism\Hom_R(Z,N)\morphism\Hom_R(Y,N)\morphism\Hom_R(X,N)$ is exact anyways and \itememph{b} implies exactness at the right end. 
\end{proof}
\begin{defi}\lbl{def:Divisible}
	If $R$ is a domain and $M$ an $R$-module, then $M$ is called \defemph{divisible} if $M\morphism[r\cdot]M$ is surjective for all $r\in R\setminus\{0\}$
\end{defi}
\begin{cor}
	\begin{alphanumerate}
		\item \lbl{cor:InjectivityAndDivisibility}When $R$ is a domain, the property from Proposition~\reff{prop:InjectiveModules}\itememph{c} for principal ideals $I$ is equivalent do divisibility of $N$.
		\item Any injective module $N$ is divisible in the following sense: If $r\in R$ is not a zero divisor, $N\morphism[r\cdot]N$ is surjective.
		\item In particular, if $N$ is injective and $S\subseteq R$ a multiplicative subset not containing zero divisors, then the morphism $N\morphism N_S$ to the localization of $N$ at $S$ is surjective.
	\end{alphanumerate}
\end{cor}
\begin{proof}
	Part \itememph{a} can be seen using the arguments from Remark~\reff{rem:Injective}\itememph{c}. For \itememph{b}, note that $R\morphism[r\cdot]R$ is injective when $r$ is no zero divisor, hence, for any $n\in N$, the morphism $\phi\in\Hom_R(R,N)$ given by $\phi(1)=n$ extends to $\hat{\phi}\in\Hom_R(R,N)$ such that $\phi=r\hat{\phi}$. Then $\hat{\phi}(1)$ is a preimage of $n$ under $N\morphism[r\cdot]N$. Part \itememph{c} follows from \itememph{b} and the universal property of localization.
\end{proof}
\begin{rem*}
	Note that $R=\IZ/p^2\IZ$, for $p\in\IZ$ a prime, is injective over itself, but $R\morphism[p\cdot ]R$ fails to be injective. Indeed, the only ideal of $R$ where Baer's criterion is in question is $(p)\subseteq R$. We need to show that any $R$-morphism $(p)\morphism R$ extends to an $R$-morphism $R\morphism R$. But any $(p)\morphism[\phi] R$ maps $p$ to the $p$-torsion part of $R$, i.e., to $(p)$ itself, hence is given by $\phi(p)=rp$ for some $r\in R$ and can be extended via $\hat{\phi}$ given by $\hat{\phi}(1)=r$. This shows that Corollary~\reff{cor:InjectivityAndDivisibility}\itememph{b} is somewhat sharp.
\end{rem*}
\begin{cor}\lbl{cor:PIDInjDiv}
	A module over a principal ideal domain is injective iff it is divisible.
\end{cor}
\begin{proof}
	Follows from Corollary~\reff{cor:InjectivityAndDivisibility}\itememph{a}.
\end{proof}
\begin{rem*}
	The same holds for Dedekind domains, see Corollary~\reff{cor:DedekindInjective}.
\end{rem*}
\begin{cor}\lbl{cor:PIDInjectiveResolution}
	When $R$ is a principal ideal domain, then any quotient of an injective module is injective again. The category of $R$-modules has \defemph{sufficiently many injective objects} in the sense that for any object $X$ there is a monomophism $X\monomorphism I$ with $I$ injective. Thus, any $R$-module $X$ has an \defemph{injective resolution}, i.e., an exact sequence
	\begin{align*}
	0\morphism X\morphism I^0\morphism I^1\morphism I^2\morphism\ldots
	\end{align*}
	with injective objects $I^0,I^1,I^2,\ldots$. In fact, any $R$-module, for $R$ a principal ideal domain, has an injective resolution $0\morphism X\morphism I^0\morphism I^1\morphism 0$ of length $1$.
\end{cor}
\begin{proof}
	The first assertion follows as the quotient of divisible modules is divisible again. Note that $K/R$ is divisible, $K$ being the quotient field of $R$, hence it is injective. If $M$ is any $R$-module and $m\in M\setminus\{0\}$. We have to distinguish to cases.
	
	\emph{Case 1.} Suppose $\Ann_R(m)$ is non-zero, i.e., $\Ann_R(m)=(\alpha)$ for some $\alpha\in R\setminus \{0\}$ (remember we have a principal ideal domain). Then we have a morphism from $Rm\subseteq M$ to $K/R$ given by $rm\mapsto \frac{r}{\alpha}\bmod R$ (note that modding out $R$ is necessary for this to be well-defined -- we couldn't just have used $K$). By injectivity of $K/R$, there is an extension $M\morphism[\phi_m]K/R$, satisfying $\phi_m(m)\neq 0$. Let $I_m\subseteq K/R$ be the target of $\phi_m$.
	
	\emph{Case 2.} If $\Ann_R(m)=0$, we get a morphism from $Rm\subseteq M$ to $K$ instead, sending $rm\mapsto r$ (this time, using $K$ doesn't cause problems thanks to $\Ann_R(m)=0$). By injectivity of $K$, this extends to a morphism $M\morphism[\phi_m]K$ such that $\phi_m(m)\neq0$. Let $I_m=K$ be the target of $\phi_m$.
	
	Now put $I=\prod_{m\in M\setminus\{0\}}I_m$. Then $I$ is divisible (since every $I_m$ is), hence injective, and $M\morphism I$, $\mu\mapsto\left(\phi_m(\mu)\right)_{m\in M\setminus\{0\}}$ is a monomorphism. As a quotient of $I^0=I$, $I^1=\coker\left(M\morphism I^0\right)$ is injective as well, hence $0\morphism M\morphism I^0\morphism I^1\morphism 0$ is an injective resolution of length $1$.
\end{proof}
\begin{prop}[a.k.a. ``Satz 2'']\lbl{prop:RModHasEnoughInjectives}
	For any ring $R$, the category of $R$-modules has sufficiently many injective objects.
\end{prop}
\begin{proof}
	This will follow from Lemma~\reff{lem:AdjointStuff}\itememph{b} and \itememph{c} below.
\end{proof}
\begin{rem*}
	This holds in vast more generality, and in particular, Proposition~\reff{prop:RModHasEnoughInjectives} follows immediately from the following theorem, which, however, we are not going to prove in this lecture.
	\begin{thm*}[Grothendieck]
		Any AB5 category with a generator has sufficiently many injective objects.
	\end{thm*}
\end{rem*}
\begin{lem}\lbl{lem:AdjointStuff}
	Let $R$ be any ring.
	\begin{alphanumerate}
		\item The forgetful functor from $R\cat{-Mod}$ to the category $\IZ\cat{-Mod}$ of abelian groups has a right-adjoint functor, namely $\Hom_\IZ(R,-)$. That is, there is a bijection
		\begin{align}\lbl{eq:ForgetHomAdjunction}
			\Hom_\IZ(M,A)\isomorphism\Hom_R(M,\Hom_\IZ(R,A))\tag{$*$}
		\end{align}
		for any $R$-module $M$ and any abelian group $A$. Here, we equip $\Hom_\IZ(R,A)$ with an $R$-module structure via $(r\cdot\phi)(x)=\phi(xr)$ for $\phi\in\Hom_\IZ(R,A)$ and $r,x\in R$.
		\item For any injective abelian group $I$, $\Hom_\IZ(R,I)$ is an injective $R$-module.
		\item Let $M$ be any $R$-module and $I$ and abelian group and $M\monomorphism[\phi]I$ a monomorphism of abelian groups, then the $R$-morphism $M\morphism\Hom_\IZ(R,I)$ obtained by applying \eqreff{eq:ForgetHomAdjunction} is injective.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	Part \itememph{a}. The proof given in the lecture was rather computational, so I decided to include a more elegant one. It is easy to see that $\Hom_\IZ(R,-)$ is indeed a functor $\IZ\cat{-Mod}\morphism R\cat{-Mod}$. From the well-known tensor-hom adjunction we obtain a canonical bijection
	\begin{align*}
		\Hom_\IZ(M\otimes _RR,A)\isomorphism\Hom_R(M,\Hom_\IZ(R,A))\;.
	\end{align*}
	But $M$ is an $R$-module and so $M\otimes_RR\simeq M$ canonically, proving \eqreff{eq:ForgetHomAdjunction}. 
	%The bijection-in-question \eqreff{eq:ForgetHomAdjunction} sends $\phi\in\Hom_\IZ(M,A)$ to $\psi\in\Hom_R(M,\Hom_\IZ(R,A))$ given by $(\psi(m))(r)=\phi(rm)$ and 
	
	Part \itememph{b}. Since the forgetful functor $R\cat{-Mod}\morphism\IZ\cat{-Mod}$ clearly preserves injectivity of morphisms (i.e., monomorphisms), this comes down to the following more general fact about adjoint pairs of functors.
	\begin{fact}\lbl{fact:AdjointInjProj}
		Let $\Aa\doublelrmorphism[L][R]\Bb$ be an adjoint pairs of functors. Suppose that $L$ preserves monomorphisms. Then $R$ preserves injective objects.
	\end{fact}
	\begin{proof}[Proof of Fact~\reff{fact:AdjointInjProj}]
		Let $I\in\Ob(\Bb)$ be injective and $X\monomorphism Y$ be a monomorphism in $\Aa$. By assumption, $LX\monomorphism  LY$ is a monomorphism in $\Bb$. In the diagram 
			\begin{diagram*}
				\node[ob] (Y) at (0,1.5) {$\Hom_\Aa(Y,RI)$};
				\node[ob] (LY) at (0,0) {$\Hom_\Bb(LY,I)$};
				\node[ob] (X) at (3.5,1.5) {$\Hom_\Aa(X,RI)$};
				\node[ob] (LX) at (3.5,0) {$\Hom_\Bb(LX,I)$};
				\scriptsize
				\draw[->] (Y) -- (LY) node[pos=0.5, sloped, above=-0.25ex] {$\sim$};
				\draw[->] (X) -- (LX) node[pos=0.5, sloped, above=-0.25ex] {$\sim$};
				\draw[->] (Y) -- (X);
				\draw[->] (LY) -- (LX);
			\end{diagram*}
		the lower horizontal arrow is surjective by injectivity of $I$, hence so is the upper horizontal arrow.
	\end{proof}
	Back to the proof of Lemma~\reff{lem:AdjointStuff} and let's prove \itememph{c}. Let $M\monomorphism[\phi]I$ be a monomorphism of abelian groups. The corresponding morphism $M\morphism[\psi]\Hom_\IZ(R,I)$ sends $m\in M$ to $\psi(m)\colon R\morphism I$ given by $\psi(m)(r)=\phi(rm)$. If $\psi(m)$ is the zero morphism for some $m\in M$, then $0=\psi(m)(1)=\phi(m)$, proving $m=0$ by injectivity of $\phi$. Then $\psi$ is also injective.
\end{proof}
The dual concept of \emph{projective modules} should be known, but for the sake of completeness I will include it nevertheless.
\begin{defi}
	\begin{alphanumerate}
		\item \lbl{def:projectiveModule}An $R$-module $P$ is called \defemph{projective} iff $\Hom_R(P,-)$ is exact.
		\item In an arbitrary category $\Aa$, an object $P$ is called \defemph{projective} if for every epimorphism $Y\epimorphism X$, the induced map $\Hom_\Aa(P,X)\morphism\Hom_\Aa(P,Y)$ is surjective, that is, for every morphism $P\morphism[\phi]X$ there is a (usually non-unique) lift
		\begin{diagram*}
			\node[ob] (P) at (0,0) {$P$};			
			\node[ob] (X) at (1.75,0) {$X$};
			\node[ob] (Y) at (1.75,1.5) {$Y$};
			\scriptsize
			\draw[->>] (Y) -- (X);
			\draw[->] (P) -- (X) node[pos=0.5, above] {$\phi$};
			\draw[->, dashed] (P) -- (Y) node[pos=0.5, above left] {$\exists\ \hat{\phi}$};
		\end{diagram*}
	\end{alphanumerate}
\end{defi}
Note that in the case of $R$-modules, Definition~\reff{def:projectiveModule}\itememph{a} and \itememph{b} are equivalent.

We will now use the $\Ext_R^\bullet(-,-)$ functor, which was constructed (for arbitrary abelian categories rather than just $R\cat{-Mod}$) in Subsection~\reff{subsec:ConstructionOfExt}.
\begin{prop}\lbl{prop:PIDExt2}
	Let $R$ be a PID.
	\begin{alphanumerate}
		\item For any $R$-modules $M,N$ we have $\Ext_R^p(M,N)=0$ when $p>1$.
		\item Any submodule of a projective $R$-module is projective.
	\end{alphanumerate}
\end{prop}
\begin{proof}
	Part \itememph{a}. By Corollary~\reff{cor:PIDInjectiveResolution}, $N$ has an injective resolution of length $1$, hence $\Ext_R^p(M,N)$ vanishes for $p>1$.
	
	Part \itememph{b}. Let $P$ be projective and $Q\subseteq P$ a submodule. For any test module $T$ there is an exact sequence $\Ext_R^1(P,T)\morphism\Ext_R^1(Q,T)\morphism\Ext_R^2(P/Q,T)$ in which $\Ext_R^1(P,T)$ vanishes as $P$ is projective and $\Ext_R^2(P/Q,T)$ vanishes by \itememph{a}. Hence $\Ext_R^1(Q,T)=0$ and $\Ext_R^1(Q,-)$ is the zero functor, showing exactness of $\Hom_R(Q,-)$, i.e., projectivity of $Q$ by Definition~\reff{def:projectiveModule}\itememph{a}.
\end{proof}
\begin{rem*}
	\begin{alphanumerate}
		\item We will soon generalize this to Dedekind domains, cf. Corollary~\reff{cor:DedekindInjective}.
		\item Let $R$ be a PID again. For $a\in R\setminus \{0\}$, the identity $\id_{R/aR}$ does \emph{not} lift to a morphism $R/aR\morphism R$, showing that $R/aR$ is not projective. By the classification of finitely generated $R$-modules and the fact that any direct summand of a projective module is projective again (this is clear using the criterion that projective modules over any ring are precisely the direct summands of free modules, cf. Lemma~\reff{lem:projectiveDirectSummand} but also follows from Proposition~\reff{prop:PIDExt2}\itememph{b} in our case), this shows that a finitely generated $R$-module is projective iff it is free.
		
		This can be seen to hold without the assumption of being finitely generated. Therefore, ``projective'' in Proposition~\reff{prop:PIDExt2}\itememph{b} may be replaced by ``free''.
	\end{alphanumerate}
\end{rem*}
\begin{example*}
	Let $R$ be any ring. If $a\in R$ is not a zero divisor. We can calculate $\Ext_R^\bullet(R/aR,M)$ for any $R$-module $M$ using the projective resolution $0\morphism R\morphism[\cdot a]R\morphism R/aR\morphism 0$. We get
	\begin{align*}
		\Ext_R^k(R/aR,M)=H^k\left(\Hom_R(R\morphism[\cdot a]R,M)\right)=\begin{cases}
			\ker(M\morphism[\cdot a]M) & \text{if }k=0\\
			M/aM & \text{if }k=1\\
			0 & \text{else}
		\end{cases}\;.
	\end{align*}
\end{example*}
If $N$ is an injective $R$-module, then $\Ext_R^1(T,N)=0$ by Theorem~\reff{thm:DerivedFunctors}\itememph{b} for every test $R$-module $T$. Conversely, if $\Ext_R^1(-,N)=0$ is the zero functor, we see that $\Hom_R(-,N)$ is exact by the long exact $\Ext$ sequence, hence $N$ is injective by Definition~\reff{def:injectiveModule}\itememph{a}. The following proposition shows that this criterion can be sharpened.
\begin{prop}\lbl{prop:Ext1(R/I)}
	If $R$ is any ring, then an $R$-module $N$ is injective iff $\Ext_R^1(R/I,N)=0$ for every ideal $I\subseteq R$.
\end{prop}
\begin{proof}
	By Baer's criterion (Proposition~\reff{prop:InjectiveModules}), we only need to check exactness of $\Hom_R(-,N)$ on exact sequences of the form $0\morphism I\morphism R\morphism R/I\morphism 0$ for $I\subseteq R$ an ideal. By vanishing of $\Ext_R^1(R,N)$ (since $R$ is projective over itself), this is equivalent to $\Ext_R^1(R/I,N)=0$ by the long exact $\Ext$ sequence.
\end{proof}
\begin{rem*}
	As far as Professor Franke is aware, there is no similar criterion for projectivity, and by a famous result of Shelah the \emph{Whitehead problem} ``Is any abelian group $A$ with $\Ext_\IZ^1(A,\IZ)=0$ free'' is undecidable in ZFC set theory.
\end{rem*}
Our goal now is to establish some properties of $\Ext$ groups over a ring $R$, namely criteria for finitely generatedness and compatibility with localization.
\begin{fact}\lbl{fact:atimesExt}
	For $a\in R$ and any $R$-modules $M$ and $N$ the following coincide.
	\begin{alphanumerate}
		\item The multiplication $\cdot a$ on $\Ext_R^k(M,N)$ (this is an $R$-module after all).
		\item The endomorphism $\Ext_R^k(M,N)\morphism\Ext_R^k(M,N)$ induced by $M\morphism[\cdot a]M$ and functoriality of $\Ext_R^k(-,N)$.
		\item The endomorphism $\Ext_R^k(M,N)\morphism\Ext_R^k(M,N)$ induced by $N\morphism[\cdot a]N$ and functoriality of $\Ext_R^k(M,-)$.
	\end{alphanumerate}
\end{fact}
\begin{proof}
	Let $N\monomorphism I^\bullet$ be a projective resolution. We obtain a commutative diagram
	\begin{diagram*}
		\node[ob] (A) at (0,1.5) {$0$};
		\node[ob] (B) at (1.5,1.5) {$N$};
		\node[ob] (C) at (3,1.5) {$I^0$};
		\node[ob] (D) at (4.5,1.5) {$I^1$};
		\node[ob] (E) at (6,1.5) {$\ldots$};
		\node[ob] (A') at (0,0) {$0$};
		\node[ob] (B') at (1.5,0) {$N$};
		\node[ob] (C') at (3,0) {$I^0$};
		\node[ob] (D') at (4.5,0) {$I^1$};
		\node[ob] (E') at (6,0) {$\ldots$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C);
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C');
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (B) -- (B') node[pos=0.5,left] {$\cdot a$};
		\draw[->] (C) -- (C') node[pos=0.5, left] {$\cdot a$};
		\draw[->] (D) -- (D') node[pos=0.5, left] {$\cdot a$};
	\end{diagram*}
	from which $\Ext_R^\bullet(-,N\morphism[\cdot a]N)$ can be computed, showing that \itememph{c} coincides with \itememph{a}. For \itememph{b}, we do the same but with projective resolutions.
\end{proof}
\begin{fact}
	If multiplication by $a$ annullates one of the modules $M$ or $N$, then it annullates $\Ext_R^\bullet(M,N)$.
\end{fact}
\begin{proof}
	Follows from Fact~\reff{fact:atimesExt}.
\end{proof}
\begin{fact}\lbl{fact:freeResolution}
	If $R$ is a Noetherian ring, then any finitely generated $R$-module $M$ has a projective resolution
	\begin{align*}
		0\lmorphism M\lmorphism P_0\lmorphism P_1\lmorphism P_2\lmorphism\ldots
	\end{align*}
	where the $P_i$ are finitely generated free $R$-modules.
\end{fact}
\begin{proof}
	We construct the $P_i$ inductively. Since $M$ is finitely generated, we have a surjective morphism $P_0=R^n\epimorphism M$ for some $n$. $R$ being Noetherian, its kernel is finitely generated and we can apply the same construction to it.
\end{proof}
\begin{rem*}
	\begin{alphanumerate}
		\item The interesting thing here is that the $P_i$ are finitely generated. If we drop this, any module over any ring has a free resolution.
		\item If $R$ is \emph{coherent} (any finitely generated ideal is finitely presented) and $M$ is finitely presented, Fact~\reff{fact:freeResolution} still holds. Recall that
	\end{alphanumerate}
\end{rem*}
\begin{defi}
	An $R$-module $M$ is \defemph{finitely presented} if it may be written as a cokernel of some morphism $R^m\morphism R^n$.
\end{defi}
\begin{fact}\lbl{fact:ExtFinGen}
	If $M$ and $N$ are finitely generated modules over the Noetherian ring $R$, the $R$-modules $\Ext_R^k(M,N)$ are all finitely generated.
\end{fact}
\begin{proof}
	Choose a free resolution $0\lmorphism M\lmorphism R^{n_0}\morphism R^{n_1}\lmorphism\ldots$ as in Fact~\reff{fact:freeResolution}, then $\Ext_R^k(M,N)$ can be calculated as $H^k\left(N^{n_0}\morphism N^{n_1}\morphism\ldots\right)$, which is finitely generated as the $N^{n_i}$ are finitely generated and we are all Noetherian and stuff.
\end{proof}
We will now examine when $\Ext_R^\bullet$ commutes with localization.

Let $\Aa\doublelrmorphism[L][R]\Bb$ be an adjoint pair between abelian categories $\Aa,\Bb$. Then it's easy to see that $L$ preserves projective objects when $R$ is exact and $R$ preserves injectives when $L$ is exact. This may be applied to $\Aa=A\cat{-Mod}$ and $\Bb=A_S\cat{-Mod}$ where $A$ is some ring, $S\subseteq A$ a multiplicative subset, $A_S$ the localization of $A$ at $S$ and where $L$ is the functor $M\mapsto M_S$ for $M$ an $A$-module and $R$ is the forgetful functor. Note that both $L$ and $R$ are exact and we obtain
\begin{fact}\lbl{fact:InjProjLoc}
	Let $R$ be any ring. If $M$ is a projective $R$-module, then $M_S$ is a projective $R_S$-module. If $N$ is an injective $R_S$-module, then it is injective as an $R$-module as well.
\end{fact}
\begin{fact}
	For any ring $R$ and any multiplicative subset $S\subseteq R$, we have a canonical isomorphism
	\begin{align}\lbl{eq:ExtRStoExtR}
		\Ext_{R_S}^\bullet(M_S,N)\isomorphism\Ext_R(M,N)
	\end{align}
	where $M$ is an $R$- and $N$ an $R_S$-module. It is uniquely determined by its compatibility with the long exact cohomology sequence and by the condition that in degree $0$ it coincides with the bijection $\Hom_{R_S}(M_S,N)\simeq \Hom_R(M,N)$.
\end{fact}
\begin{proof}
	When $M$ is fixed, $\Ext_R^\bullet(M,-)$ is a cohomological functor on the category $R_S\cat{-Mod}$. By the universal property of derived functors (in Definition~\reff{def:homologicalfunctor}), the bijection $\Hom_{R_S}(M_S,N)\simeq \Hom_R(M,N)$ uniquely extends to the morphism \eqreff{eq:ExtRStoExtR}. By Fact~\reff{fact:InjProjLoc}, $\Ext_R^\bullet(M,-)$ annullates injective $R_S$-modules in positive degrees, hence by Theorem~\reff{thm:DerivedFunctors}\itememph{b} it is a right-derived functor of $\Hom_{R_S}(M_S,-)$. Then \eqreff{eq:ExtRStoExtR} is an isomorphism by the universal property of right-derived functors.
\end{proof}
When $M$ and $N$ are $R$-modules, we have a canonical morphism
\begin{align*}
	\Hom_R(M,N)\morphism\Hom_{R_S}(M_S,N_S)
\end{align*}
sending $M\morphism[f]N$ to $M_S\morphism[f_S]N_S$. This is a morphism of $R$-modules in which the right-hand side is actually an $R_S$-module. By the universal property of localization this induces a unique morphism
\begin{align}\lbl{eq:HomRtoHomRS}
	\Hom_R(M,N)_S\morphism\Hom_{R_S}(M_S,N_S)\;.\tag{$*$}
\end{align}
In general, \eqreff{eq:HomRtoHomRS} fails to be injective or surjective. But when $M$ is finitely generted, it is injective, and when $M$ is finitely presented (e.g., when $M$ is finitely generated and $R$ Noetherian) it's an isomorphism. For instance, when $M\simeq\coker(R^m\morphism R^n)$, then $M_S\simeq \coker(R_S^m\morphism R_S^n)$ by exactness of localization and $\Hom_R(M,N)\simeq \ker(N^n\morphism N^m)$ (and similar for $\Hom_{R_S}(M_S,N_S)$) by the universal property of cokernels. We obtain
\begin{align*}
	\Hom_R(M,N)_S\simeq\ker(N^n\morphism N^m)_S\simeq \ker(N_S^n\morphism N_S^m)\simeq \Hom_{R_S}(M_S,N_S)
\end{align*}
which can be seen to coincide with \eqreff{eq:HomRtoHomRS}.

And now for the advertised compatibility with localization.
\begin{prop}\lbl{prop:ExtLocalization}
	Let $R$ be a Noetherian ring, $M$ a finitely generated $R$-module. Then for any $R$-module $N$ and any multiplicative subset $S\subseteq R$ there is a canonical isomorphism
	\begin{align}\lbl{eq:ExtCompatibleWithLoc}
		\Ext_R^\bullet(M,N)_S\isomorphism\Ext_{R_S}^\bullet (M_S,N_S)\;.
	\end{align}
	It is uniquely determined by its compatibility with the long exact $\Ext$ sequences for $N$ and by the condition that it is given by 
	\begin{align*}
		\Hom_R(M,N)_S\morphism[{\text{\eqreff{eq:HomRtoHomRS}}}]\Hom_{R_S}(M_S,N_S)
	\end{align*}
	in degree 0.
\end{prop}
\begin{proof}
	For every $R$-module $M$, the functor $\Ext_{R_S}^\bullet (M_S, (-)_S)$ composed with the forgetful functor $R_S\cat{-Mod}\morphism R\cat{-Mod}$ is a cohomological functor on $R\cat{-Mod}$, hence there is a unique morphism $\Ext_R^\bullet(M,-)\morphism\Ext_{R_S}^\bullet (M_S,(-)_S)$ extending $\Hom_R(M,N)\morphism\Hom_{R_S}(M_S,N_S)$, and by the universal property of localization this factors uniquely over $\Ext_R^\bullet(M,-)_S$. This shows the uniqueness part.
	
	For existence, choose a free resolution $0\lmorphism M\lmorphism R^{n_0}\morphism R^{n_1}\lmorphism\ldots$ as in Fact~\reff{fact:freeResolution}. By exactness of localization, $0\lmorphism M_S\lmorphism R_S^{n_0}\morphism R_S^{n_1}\lmorphism\ldots$ is a free resolution of $M_S$. Using these to compute $\Ext_R^\bullet(M,-)$ and $\Ext_{R_S}^\bullet(M_S,-)$ and the fact that localization commutes with cohomology (since it is exact), we obtain
	\begin{align*}
		\Ext_R^k(M,N)_S&=H^k\left(N^{n_0}\morphism N^{n_1}\morphism\ldots\right)_S\\
		&\simeq H^k\left(N_S^{n_0}\morphism N_S^{n_1}\morphism\ldots\right)\\
		&=\Ext_{R_S}^k(M_S,N_S)\;,
	\end{align*}
	as required.
\end{proof}
\paragraph{Projective and injective dimension.} Let $\Aa$ be an abelian category. To have $\Ext_\Aa^\bullet$ available, we need to assume that $\Aa$ has sufficiently many injective or projective objects or we use Yoneda-$\Ext_\Aa^\bullet$ from Remark~\reff{rem:YonedaExt}\itememph{b}.
\begin{defi}\lbl{def:idim/pdim}
	Let $X$ be an objects of $\Aa$. Its \defemph{injective/projective dimension} is defined as
	\begin{align*}
		\idim_\Aa(X)&=\sup\left\{p\in\IN\st \Ext_\Aa^p(T,X)\neq 0\text{ for some object }T\in\Ob(\Aa)\right\}\\
		\pdim_\Aa(X)&=\sup\left\{p\in\IN\st \Ext_\Aa^p(X,T)\neq 0\text{ for some object }T\in\Ob(\Aa)\right\}
	\end{align*}
	and we put $\sup\emptyset =-\infty$.
\end{defi}
\begin{fact}\lbl{fact:injDim}
	When $\Aa$ has sufficiently many injective objects and $X\neq 0$ we have
	\begin{align*}
		\idim_\Aa(X)&=\min\left\{\ell\in\IN\st X\text{ has an injective resolution of length }\ell\right\}\\
	&=	\min\left\{\ell\st\begin{array}{c}
	\text{for any injective resolution }X\morphism I^\bullet\text{ the truncation}\\
	X\morphism\tau_{\leq\ell}I^\bullet\text{ is an injective resolution of }X
	\end{array}
	\right\}
	\end{align*}
	The left-hand side is $-\infty$ for $X=0$ and $+\infty$ if no such $\ell$ exists. 
\end{fact}
For a cochain complex $C^\bullet$ in $\Aa$ we used the \emph{soft truncation} $\tau_{\leq k}C^\bullet$ given by 
\begin{align*}
	\tau_{\leq k}C^\ell=\begin{cases}
	C^\ell & \text{if }\ell<k\\
	Z^k=\ker(C^k\morphism C^{k+1})\simeq \Im(C^{k-1}\morphism C^k) & \text{if }\ell=k\\
	0 & \text{if }\ell>k
	\end{cases}\;,
\end{align*}
as opposed to the \emph{hard truncation} $\snake{\tau}_{\leq k}C^\bullet$,
\begin{align*}
\snake{\tau}_{\leq k}C^\ell=\begin{cases}
C^\ell & \text{if }\ell\leq k\\
B^{k+1}=\coker(C^{k-1}\morphism C^k)\simeq \Im(C^k\morphism C^{k+1}) & \text{if }\ell=k+1\\
0 & \text{if }\ell>k+1
\end{cases}\;.
\end{align*}
\begin{proof}[Proof of Fact~\reff{fact:injDim}]
	Let $\idim_\Aa^{(1)}$, $\idim_\Aa^{(2)}$, and $\idim_\Aa^{(3)}$,  denote the three notions of injective dimension in the order in which they appear. Then $\idim_\Aa^{(1)}(X)\leq \idim_\Aa^{(2)}(X)\leq \idim_\Aa^{(3)}(X)$ is trivial.
	
	Let's show $\idim_\Aa^{(3)}(X)\leq \idim_\Aa^{(1)}(X)$. Let $X\morphism I^\bullet$ be any injective resolution of $X$. Denote $Z^k=\ker\left(I^k\morphism I^{k+1}\right)$. Then $Z^0=X$ and the short exact sequence $0\morphism Z^k\morphism I^k\morphism Z^{k+1}\morphism 0$ gives
	\begin{align*}
		0=\Ext_\Aa^p(T,I^k)\morphism \Ext_\Aa^p(T,Z^{k+1})\morphism\Ext_\Aa^{p+1}(T,Z^k)\morphism\Ext_\Aa^{p+1}(T,I^k)=0
	\end{align*}
	for any test object $T\in\Ob(\Aa)$. Hence $\Ext_\Aa^p(T,Z^{k+1})\simeq \Ext_\Aa^{p+1}(T,Z^k)$. By induction, $\Ext_\Aa^p(T,Z^k)\simeq \Ext_\Aa^{p+k}(T,Z^0)=\Ext_\Aa^{p+k}(T,X)$. In particular, $\Ext_\Aa^1(T,Z^\ell)\simeq \Ext_\Aa^{\ell+1}(T,X)$. When $\Ext_\Aa^{\ell+1}(-,X)$ vanishes, this shows injectivity of $Z^\ell$ and thus $\idim_R^{(3)}(X)\leq \ell$.
\end{proof}
In particular, this proof shows that $\Ext_\Aa^{\ell+1}(-,X)=0$ implies $\Ext_\Aa^p(-,X)=0$ for all $p>\ell$. Dualizing the proof of Fact~\reff{fact:injDim}, we get the same for $\Ext_\Aa^p(X,-)$, as well as 
\begin{fact}\lbl{fact:projDim}
	When $\Aa$ has sufficiently many projective objects and $X\neq 0$ we have
	\begin{align*}
	\pdim_\Aa(X)&=\min\left\{\ell\in\IN\st X\text{ has a projective resolution of length }\ell\right\}\\
	&=	\min\left\{\ell\st\begin{array}{c}
	\text{for any projective resolution }P_\bullet\morphism X\text{ the truncation}\\
	\snake{\tau}_{\leq\ell}P_\bullet\morphism X\text{ is a projective resolution of }X
	\end{array}
	\right\}\;,
	\end{align*}
	where the right-hand side is replaced by $-\infty$ if $X=0$ and $+\infty$ when no such $\ell$ exists.
\end{fact}
Our truncation conventions for chain complexes $C_\bullet$ are
\begin{align*}
\tau_{\leq k}C_\ell=\begin{cases}
C_\ell & \text{if }\ell\leq k\\
\ker\left(C_k\morphism C_{k-1}\right) & \text{if }\ell=k+1\\
0 & \text{if }\ell>k+1
\end{cases}\quad\text{and}\quad
\snake{\tau}_{\leq k}C_\ell=\begin{cases}
C_\ell & \text{if }\ell< k\\
\coker\left(C_{k+1}\morphism C_k\right) & \text{if }\ell=k\\
0 & \text{if }\ell>k
\end{cases}
\end{align*}

Recall Proposition~\reff{prop:Ext1(R/I)}. By the above proof of equality of various $\idim$s, we have
\begin{align}\lbl{eq:idim}
	\begin{split}
		\idim_R(X)&=\sup\left\{p\in\IN\st\Ext_R^p(R/I,X)\neq 0\text{ for some ideal }I\subseteq I\right\}\\
		&=\sup\left\{p\in\IN\st\Ext_R^p(T,X)\text{ for some finitely generated }R\text{-module }T\right\}
	\end{split}\tag{$*$}
\end{align}
as it is sufficient to use such $T$ as test objects for injectivity in our proof of $\idim_R^{(3)}(X)\leq \idim_R^{(1)}(X)$, hence the proof remains valid when $\idim_R^{(3)}(X)$ is replaced by \eqreff{eq:idim}. Using Proposition~\reff{prop:ExtLocalization}, we obtain
\begin{cor}\lbl{cor:injDimLocal}
	For any module $M$ over a Noetherian ring,
	\begin{align*}
		\idim_R(M)=\sup_{\mm\in\mSpec R}\idim_{R_\mm}(M_\mm)=\sup_{\pp\in\Spec R}\idim_{R_\pp}M_\pp\;.
	\end{align*}
\end{cor}
\begin{proof}
	It's a well-known fact that an $R$-module $N$ vanishes iff $N_\mm=0$ for all $\mm\in\mSpec R$ iff $N_\pp=0$ for all $\pp\in\Spec R$. So $\Ext_R^p(R/I,M)$ (for $I\subseteq R$ an ideal) vanishes iff
	\begin{align*}
		0=\Ext_R^p(R/I,M)_\mm=\Ext_{R_\mm}^p((R/I)_\mm,M_\mm)=\Ext_{R_\mm}^p(R_\mm/I_\mm,M_\mm)
	\end{align*}
	for all $\mm\in\mSpec R$ by Proposition~\reff{prop:ExtLocalization}. Since every ideal $J\subseteq R_\mm$ is of the form $J=I_\mm$ for some ideal $I\subseteq R$, Proposition~\reff{prop:Ext1(R/I)} indeed implies $\idim_R(M)=\sup_\mm\idim_{R_\mm}(M_\mm)$. And $\idim_R(M)=\sup_\pp\idim_{R_\pp}(M_\pp)$ is just the same argument again. 
\end{proof}
\begin{cor}\lbl{cor:projDimLocal}
	For any finitely generated module $M$ over a Noetherian ring,
	\begin{align*}
	\pdim_R(M)=\sup_{\mm\in\mSpec R}\pdim_{R_\mm}(M_\mm)=\sup_{\pp\in\Spec R}\pdim_{R_\pp}M_\pp\;.
	\end{align*}
\end{cor}
\begin{proof}
	As in the proof of Corollary~\reff{cor:injDimLocal}, $\Ext_R^p(M,T)$ (for any test object $T$) vanishes iff
	\begin{align*}
		0=\Ext_R^p(M,T)_\mm=\Ext_{R_\mm}^p(M_\mm,T_\mm)
	\end{align*}
	for every $\mm\in\mSpec R$. Since every $R_\mm$-module has the form $T_\mm$ for some $R$-module $T$ (well, every $R_\mm$-module $N$ is an $R$-module as well, and $N_\mm=N$), $\pdim_R(M)=\sup_\mm\pdim_R(M_\mm)$. And $\pdim_R(M)=\sup_\pp\pdim_R(M_\pp)$ is completely analogous.
\end{proof}
If $R$ is a Dedekind domain, the $R_\mm$ are fields (when $R$ is a field) or discrete valuation rings (cf. \cite[Theorem~22]{alg2}), in particular, PIDs. Applying Proposition~\reff{prop:PIDExt2}, we obtain
\begin{cor}\lbl{cor:DedekindInjective}
	A module over a Dedekind domain $R$ is injective iff it is divisible. Any quotient of an injective module is therefore injective and $\idim_R(M)\leq 1$ for any $R$-module $M$. Hence also $\pdim_R(M)\leq 1$ and any submodule of a projective module is projective again, and any finitely generated torsion-free $R$-module is projective.
\end{cor}
\begin{proof}
	An $R$-module $M$ is injective iff $\idim_R(M)\leq 0$ (note that $0$ is also injective and $\idim_R(0)=-\infty$), so by Corollary~\reff{cor:injDimLocal}, $M$ is injective iff $M_\pp$ is injective for all $\pp\in \Spec R$. Note that $M_\pp$ is divisible iff $M_\pp\morphism[r\cdot]M_\pp$ is surjective for all $r\in R\setminus\{0\}$. Indeed, multiplication by $s^{-1}\in R_\pp$ for $s\in R\setminus \pp$ is automatically bijective, so it suffices to test divisibility on those $r\in R_\pp$ which are the image of some non-zero element of $R$.
	
	By a well-known lemma, a morphism $N\morphism[f]N'$ of $R$-modules is surjective iff every localization $N_\pp\morphism[f]N'_\pp$ is surjective (and this works for injectivity as well). Applying this to $N=N'=M$ and $f=r\cdot$ for $r\in R\setminus\{0\}$, we find that $M$ is divisible iff all its localizations $M_\pp$ are. Since the $R_\pp$ are PIDs, Corollary~\reff{cor:PIDInjDiv} proves our first assertion that $M$ is injective iff its divisible.
	
	Since quotients of divisible $R$-moduls are divisible again, the second assertion follows immediately. If $M\morphism I^\bullet$ is an injective resolution of $M$, then so is $0\morphism M\morphism I^0\morphism I^0/M\morphism 0$ already, hence $\idim_R(M)\leq 1$.
	
	In particular, $\Ext_R^2(-,-)=0$, hence $\pdim_R(M)\leq 1$ holds as well by Definition~\reff{def:idim/pdim}. If $P$ is projective and $Q\subseteq P$ a submodule, we get an exact sequence 
	\begin{align*}
		0=\Ext_R^1(P,T)\morphism\Ext_R^1(Q,T)\morphism\Ext_R^2(P/Q,T)=0
	\end{align*}
	for any test module $T$ as part of the long exact $\Ext$ sequence. Hence $\Ext_R^1(Q,-)=0$, proving that $Q$ is projective as well. Wenn $M$ is torsion-free and finitely generated, so are its localizations $M_\pp$. Since the $R_\pp$ are PIDs, the $M_\pp$ are projective (and even free), hence $\pdim_R(M)=\sup_\pp\pdim_{R_\pp}(M_\pp)\leq 1$ by Corollary~\reff{cor:projDimLocal} and $M$ is projective.
\end{proof}
\begin{rem*}
	The classification of finitely generated modules over a Dedekind domain is
	\begin{align*}
		M\simeq R^{r-1}\oplus I\oplus \bigoplus_{\mm\in\mSpec R}\bigoplus_{k=1}^\infty (R/\mm^kR)^{e_{\mm,k}}\;,
	\end{align*}
	in which only finitely many $e_{\mm,k}$ are non-zero and $I$ is an ideal whose ideal class is uniquely determined by $M$, as is $r$.
\end{rem*}
	
There is a similar result about completion. If $M$ is an $R$-module and $I$ any ideal of $R$, we define a topology (hence a uniform structure) on $M$ with the $I^kM$ as a neighbourhood base of $0\in M$. Completing it gives a module 
\begin{align*}
	\roof{M}=\limit[k\in\IN] M/I^kM\;. 
\end{align*}
When $R$ is Noetherian, $M$ a finitely generated $R$-module and $N\subseteq M$ a submodule, then $N\cap I^kM\supseteq I^{k-c}N$ for $k\geq c$ and a suitable $c$ by the Artin-Rees lemma (cf. \cite[Proposition~3.4.1]{alg2}). It follows that the $I$-adic topology on $N$ is induced from the $I$-adic topology on $M$ and the morphism $\roof{N}\morphism\roof{M}$ corresponding to $N\monomorphism M$ stays injective. Since $\roof{(-)}$ also commutes with forming quotients, $M\mapsto\roof{M}$ is an exact functor on \emph{finitely generated} $R$-modules (a complete proof may be found in \cite[Lemma~7.15]{eisenbudCommAlg}). 

When $M$ is finitely generated, $\Ext_R^\bullet(M,-)$ may be calculated using a resolution $F_\bullet \morphism M$ of $M$ by finitely generated free modules $F_i\simeq R^{n_i}$. Then the $\roof{F}_i$ stay free (of the same rank), so $\roof{F}_\bullet\morphism \roof{M}$ is still a free resolution, and moreover
\begin{align*}
	\Hom_R(F_i,N)\roof{\phantom{)}}\simeq \Hom_R(R^{n_i},N)\roof{\phantom{)}}\simeq (N^{n_i})\roof{\phantom{)}}\simeq \roof{N}^{n_i}\simeq \Hom_{\roof{R}}(\roof{F_i},\roof{N})
\end{align*}
Together with exactness of $\roof{(-)}$ on finitely generated $R$-modules, we obtain
\begin{prop}\lbl{prop:ExtCompletion}
	Let $R$ be a Noetherian ring, $I\subseteq R$ any ideal and $M$ and $N$ finitely generated $R$-modules. Let $p\geq 0$. Then
	\begin{align*}
		\Ext_R^p(M,N)\roof{\phantom{)}}\simeq \Ext_{\roof{R}}^p(\roof{M},\roof{N})
	\end{align*}
	holds for the $I$-adic completions.
\end{prop}
In particular, this implies $\Hom_R(M,N)\roof{\phantom{)}}\simeq\Hom_{\roof{R}}(\roof{M},\roof{N})$ for finitely generated modules $M,N$ over a Noetherian ring $R$.
\begin{cor}\lbl{cor:projDimCompletion}
	Let $R$ be Noetherian. For any finitely generated $R$-module $M$, 
	\begin{align*}		
		\pdim_R(M)\geq\pdim_{\roof{R}}(\roof{M})\;.
	\end{align*}
	When $R$ is local and $I\subseteq R$ a proper ideal, equality holds.
\end{cor}
\begin{rem*}
	Note that the additional assumptions are \emph{necessary}, though they were missing in the lecture. If $I=R$, the involved completions vanish and equality clearly fails. If $R$ is not required to be local, there are less (but not much) stupid counterexamples such as $R=\IZ$, $I=(2)$ and $M=\IZ/3\IZ$. Then $M=IM$ and the completion $\roof{M}$ vanishes, so the right-hand side become $-\infty$ whereas the left-hand side is $1$ (I guess).
\end{rem*}
To prove Corollary~\reff{cor:projDimCompletion}, we need a lemma which has been in the air for quite some time (and probably is well-known).
\begin{lem}\lbl{lem:projectiveDirectSummand}
	Let $R$ be any ring. An $R$-module $P$ is projective iff it is a direct summand of some free module $F$. When $P$ is finitely generated, we can choose $F$ finitely generated as well.
\end{lem}
\begin{proof}
	Suppose that $P$ is projective. Choose a surjective morphism $F\epimorphism[\pi]P$ where $F$ is a free module. If $P$ is finitely generated, we may choose $F$ finitely generated as well. Lifting $\id_P$ to a morphism $P\morphism[s]F$ by the lifting property from Definition~\reff{def:projectiveModule}\itememph{b} induces an isomorphism $\ker(\pi)\oplus P\isomorphism F$ via $(x,p)\mapsto (x,s(p))$.
	
	Now suppose $P\oplus Q=F$ for some free module $F$ and some $Q$. By Definition~\reff{def:projective}\itememph{b} it is sufficient to show that every short exact sequence $0\morphism N\morphism M\morphism P\morphism 0$ splits. Extending by $\id_Q$, we get a surjective map $M\oplus Q\epimorphism[\pi] P\oplus Q=F$. Since $F$ is clearly projective, $\pi$ admits a section $F\morphism[s]M\oplus Q$. Composing $P\monomorphism F\morphism[s]M\oplus Q\epimorphism M$ gives a section of $M\epimorphism P$, so the initial sequence $0\morphism N\morphism M\morphism P\morphism 0$ is indeed split exact.
\end{proof}
We use this to prove an analogue of \eqreff{eq:idim}.
\begin{cor}\lbl{cor:projExtFiniteStuff}
	Let $P$ be a finitely presented $R$-module (e.g., a finitely generated module over a Noetherian ring). Then $P$ is projective iff $\Ext_R^1(P,T)=0$ for all finitely generated $T$.
\end{cor}
\begin{proof}
	Suppose $\Ext_R^1(P,-)$ vanishes on finitely generated $R$-modules (the other direction is trivial). Let $0\morphism K\morphism F\morphism P\morphism 0$ be a short exact sequence in which $K$ and $F$ are finitely generated and $F$ is free. Then 
	\begin{align*}
		0\morphism\Hom_R(P,K)\morphism\Hom_R(P,F)\morphism\Hom_R(P,P)\morphism\Ext_R^1(P,K)=0
	\end{align*}
	is exact, so $\Hom_R(P,F)\morphism\Hom_R(P,P)$ is surjective. A preimage of $\id_P$ gives a split of $0\morphism K\morphism F\morphism P\morphism 0$, so $F\simeq K\oplus P$ and $P$ is projective by Lemma~\reff{lem:projectiveDirectSummand}.
\end{proof}
\begin{proof}[Proof of Corollary~\reff{cor:projDimCompletion}]
	Let $F_\bullet M$ be a resolution by finitely generated free $R$-modules. If $\Ext_R^p(-,M)=0$, then the truncation $\snake{\tau}_{\leq p-1}F_\bullet$ is a projective resolution. In particular, $B_{p-1}=\coker(F_p\morphism F_{p-1})$ is projective and by Lemma~\reff{lem:projectiveDirectSummand} we find an $R$-module $Q$ and $n\in\IN$ such that $B_{p-1}\oplus Q\simeq R^n$. Then $\roof{B}_{p-1}\oplus\roof{Q}=\roof{R}^n$ and $\roof{B}_{p-1}$ is a projective $\roof{R}$-module by Lemma~\reff{lem:projectiveDirectSummand} again (we used that completion commutes with finite direct sums -- both are special cases of limits and limits commute with limits by the dual of \cite[Lemma~A.1.4]{alggeo2}). Then $\snake{\tau}_{\leq p-1}\roof{F}_\bullet$ is a projective resolution of $\roof{M}$ of length $p-1$. By Fact~\reff{fact:projDim}, this shows $\pdim_R(M)\geq\pdim_{\roof{R}}(\roof{M})$.
	
	Now assume that $R$ is local and $\pdim_R(M)>p$. Then $\snake{\tau}_{\leq p}F_\bullet$ is no projective resolution of $M$ by Fact~\reff{fact:projDim}, and the reason for this must be that $B_p=\coker(F_{p+1}\morphism F_p)$ isn't projective. Then $\Ext_R^1(B_p,T)\neq 0$ for some $R$-module $T$, which we may choose finitely generated by Corollary~\reff{cor:projExtFiniteStuff}. We claim that then also $\Ext_R^1(B_p,T)\roof{\phantom{)}}\neq 0$. Indeed, $N=\Ext_R^1(B_p,T)$ is finitely generated by Fact~\reff{fact:ExtFinGen}. Let $\nu\in N\setminus IN$ (which exists by the Nakayama lemma and $N\neq 0$). Then the sequence of images of $\nu$ in $N/I^kN$ gives a non-zero element of $\roof{N}=\limit N/I^kN$. By Corollary~\reff{prop:ExtCompletion}, $\Ext_{\roof{R}}^1(\roof{B}_p,\roof{T})\neq 0$ and thus $\roof{B}_p$ is not projective. So $\snake{\tau}_{\leq p}\roof{F}_\bullet$ is no projective resolution of $\roof{M}$, proving $\pdim_{\roof{R}}(\roof{M})>p$ by Fact~\reff{fact:projDim}.
\end{proof}
\section{Torsion products and flat modules}
\begin{defi}
	Let $\Tor_p^R(-,N)$ be the $p\ordinalth$ left-derived functor of $-\otimes_R N$ as a functor from the category of $R$-modules to itself.
\end{defi}
\begin{rem*}
	\begin{alphanumerate}
		\item Recall that $M\otimes_RN$ has the universal property
		\begin{align*}
			\Hom_R(M\otimes_RN,T)\simeq \operatorname{Bil}_R(M,N;T)
		\end{align*}
		where $\operatorname{Bil}_R(M,N;T)$ denotes the $R$-module of $R$-bilinear maps $M\otimes N\morphism T$.
		\item By definition, for any short exact sequence $\Mm\colon 0\morphism M'\morphism M\morphism M''\morphism 0$ we have a long exact $\Tor$ sequence 
		\begin{multline*}
			\ldots\morphism\Tor_{p+1}^R(M'',N)\morphism[\partial]\Tor_p^R(M',N)\morphism\Tor_p^R(M,N)\\
			\morphism\Tor_p^R(M'',N)\morphism[\partial]\Tor_{p-1}^R(M',N)\morphism\ldots\;.
		\end{multline*}
		We will write $\partial_{\Mm,N}$ instead of $\partial$ to avoid confusion if necessary.
		
		If $\Nn\colon 0\morphism N'\morphism N\morphism N''\morphism 0$ is another short exact sequence of $R$-modules, then
		\begin{align}\lbl{eq:TorFuncSeq}
			0\morphism -\otimes_R N'\morphism -\otimes _RN\morphism -\otimes_RN''\morphism 0\tag{$*$}
		\end{align}
		is a sequence of functors from $R\cat{-Mod}$ to itself which is exact on free objects $F$. If $P$ is a projective $R$-module, there is a free $R$-module and a surjective morphism $F\epimorphism[\pi]P$. As $P$ is projective, $\pi$ has a section, making $P$ into a direct summand of $F$. Then the sequence \eqreff{eq:TorFuncSeq} for $P$ is a direct summand of \eqreff{eq:TorFuncSeq} for $F$ and thus exact as well. That is, \eqreff{eq:TorFuncSeq} is exact on projective objects, so Theorem~\reff{thm:LeftDerivedFunctors}\itememph{c} gives another connecting morphism $\partial=\partial_{M,\Nn}\colon \Tor_{p+1}^R(M,N'')\morphism\Tor_p^R(M,N')$ such that
		\begin{multline*}
			\ldots\morphism\Tor_{p+1}^R(M,N'')\morphism[\partial]\Tor_p^R(M,N')\morphism\Tor_p^R(M,N)\\
			\morphism\Tor_p^R(M,N'')\morphism[\partial]\Tor_{p-1}^R(M,N')\morphism\ldots
		\end{multline*}
		is another long exact sequence.
	\end{alphanumerate}
\end{rem*}

\appendix
\chapter{Appendix -- category theory corner}
\setcounter{thm}{0}
\renewcommand*{\thethm}{\Alph{thm}}

\section{Derived functors and \texorpdfstring{$\Ext_R^\bullet $}{Ext}}
\begin{defi}\lbl{def:homologicalfunctor}
	Let $\Aa$ and $\Bb$ be abelian categories (cf. \cite[Definition~A.1.4]{alggeo2}). A \defemph{homological $\partial$-functor} $F_\bullet \colon\Aa\morphism\Bb$ is a sequence $(F_n)_{n\geq 0}$  of additive functors $\Aa\morphism[F_i]\Bb$ together with a natural transformation $\partial=\partial_F\colon F_{i+1}(A'')\morphism F_i(A')$ on the category of short exact sequences on $\Aa$, such that the sequence
	\begin{multline*}
		\ldots\morphism F_{i+1}(A'')\morphism[\partial]F_i(A')\morphism F_i(A)\morphism F_i(A'')\morphism[\partial]\ldots\\
		\ldots\morphism F_{1}(A'')\morphism[\partial]F_0(A')\morphism F_0(A)\morphism F_0(A'')\morphism 0\;.
	\end{multline*}
	is exact whenever $0\morphism A'\morphism A\morphism A''\morphism 0$ is a short exact sequence in $\Aa$.
	
	A \defemph{morphism} $F_\bullet \morphism[\phi]G_\bullet $ of homological $\partial$-functors is a sequence $(\phi_n)_{n\geq0}$ of natural transformations $F_i\morphism[\phi_i]G_i$ such that for any short exact sequence $0\morphism A'\morphism A\morphism A''\morphism 0$ in $\Aa$ the diagram 
	\begin{diagram*}
		\node[ob] (F1A) at (0,1.5) {$F_{i+1}(A'')$};
		\node[ob] (G1A) at (0,0) {$G_{i+1}(A'')$};
		\node[ob] (FA) at (2.5,1.5) {$F_i(A')$};
		\node[ob] (GA) at (2.5,0) {$G_i(A')$};
		\scriptsize
		\draw[->] (F1A) -- (G1A) node[pos=0.5, left] {$\phi_{i+1}$};
		\draw[->] (FA) -- (GA) node[pos=0.5, right] {$\phi_{i}$};
		\draw[->] (F1A) -- (FA) node[pos=0.5, above] {$\partial_F$};
		\draw[->] (G1A) -- (GA) node[pos=0.5, above] {$\partial_G$};
	\end{diagram*}
	commutes.
	
	Similarly, a \defemph{cohomological $\partial$-functor} $F^\bullet \colon\Aa\morphism\Bb$ is a sequence $(F^n)_{n\geq 0}$ of additive functors $\Aa\morphism[F^i]\Bb$ together with connecting morphism $\partial=\partial_F\colon F^i(A'')\morphism F^{i+1}(A')$ such that for a short exact sequence $0\morphism A'\morphism A\morphism A''\morphism 0$, the sequence 
	\begin{multline*}
		0\morphism F^0(A')\morphism F^0(A)\morphism F^0(A'')\morphism[\partial] F^1(A')\morphism\ldots\\
		\ldots\morphism[\partial]F^i(A')\morphism F^i(A)\morphism F^i(A'')\morphism[\partial]F^{i+1}(A')\morphism\ldots
	\end{multline*}
	 is required to be exact. And the notion of a \defemph{morphism} $F^\bullet \morphism[\phi]G^\bullet $ of cohomological $\partial$-functors is defined in the obvious way.
	
	Let $\Aa\morphism[F]\Bb$ be a \emph{right-exact} functor, i.e., for any short exact sequence $0\morphism A'\morphism A\morphism A''\morphism 0$, the sequence $FA'\morphism FA\morphism FA''\morphism 0$ is exact (but that's not quite it, cf. Definition~\reff{def:leftrightexact}). A \defemph{left-derived functor} of $F$ is a homological functor $L_\bullet F$ from $\Aa$ to $\Bb$ with a natural isomorphism $L_0F\simeq F$ such that for any homological functor $\Phi_\bullet \colon \Aa\morphism\Bb$, any natural transformation $\Phi_0\morphism L_0F$ extends in a unique way to a morphism $\Phi_\bullet \morphism L_\bullet F$ of homological functors.
	
	Similar, a functor $\Aa\morphism[F]\Bb$ is \emph{right-exact} functor if $0\morphism FA'\morphism FA\morphism FA''$ is exact for any short exact sequence $0\morphism A'\morphism A\morphism A''\morphism 0$ (and $F$ is \emph{additive}, cf. Definition~\reff{def:leftrightexact}). A \defemph{right-derived functor} of $F$ is a homological functor $R^\bullet F$ from $\Aa$ to $\Bb$ with a natural isomorphism $R^0F\simeq F$ such that for any homological functor $\Psi^\bullet \colon \Aa\morphism\Bb$, any natural transformation $R^0F\morphism \Psi^0$ extends in a unique way to a morphism $R^\bullet F\morphism \Psi^\bullet $ of homological functors.
\end{defi}
\begin{rem}
	\begin{alphanumerate}
		\item It follows (by the usual Yoneda argument) that derived functors are unique up to unique isomorphism of (co)homological functors if they exist.
		\item If $F$ is left-exact in the above sense, it preserves monomorphisms and it can be shown that $0\morphism FX'\morphism FX\morphism FX''$ is exact even when only $0\morphism X'\morphism X\morphism X''$ is exact (a nasty technical proof which won't appear here). Similar for right-exact functors.
		\item A generalized definition drops the exactness assumptions and requires $F\morphism L_0F$ with the universal property that any diagram
		\begin{diagram*}
			\node[ob] (F) at (0,1.25) {$F$};
			\node[ob] (L) at (2.5,1.25) {$L_0F$};
			\node[ob] (Phi) at (1.25,0) {$\Phi_0$};
			\draw[->] (F) -- (L);
			\draw[->] (F) -- (Phi);
			\draw[->] (Phi) -- (L);
		\end{diagram*}
		can be uniquely extended to a morphism $\Phi_\bullet \morphism L_\bullet F$ of homological functors. Similar for right-derived functors.
	\end{alphanumerate}
\end{rem}
\begin{example}
	If $F$ is an exact functor, then left- and right-derived functors of $F$ are given by $L_0F=R^0F=F$ and $L_iF=R^iF=0$ for $i\geq 1$.
\end{example}
\begin{defi}\lbl{def:injective}
	An object $I$ in an abelian category $\Aa$ is \defemph{injective} iff the following equivalent conditions hold.
	\begin{alphanumerate}
		\item When $X\monomorphism[\xi] Y$ is a monomorphism, then any morphism $X\morphism[\iota] I$ extends to a morphism $Y\morphism I$ (i.e., $I$ is injective in the sense of Definition~\reff{def:injectiveModule}\itememph{b}).
		\item Any short exact sequence $0\morphism I\morphism X\morphism X''\morphism 0$ splits.
	\end{alphanumerate}
	The category $\Aa$ has \defemph{sufficiently many injective objects} if every object $X$ has a monomorphism $X\monomorphism I$ with $I$ injective.
\end{defi}
\begin{proof}
	To see \itememph{a} $\Rightarrow$ \itememph{b}, extend $\id_I$ to $X\morphism[\pi]I$, then $\pi$ gives a split of the exact sequence (the argument used in the case of $R$-modules still works in arbitrary abelian categories).
	
	For \itememph{b} $\Rightarrow$ \itememph{a} consider $C=\coker\Big(X\xrightarrow{\iota\times\xi}I\oplus Y\Big)$ and let $I\oplus Y\morphism[p]C$ be the associated morphism. Let $i=\id_I\times 0$ and $j=0\times\id_Y$ be the canonical inclusions $I\morphism I\oplus Y$ and $Y\morphism I\oplus Y$. We claim that the composition 
	\begin{align*}
		I\morphism[i] I\oplus Y\morphism[p] C
	\end{align*}
	is a monomorphism. First note that $X\xrightarrow{\iota\times\xi}I\oplus Y$ is a monomorphism (since its composition with the projection to $Y$ equals $\xi$, which was supposed to be monic), hence it's the kernel of its own cokernel as we are working in an abelian category and thus every monomorphism is an \emph{effective monomorphism}, cf. \cite[Definition~A.1.3\itememph{d} and Definition~A.1.4]{alggeo2}. That is, $X=\ker(p)$. Suppose now that $T\morphism[\tau]I$ is a morphism satisfying $pi\tau=0$, then $i\tau$ factors over $X=\ker(p)$. We thus have a diagram
	\begin{diagram}[baseline=0.75cm-0.5ex][\lbl{diag:kernelStuff}]
		\node[ob] (t) at (0,1.5) {$T$};
		\node[ob] (x) at (0,0) {$X$};
		\node[ob] (i) at (2.5,1.5) {$I$};
		\node[ob] (iy) at (2.5,0) {$I\oplus Y$};
		\scriptsize
		\draw[->, dashed] (t) -- (x) node[pos=0.5, left] {$!\exists\ \vartheta$};
		\draw[->] (t) -- (i) node[pos=0.5, above] {$\tau$};
		\draw[->] (i)-- (iy) node[pos=0.5, right] {$i$};
		\draw[->] (x) -- (iy) node[pos=0.5, above] {$\iota\times\xi$};
		\tag{$*$}
	\end{diagram}
	Postcomposing with the canonical projection $I\oplus Y\epimorphism[\pi] Y$ we see that $\pi i\tau=0\circ\tau=0$, hence also
	$\xi\vartheta=0$ as \eqreff{diag:kernelStuff} commutes and $\pi\circ(\iota\times\xi)=\xi$. But $\xi$ is a monomorphism, hence $\vartheta=0$. By \eqreff{diag:kernelStuff}, this implies $\tau=0$ as $i$ is a monomorphism. This shows that $\alpha$ is indeed a monomorphism.
	
	We thus obtain a short exact sequence
	\begin{align*}
		0\morphism I\morphism C\morphism\coker(\alpha)\morphism 0
	\end{align*}
	which splits due to \itememph{b}, i.e., $C\simeq I\oplus \coker(\alpha)$. Let $C\epimorphism[q] I$ be the associated projection. Consider the composition
	\begin{align*}
		Y\morphism[j] I\oplus Y\morphism[p] C\epimorphism[q] I\;.
	\end{align*}
	We claim that $\upsilon=-qpj$ is a morphism $Y\morphism[\upsilon] I$ extending $X\morphism[\iota]I$. We have $qp\circ(\iota\times\xi)=q\circ0=0$ since $C$ is precisely the cokernel of $\iota\times\xi$. Also $qp\circ (\iota\times0)=\iota$ as $qpi=\id_I$ by construction of $q$. Then 
	\begin{align*}
		\upsilon\xi=-qpj\xi=-qp\circ(0\times\xi)=qp\circ\big((\iota\times 0)-(\iota\times\xi)\big)=\iota-0=\iota\;,
	\end{align*}
	hence $\upsilon$ has indeed the required property.
\end{proof}
\begin{thm}\lbl{thm:DerivedFunctors}
	Let $\Aa,\Bb$ be an abelian categories where $\Bb$ has sufficiently many injective objects.
	\begin{alphanumerate}
		\item Any left-exact functor $\Aa\morphism[F]\Bb$ has a right-derived functor $R^\bullet F$.
		\item Let $\Phi^\bullet \colon \Aa\morphism\Bb$ be a cohomological functor, then $\Phi^\bullet $ is a right-derived functor of $\Phi^0$ iff $\Phi^pI=0$ for any injective object $I\in\Ob(\Aa)$ and all $p>0$.
		\item Let $\Ff\colon 0\morphism F'\morphism F\morphism F''\morphism0$ be a sequence of left-exact functors $\Aa\morphism\Bb$ and functor morphisms between them such that $0\morphism F'I\morphism F I\morphism F'' I\morphism 0$ is exact when $I$ is an injective object of $\Aa$. Then there is a unique sequence of natural transformations $R^iF''\morphism[d_\Ff]R^{i+1}F'$ such that
		\begin{multline*}
			0\morphism F'X\morphism F X\morphism F''X\morphism[d_\Ff]R^1 F'X\morphism\ldots\\
			\ldots\morphism R^{i-1} F''X\morphism[d_\Ff]R^i F'X\morphism R^i F X\morphism R^i F''X\morphism[d_\Ff]R^{i+1} F'X\morphism\ldots
		\end{multline*}
		is exact for arbitrary $X\in\Ob(\Aa)$ and such that the diagram
		\begin{diagram*}
			\node[ob] (F1A) at (0,1.5) {$R^i F''(X'')$};
			\node[ob] (G1A) at (0,0) {$R^{i+1} F''(X')$};
			\node[ob] (FA) at (3,1.5) {$R^{i+1} F'(X'')$};
			\node[ob] (GA) at (3,0) {$R^{i+2} F'(X')$};
			\scriptsize
			\draw[->] (F1A) -- (G1A) node[pos=0.5, left] {$\partial_{R^\bullet  F''}$};
			\draw[->] (FA) -- (GA) node[pos=0.5, right] {$-\partial_{R^\bullet  F'}$};
			\draw[->] (F1A) -- (FA) node[pos=0.5, above] {$d_\Ff$};
			\draw[->] (G1A) -- (GA) node[pos=0.5, above] {$d_\Ff$};
		\end{diagram*}
		commutes when $0\morphism X'\morphism X\morphism X''\morphism 0$ is a short exact sequence in $\Aa$ (note the minus sign on the right vertical arrow!).
	\end{alphanumerate}
\end{thm}
\begin{proof}
	We start by proving the \emph{if} part of \itememph{b}. Assume that $\Phi^pI=0$ for any injective $I$ and all $p>0$. Let $\Phi^0\morphism[\alpha^0]\Psi^0$ be given. By induction on $n$, we construct $\Phi^k\morphism[\alpha^k]\Psi^k$ for $k\leq n$ such that $\alpha^k\partial_\Phi=\partial_\Psi\alpha^{k-1}$ for $k=1,\ldots n$. For $ n=0$, this is trivial. Let $ n>0$ and $\alpha^k$ be constructed for $k< n$. To construct $\alpha^ n$, we consider any object $X$ of $\Aa$ and choose a monomorphism $X\monomorphism[\iota]I$ where $I$ is injective. When $ n>1$, we have a part of the long exact cohomology sequence for $0\morphism X\morphism[\iota]I\morphism X'=\coker(\iota)\morphism 0$,
	\begin{align*}
		0=\Phi^{ n-1}I\morphism\Phi^{ n-1}X'\morphism[\partial_\Phi]\Phi^ n X\morphism\Phi^ n I=0\;,
	\end{align*}
	giving an isomorphism $\partial_\Phi=\partial_{X,\iota}\colon\Phi^{ n-1}X'\isomorphism\Phi^ n X$. When $ n=1$, we still have $\Phi^1I=0$ and thus an isomorphism $\partial_{X,\iota}\colon\coker\big(\Phi^0I\morphism\Phi^0X'\big)\isomorphism\Phi^1X$. 
	
	We have $\Psi^{ n-1}X'\morphism[\partial_\Psi]\Psi^ n X$ and put $\alpha_{X,\iota}^ n=\partial_\Psi\alpha_{X'}^{n-1}\partial_{X,\iota}^{-1}$ when $ n>1$. When $ n=1$, $\alpha^0$ induces a morphism
	\begin{align*}
		\coker\big(\Phi^0I\morphism\Phi^0X'\big)&\morphism[\ov{\alpha}^0]\coker\big(\Psi^0I\morphism\Psi^0X'\big)
	\end{align*}
	and we put $\alpha_{X,\iota}^1=\ov{\partial}_\Psi\ov{\alpha}^0\partial_{X,\iota}^{-1}$, where $\ov{\partial}_\Psi\colon \coker\big(\Psi^0I\morphism\Psi^0X'\big)\morphism\Psi^1X$ is obtained from $\Psi^0X'\morphism[\smash{\partial_\Psi}]\Psi^1X$ using the universal property of cokernels.
	
	We want to show that $\alpha_{X,\iota}^ n$ does not depend on $\iota$ and that $\alpha_X\coloneqq \alpha_{X,\iota}^n$ induces a natural transformation $\Phi^n\morphism[\alpha\smash{^n}]\Psi^n$. We can show both assertions at once by considering monomorphisms $X\monomorphism[\iota]I$ and $Y\monomorphism[\kappa]K$ into injective objects $I,K$ and any morphism $X\morphism[\xi]Y$ and showing $\Psi^n(\xi)\alpha_{X,\iota}^n=\alpha_{Y,\kappa}^n\Psi^n(\xi)$. When $X=Y$ and $\xi=\id_X$, this shows that $\alpha_{X,\iota}^n$ is independent of $\iota$ and the general case implies that $\alpha^n$ is a natural transformation. 
	
	Now let's do this! By injectivity of $K$ there exists some morphism $I\morphism[\hat{\xi}]K$ such that $\hat{\xi}\iota=\kappa\xi$. We have an induced morphism $\xi'\colon X'\morphism Y'$ on the cokernels $X'=\coker(\iota)$ and $Y'=\coker(\kappa)$. This gives a commutative diagram 
	\begin{diagram*}
		\node[ob] at (-0.75,1.5) {$\Xx\colon$};
		\node[ob] at (-0.75,0) {$\Yy\colon$};
		\node[ob] (A) at (0,1.5) {$0$};
		\node[ob] (B) at (1.5,1.5) {$X$};
		\node[ob] (C) at (3,1.5) {$I$};
		\node[ob] (D) at (4.5,1.5) {$X'$};
		\node[ob] (E) at (6,1.5) {$0$};
		\node[ob] (A') at (0,0) {$0$};
		\node[ob] (B') at (1.5,0) {$Y$};
		\node[ob] (C') at (3,0) {$K$};
		\node[ob] (D') at (4.5,0) {$Y'$};
		\node[ob] (E') at (6,0) {$0$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C) node[pos=0.5, above] {$\iota$};
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C') node[pos=0.5, above] {$\kappa$};
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (B) -- (B') node[pos=0.5,left] {$\xi$};
		\draw[->,dashed] (C) -- (C') node[pos=0.5, left] {$\smash{\hat{\xi}}\vphantom{\xi}$};
		\draw[->,dotted] (D) -- (D') node[pos=0.5, left] {$\xi'$};
	\end{diagram*}
	with exact rows $\Xx,\Yy$. Let $n>1$. Our goal $\Psi^n(\xi)\alpha_{X,\iota}^n=\alpha_{Y,\kappa}^n\Psi^n(\xi)$ is precisely that the right face in the following cute (or cube?) little diagram commutes.
	\begin{diagram*}
		\node[ob] (A) at (0,3) {$\Phi^{n-1}X'$};
		\node[ob] (B) at (4,3) {$\Phi^nX$};
		\node[ob] (E) at (0,0) {$\Psi^{n-1}X'$};
		\node[ob] (F) at (4,0) {$\Psi^nX$};
		\node[ob] (D) at (2,4.5) {$\Phi^{n-1}Y'$};
		\node[ob] (C) at (6,4.5) {$\Phi^nY$};
		\node[ob] (G) at (6,1.5) {$\Psi^nY'$};
		\node[ob] (H) at (2,1.5) {$\Psi^{n-1}Y'$};
		\scriptsize
		\draw[->] (E) -- (H) node[pos=0.6, below right] {$\Psi^{n-1}(\xi')$};
		\draw[->] (A) -- (D) node[pos=0.5, above left] {$\Phi^{n-1}(\xi')$};
		\draw[->] (D) -- (H) node[pos=0.7, left] {$\alpha_{Y'}^{n-1}$};
		\draw[->] (A) -- (E) node[pos=0.7, left] {$\alpha_{X'}^{n-1}$};
		\draw[->] (H) -- (G) node[pos=0.3, below] {$\partial_\Psi$};
		\draw[->] (E) -- (F) node[pos=0.5, below] {$\partial_\Psi$};
		\draw[->] (D) -- (C) node[pos=0.5, above] {$\partial_\Phi=\partial_{Y,\kappa}$};
		\draw[line width=1.5ex, white] (A) -- (B);
		\draw[->] (A) -- (B) node[pos=0.5, above, fill=white] {$\partial_\Phi=\partial_{X,\iota}$};
		\draw[->] (B) -- (C) node[pos=0.4, above left] {$\Phi^n(\xi)$};
		\draw[->] (F) -- (G) node[pos=0.5, below right] {$\Psi^n(\xi)$};		
		\draw[line width=1.5ex, white] (B) -- (F);
		\draw[->] (B) -- (F) node[pos=0.7, right, fill=white] {$\alpha_{X,\iota}^n$};
		\draw[->] (C) -- (G) node[pos=0.7, right] {$\alpha_{Y,\kappa}^n$};
	\end{diagram*}
	
	 Indeed, the front and back faces commute by definition of $\alpha_{X,\iota}^n$ and $\alpha_{Y,\kappa}^n$. The top and bottom face commute since the connecting homomorphisms $\partial_\Phi$ and $\partial_\Psi$ are natural, i.e., compatible with morphisms of short exact sequences by Definition~\reff{def:homologicalfunctor}. The left face commutes by the induction assumption. As $\partial_{X,\iota}$ and $\partial_{Y,\kappa}$ are isomorphisms, this implies commutativity of the right face, as required. For $n=1$, a slight modification of the argument works again.
	
	We have seen that $\alpha^n$ is a well-defined natural transformation. It remains to show $\alpha^n\partial_\Phi=\partial_\Psi\alpha^{n-1}$. Let $0\morphism X'\morphism X\morphism X''\morphism 0$ be a short exact sequence. We choose an embedding $X'\monomorphism[\iota]I$ into some injective object $\iota$. This gives a commutative diagram with exact rows
		\begin{diagram*}
			\node[ob] at (-0.75,1.5) {$\Xx\colon$};
			\node[ob] at (-0.75,0) {$\Yy\colon$};
			\node[ob] (A) at (0,1.5) {$0$};
			\node[ob] (B) at (1.5,1.5) {$X'$};
			\node[ob] (C) at (3,1.5) {$X$};
			\node[ob] (D) at (4.5,1.5) {$X''$};
			\node[ob] (E) at (6,1.5) {$0$};
			\node[ob] (A') at (0,0) {$0$};
			\node[ob] (B') at (1.5,0) {$X'$};
			\node[ob] (C') at (3,0) {$I$};
			\node[ob] (D') at (4.5,0) {$\coker(\iota)$};
			\node[ob] (E') at (6,0) {$0$};
			\scriptsize
			\draw[->] (A) -- (B);
			\draw[->] (B) -- (C);
			\draw[->] (C) -- (D);
			\draw[->] (D) -- (E);
			\draw[->] (A') -- (B');
			\draw[->] (B') -- (C') node[pos=0.5, above] {$\iota$};
			\draw[->] (C') -- (D');
			\draw[->] (D') -- (E');
			\draw[transform canvas={xshift=1pt}] (B) -- (B');
			\draw[transform canvas={xshift=-1pt}] (B) -- (B');
			\draw[->,dashed] (C) -- (C') node[pos=0.5, left] {$i$};
			\draw[->,dotted] (D) -- (D') node[pos=0.5, left] {$i''$};
		\end{diagram*}
		where $i$ exists by injectivity of $I$ and $i''$ is the induced morphism on cokernels. Now the claim $\alpha^n\partial_\Phi=\partial_\Psi\alpha^{n-1}$ follows by another cubic diagram chase. We have
		\begin{diagram*}
			\node[ob] (A) at (0,3) {$\Phi^{n-1}X''$};
			\node[ob] (B) at (4,3) {$\Phi^nX$};
			\node[ob] (E) at (0,0) {$\Psi^{n-1}X''$};
			\node[ob] (F) at (4,0) {$\Psi^nX$};
			\node[ob] (D) at (2,4.5) {$\Phi^{n-1}\big(\coker(\iota)\big)$};
			\node[ob] (C) at (6,4.5) {$\Phi^nX'$};
			\node[ob] (G) at (6,1.5) {$\Psi^nX'$};
			\node[ob] (H) at (2,1.5) {$\Psi^{n-1}\big(\coker(\iota)\big)$};
			\scriptsize
			\draw[->] (E) -- (H) node[pos=0.6, below right] {$\Psi^{n-1}(i'')$};
			\draw[->] (A) -- (D) node[pos=0.5, above left] {$\Phi^{n-1}(i'')$};
			\draw[->] (D) -- (H) node[pos=0.7, left] {$\alpha_{\coker(\iota)}^{n-1}$};
			\draw[->] (A) -- (E) node[pos=0.7, left] {$\alpha_{X''}^{n-1}$};
			\draw[->] (H) -- (G) node[pos=0.6, above] {$\partial_\Psi$};
			\draw[->] (E) -- (F) node[pos=0.5, below] {$\partial_\Psi$};
			\draw[->] (D) -- (C) node[pos=0.5, above] {$\partial_\Phi$};
			\draw[line width=1.5ex, white] (A) -- (B);
			\draw[->] (A) -- (B) node[pos=0.7, above, fill=white] {$\partial_\Phi$};
			\draw[transform canvas={xshift=-0.6pt, yshift=0.8pt}] (B) -- (C);
			\draw[transform canvas={xshift=0.6pt, yshift=-0.8pt}] (B) -- (C);
			\draw[transform canvas={xshift=-0.6pt, yshift=0.8pt}] (F) -- (G);
			\draw[transform canvas={xshift=0.6pt, yshift=-0.8pt}] (F) -- (G);
			\draw[line width=1.5ex, white] (B) -- (F);
			\draw[->] (B) -- (F) node[pos=0.7, right, fill=white] {$\alpha_{X'}^n$};
			\draw[->] (C) -- (G) node[pos=0.7, right] {$\alpha_{X'a}^n$};
		\end{diagram*}
		The top and bottom face commute by naturality of $\partial_\Phi$ and $\partial_\Psi$. The left face commutes because $\alpha^{n-1}$ is a natural transformation. The back face commutes by Definition of $\alpha_{X'}^n$ and on the right face nothing really happens. Hence the front face commutes as well. This shows the desired equality, thus completing the inductive construction of the $\alpha^n$ and showing the existence part of the universal property of a right-derived functor for $\Phi^0$.
		
		For uniqueness, let $\alpha\colon \Phi^\bullet \morphism\Psi^\bullet $ be any morphism of cohomological functors. Let $X$ be any object and $0\morphism X\morphism[\iota]I\morphism X''\morphism 0$ any short exact sequence with $I$ injective. As $\alpha$ is a morphism of cohomological functors, it is compatible with $\partial_\Phi$ and $\partial_\Psi$ for this short exact sequence. That is,
		\begin{align*}
		 \alpha_X^n\partial_\Phi=\partial_\Psi\alpha_{X'}^{n-1}\;.
		\end{align*}
		Again, for $n>1$ the connecting morphism $\partial_\Phi=\partial_{X,\iota}$ is an isomorphism by vanishing of $\Phi^{n-1}I$ and $\Phi^nI$, hence $\alpha_X^n=\partial_\Psi\alpha_{X'}^{n-1}\partial_{X,\iota}^{-1}$. For $n=1$, we need to make the same modification as above. In either case, this shows that the above construction of $\alpha^n$ from $\alpha^0$ is the only possible one. This shows the uniqueness part and thus the \emph{if} part of \itememph{b}.
		
		Before we can pursue the proof, we need some homological algebra, namely, the horseshoe lemma.
		
		\begin{defi}
			An \defemph{injective resolution} of an object $X$ of an abelian category $\Aa$ is a long exact sequence
			\begin{align*}
				0\morphism X\morphism[\xi]I^0\morphism[d^0]I^ 1\morphism[d^1]\ldots
			\end{align*}
			with $I^0,I^1,\ldots$ injective.
		\end{defi}
		\begin{fact}\lbl{fact:injectiveResolutions}
			In an abelian category $\Aa$ with sufficiently many injective objects, injective resolutions exist for any object.
		\end{fact}
		\begin{proof}
			Indeed, for $X\in\Ob(\Aa)$ choose a monomorphism $X\monomorphism[\xi]I^0$, then a monomorphism $\coker(\xi)\monomorphism I^1$, then a monomorphism $\coker\big(I^0\morphism I^1\big)\monomorphism I^2$ and so on.
		\end{proof}
		\begin{prop}[Horseshoe lemma]\lbl{prop:Hufeisenlemma}
			Let $X\morphism[\xi]I^\bullet $ and $Y\morphism[\upsilon]J^\bullet $ be injective resolutions of $X$ and $Y$. 
			\begin{alphanumerate}
				\item If $X\morphism[f]Y$ is any morphism, then there is a morphism $I^\bullet \morphism[\phi]J^\bullet $ compatible with $f$ in the sense that $\upsilon f=\phi^0\xi$. 
				\item The extension from \itememph{a} is unique up to cochain homotopy. If $\psi$ is a different morphism of cochain complexes with the same property then there is a cochain homotopy $s$, where $s^n\colon I^n\morphism J^{n-1}$, between $\phi $ and $\psi $. That is,
				\begin{align*}
					d_{J }^{n-1}s^n+s^{n+1}d_{I }^{n}=\psi^n-\phi^n
				\end{align*}
				and $s^0=0$.
				\item If $0\morphism X\morphism[\alpha] Z\morphism[\beta] Y\morphism 0$ is a short exact sequence, there exists an injective resolution $Z\morphism[\zeta]K^\bullet $ of $Z$ such that 
				\begin{diagram}[baseline=-2.25cm-0.5ex]{\lbl{diag:resolution}}
					\node[ob] (0lO) at (-4,0) {$0$};
					\node[ob] (X) at (-2,0) {$X$};
					\node[ob] (Z) at (0,0) {$Z$};
					\node[ob] (Y) at (2,0) {$Y$};
					\node[ob] (0rO) at (4,0) {$0$};
					\node[ob] (0l0) at (-4,-1.5) {$0$};
					\node[ob] (I0) at (-2,-1.5) {$I^0$};
					\node[ob] (K0) at (0,-1.5) {$K^0$};
					\node[ob] (J0) at (2,-1.5) {$J^0$};
					\node[ob] (0r0) at (4,-1.5) {$0$};
					\node[ob] (0l1) at (-4,-3) {$0$};
					\node[ob] (I1) at (-2,-3) {$I^1$};
					\node[ob] (K1) at (0,-3) {$K^1$};
					\node[ob] (J1) at (2,-3) {$J^1$};
					\node[ob] (0r1) at (4,-3) {$0$};
					\node[ob] (Idots) at (-2,-4.5) {$\vdots$};
					\node[ob] (Kdots) at (0,-4.5) {$\vdots$};
					\node[ob] (Jdots) at (2,-4.5) {$\vdots$};
					\scriptsize
					\draw[->] (0lO) -- (X);
					\draw[->] (X) -- (Z) node[pos=0.5, above] {$\alpha$};
					\draw[->] (Z) -- (Y) node[pos=0.5, above] {$\beta$};
					\draw[->] (Y) -- (0rO);
					\draw[->] (0l0) -- (I0);
					\draw[->] (I0) -- (K0);
					\draw[->] (K0) -- (J0);
					\draw[->] (J0) -- (0r0);
					\draw[->] (0l1) -- (I1);
					\draw[->] (I1) -- (K1);
					\draw[->] (K1) -- (J1);
					\draw[->] (J1) -- (0r1);
					\draw[->] (X) -- (I0) node[pos=0.5, left] {$\xi$};
					\draw[->] (I0) -- (I1);
					\draw[->] (I1) -- (Idots);
					\draw[->] (Z) -- (K0) node[pos=0.5, left] {$\zeta$};
					\draw[->] (K0) -- (K1);
					\draw[->] (K1) -- (Kdots);
					\draw[->] (Y) -- (J0) node[pos=0.5, left] {$\upsilon$};
					\draw[->] (J0) -- (J1);
					\draw[->] (J1) -- (Jdots);
					\tag{\S}
				\end{diagram}
				is a commutative diagram whose rows are short exact sequences which are split safe for the first one.
			\end{alphanumerate}
		\end{prop}
		\begin{rem}
			\begin{alphanumerate}
				\item \lbl{rem:Hufeisen}Let $Z^n(I^\bullet )=\ker(d_{I }^n)$ and $Z^n(J^\bullet )=\ker(d_{J }^n)$. Then $\phi$ and $\psi$ induce morphisms $\phi,\psi\colon Z^n(I^\bullet )\morphism Z^n(J^\bullet )$ and Proposition~\reff{prop:Hufeisenlemma}\itememph{b} shows that $\psi-\phi=d_{J }^{n-1}s^n$ on $Z^n(I^\bullet )$, that is, they differ by a coboundary and thus induce the same morphisms in cohomology.
				\item The assumption that $\Aa$ has sufficiently many injective objects is not required. As the proof will show, it also suffices to have $0\morphism Y\morphism[\upsilon]J^\bullet $ a cochain complex with injective $J^n$ (thus dropping exactness) and 
				\begin{align*}
					0\morphism X\morphism[\xi]I^0\morphism[d_I^0]I^1\morphism[d_I^1]\ldots 
				\end{align*}
				a long exact sequence in which the $I^n$ may fail to be injective. 
			\end{alphanumerate}
		\end{rem}
		Before we prove Proposition~\reff{prop:Hufeisenlemma}, let's see how the rest of Theorem~\reff{thm:DerivedFunctors} follows from it. We first prove \itememph{a}. Let $\Aa\morphism[F]\Bb$ be left exact. For every object $X$ of $\Aa$, chose an injective resolution $X\morphism I_X^\bullet $ of $X$ (and we need the axiom of choice -- for \emph{classes!} -- to do this). For every morphism $X\morphism[f]Y$ choose an extension $I_X^\bullet \morphism[f^* ]I_Y^\bullet $ of $f$. Let
		\begin{align*}
			R^pF(X)=H^p(FI_X^\bullet )\quad\text{and}\quad R^pF(f)=H^p\Big(FI_X^\bullet \morphism[f^* ]FI_Y^\bullet \Big)\;.
		\end{align*}
		We need to show that the $R^pF$ are functors. That $R^pF(\id_X)=\id_{R^pF(X)}$ (even when $\id_X^* \neq \id_{I_X^\bullet }$) follows from Proposition~\reff{prop:Hufeisenlemma}\itememph{b} and Remark~\reff{rem:Hufeisen}\itememph{a}. When $X\morphism[f]Y\morphism[g]Z$, the morphisms 
		\begin{align*}
			I_X^\bullet \xdoublemorphism[g^* f^* ][(gf)^* ]I_Z^\bullet 
		\end{align*}
		are cochain homotopic by Proposition~\reff{prop:Hufeisenlemma}\itememph{b}. Applying the additive functor $F$ ($F$ is left-exact, hence additive by Definition~\reff{def:leftrightexact} and Remark~\reff{rem:left-exactAdditive}) gives cochain homotopic morphisms $F(g^* f^* )$ and $F(g^* )F(f^*)$, showing that the induced morphisms in cohomology coincide, i.e., $R^pF(gf)=R^pF(g)\circ R^pF(f)$. Thus, $R^pF$ is indeed a functor.
		
		To construct the long exact cohomology sequence for $R^pF$, consider a short exact sequence $0\morphism X\morphism[\alpha]Y\morphism[\beta]Z\morphism 0$ and construct a short exact sequence $0\morphism I_X^\bullet \morphism[a ] K^\bullet \morphism[b ] I_Y^\bullet \morphism 0$ as in Proposition~\reff{prop:Hufeisenlemma}\itememph{c}. We obtain a short exact sequence $0\morphism FI_X^\bullet \morphism FK^\bullet \morphism FI_Y^\bullet \morphism 0$ (using Proposition~\reff{prop:injectiveSeqsStayExact}) and a long exact sequence 
		\begin{diagram}[baseline=0.75cm-0.5ex]{\lbl{diag:derivedCohoSeq}}
			\node[ob] (HpFK) at (0,1.5) {$H^p(FK^\bullet )$};
			\node[ob] (RpFX) [left=0.575 of HpFK] {$R^pF(X)$};			
			\node[ob] (RpFY) [right=0.575 of HpFK] {$R^pF(X)$};
			\node[ob] (Rp1FY) [left=0.575 of RpFX] {$R^{p-1}F(Y)$};
			\node[ob] (Rp1FX) [right=0.575 of RpFY] {$R^{p+1}F(X)$};
			\node[ob] (ldots) [left=0.575 of Rp1FY] {$\ldots$};
			\node[ob] (rdots) [right=0.575 of Rp1FX] {$\ldots$};
			\node[ob] (RpFZ) at (0,0) {$R^pF(Z)$};
			\scriptsize
			\draw[->] (ldots) -- (Rp1FY);
			\draw[->] (Rp1FY) -- (RpFX) node[pos=0.5, above] {$\partial$};
			\draw[->] (RpFX) -- (HpFK);
			\draw[->] (HpFK) -- (RpFY);
			\draw[->] (RpFY) -- (Rp1FX) node[pos=0.5, above] {$\partial$};
			\draw[->] (Rp1FX) -- (rdots);
			\draw[->] (HpFK) -- (RpFZ) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
			\draw[->, dashed] (RpFX) -- (RpFZ);
			\draw[->, dashed] (RpFZ) -- (RpFY);
			\tag{\#}
		\end{diagram}
		The vertical arrow is obtained by choosing morphisms $K^\bullet \morphism[\kappa_1 ]I_Z^\bullet $ and $I_Z^\bullet \morphism[\kappa_2 ]K^\bullet $ of cochain complexes (by Proposition~\reff{prop:Hufeisenlemma}\itememph{b}). Applying $F$ gives $FK^\bullet \xrightarrow{F\kappa_1 }FI_Z^\bullet $ and $FI_Z^\bullet \xrightarrow{F\kappa_2 }FK^\bullet $ such that $F(\kappa_1 )F(\kappa_2 )$ and $F(\kappa_2 )F(\kappa_1 )$ are cochain homotopic to $\id_{FI_Z^\bullet }$ and $\id_{FK^\bullet }$ respectively. It follows that $F(\kappa_1 )$ and $F(\kappa_2 )$ induce isomorphisms on cohomology which are inverse to each other, resulting in the vertical arrow of \eqreff{diag:derivedCohoSeq}.
		
		Also, to verify commutativity of \eqreff{diag:derivedCohoSeq}, one notes that $\alpha $ and $\kappa_1a $, and hence $F(\alpha )$ and $F(\kappa_1a )$, are cochain homotopic by Proposition~\reff{prop:Hufeisenlemma}\itememph{a}. Same for $\beta $ and $b \kappa_2$.
		
		This shows that $R^pF$ has the required long exact cohomology sequence. In a similar fashion one can show its functoriality on the category of short exact sequences in $\Aa$.
		
		If $X$ is injective, one can choose $I^\bullet \colon X\morphism 0\morphism 0\morphism\ldots$ and $X\morphism[\id_X]I^\bullet $ as injective resolution. Applying Proposition~\reff{prop:Hufeisenlemma}\itememph{b}, we get 
		\begin{align*}
			R^pF(X)=H^p(FI_X^\bullet )=H^p(FI^\bullet )=0\quad\text{when }p>0
		\end{align*}
		and, for arbitrary $X\in\Ob(\Aa)$ (injective or not), a canonical isomorphism
		\begin{align*}
			R^0F(X)=\ker(FI_X^0\morphism FI_X^1)\simeq F\big(\ker(I_X^0\morphism I_X^1)\big)\simeq F(X)\;.
		\end{align*}
		(using that $F$ is left-exact, hence commutes with kernels). By the \emph{if} part of \itememph{b} that was already proved, $R^\bullet F$ is a right-derived functor of $F$.
		
		The \emph{only if} part of \itememph{b} is an immediate consequence. Let $\Phi^\bullet $ be the right-derived functor of $F=\Phi^0$, then $\Phi^\bullet \simeq R^\bullet F$ by the universal property of derived functors. By the above, $\Phi^pI=R^pF(I)=0$ when $I$ is injective.
		
		Part \itememph{c}. Let $0\morphism F'\morphism F\morphism F''\morphism 0$ be a sequence of left-exact functors which is exact on injective objects. Choosing $I_X^\bullet $ as in the above construction, we get a short exact sequence
		\begin{align}\lbl{eq:shortExactFunctorSequence}
			0\morphism F'I_X^\bullet \morphism FI_X^\bullet \morphism F''I_X^\bullet \morphism 0\tag{$*$}
		\end{align}
		and this gives a long exact cohomology sequence which is functorial in $X$ as \eqreff{eq:shortExactFunctorSequence} is. The anti-commutativity of connecting morphisms (with $0\morphism X\morphism Z\morphism Y\morphism 0$ a short exact sequence) comes from the analogous (and well-known) assertion for the connecting morphisms in the diagram 
		\begin{diagram*}
			\node[ob] (0Xo) at (-2, 3) {$0$};
			\node[ob] (0Zo) at (0, 3) {$0$};
			\node[ob] (0Yo) at (2, 3) {$0$};
			\node[ob] (0Xu) at (-2, -3) {$0$};
			\node[ob] (0Zu) at (0, -3) {$0$};
			\node[ob] (0Yu) at (2, -3) {$0$};
			\node[ob] (0'l) at (-4, 1.5) {$0$};
			\node[ob] (0l) at (-4, 0) {$0$};
			\node[ob] (0''l) at (-4, -1.5) {$0$};
			\node[ob] (0'r) at (4, 1.5) {$0$};
			\node[ob] (0r) at (4, 0) {$0$};
			\node[ob] (0''r) at (4, -1.5) {$0$};
			\node[ob] (F'X) at (-2, 1.5) {$F'I_X^\bullet $};
			\node[ob] (FX) at (-2, 0) {$FI_X^\bullet $};
			\node[ob] (F''X) at (-2, -1.5) {$F''I_X^\bullet $};
			\node[ob] (F'Z) at (0, 1.5) {$F'K^\bullet $};
			\node[ob] (FZ) at (0, 0) {$FK^\bullet $};
			\node[ob] (F''Z) at (0, -1.5) {$F''K^\bullet $};
			\node[ob] (F'Y) at (2, 1.5) {$F'I_Y^\bullet $};
			\node[ob] (FY) at (2, 0) {$FI_Y^\bullet $};
			\node[ob] (F''Y) at (2, -1.5) {$F''I_Y^\bullet $};
			\draw[->] (0Xo) -- (F'X);
			\draw[->] (F'X) -- (FX);
			\draw[->] (FX) -- (F''X);
			\draw[->] (F''X) -- (0Xu);
			\draw[->] (0Zo) -- (F'Z);
			\draw[->] (F'Z) -- (FZ);
			\draw[->] (FZ) -- (F''Z);
			\draw[->] (F''Z) -- (0Zu);
			\draw[->] (0Yo) -- (F'Y);
			\draw[->] (F'Y) -- (FY);
			\draw[->] (FY) -- (F''Y);
			\draw[->] (F''Y) -- (0Yu);
			\draw[->] (0'l) -- (F'X);
			\draw[->] (F'X) -- (F'Z);
			\draw[->] (F'Z) -- (F'Y);
			\draw[->] (F'Y) -- (0'r);
			\draw[->] (0l) -- (FX);
			\draw[->] (FX) -- (FZ);
			\draw[->] (FZ) -- (FY);
			\draw[->] (FY) -- (0r);
			\draw[->] (0''l) -- (F''X);
			\draw[->] (F''X) -- (F''Z);
			\draw[->] (F''Z) -- (F''Y);
			\draw[->] (F''Y) -- (0''r);
		\end{diagram*}
		(where $K^\bullet $ is the same as in the proof of \itememph{a}).
\end{proof}
\begin{proof}[Proof of Proposition~\reff{prop:Hufeisenlemma}]
	Part \itememph{a}. For $n\geq 1$ denote the image of $d_{I }^{n-1}\colon I^{n-1}\morphism I^n$ by $B^n\subseteq I^n$ and let $B^0\subseteq I^0$ be the image of $\xi$. As $B^0\simeq X$ we have a morphism $f^0\colon B^0\morphism J^0$ such that $\upsilon f=f^0\xi$. We now construct the required morphisms $\phi $ inductively. Let $n\geq 0$ and suppose that $\phi^k\colon I^k\morphism J^k$ have already been constructed for $k=-1,\ldots,n-1$ (where $\phi^{-1}=f$) as well as $f^n\colon B^n\morphism J^n$ such that $d_{J }^{k-1}\phi^{k-1}=\phi^kd_{I }^{k-1}$ for $k< n$ and $d_{J  }^{n-1}\phi^{n-1}=f^nd_{I }^n$ (where we set $d_{I }^{-1}=\xi$ and $d_{J }^{-1}=\upsilon$). Let $\phi^n\colon I^n\morphism J^n$ be any extension of $f^n$ using that $J^n$ is injective and $B^n\monomorphism I^n$ a monomorphism. We have $d_{J }^{n}\phi ^nd_{I }^n=d_{J }^{n-1}f^nd_{I }^{n-1}=d_{J }^nd_{J }^{n-1}\phi^{n-1}=0$, hence $d_{J }^n\phi^n\colon I^n\morphism J^{n+1}$ factors over $\coker(d_{I }^n)\simeq I^n/B^n=I^n/Z^n(I^\bullet )\simeq B^{n+1}$ by exactness of the resolution, which gives $f^{n+1}\colon B^{n+1}\morphism J^{n+1}$. This completes the induction.
	
	Part \itememph{b}. Professor Franke suggests the horseshoe lemma is best understood if you work out the proof for yourself, so you might want to do just that instead. However, for the sake of completeness of these notes I will now include the proof I obediently worked out for myself.
	
	Let $\psi $ be another lift of $f$. Then $(\psi^0-\phi^0)\xi=\upsilon f-\upsilon f=0$, hence $\psi^0-\phi^0$ factors over $\coker(\xi)=I^0/B^0\simeq B^1$, hence we get a morphism $\sigma^1\colon B^1\morphism J^0$ such that $\sigma^1d_{I }^0=\psi^0-\phi^0$. Let $s^1\colon I^1\morphism J^0$ be any extension of $\sigma^1$ using injectivity of $J^0$. We now construct the required cochain homotopy $s^\bullet $ inductively, letting $s^0=0$. Let $n\geq 1$ and suppose that $s^k\colon I^k\morphism J^{k-1}$ has already been constructed for $k\leq n$ such that $d_{J }^{k-1}s^k+s^{k+1}d_{I }^k=\psi^k-\phi^k$ for $k<n$. Then
	\begin{align*}
		\left(\psi^n-\phi^n-d_{J }^{n-1}s^n\right)d_{I }^{n-1}&=d_{J }^{n-1}\left(\psi^{n-1}-\phi^{n-1}\right)-d_{J }^{n-1}s^nd_{I }^{n-1}\\
		&=d_{J }^{n-1}\left(d_{J }^{n-2}s^{n-1}+s^nd_{I }^{n-1}\right)-d_{J }^{n-1}s^nd_{I }^{n-1}\\
		&=d_{J }^{n-1}d_{J }^{n-2}s^{n-1}\\
		&=0\;,
	\end{align*}
	hence $(\psi^n-\phi^n-d_{J }^{n-1}s^n)d_{I }^{n-1}$ factors over $\coker(d_{I }^{n-1})=I^n/B^n\simeq B^{n+1}$, giving a morphism $\sigma^{n+1}\colon B^{n+1}\morphism J^n$, which we extend to some $s^{n+1}\colon I^{n+1}\morphism J^n$ with the required property, using that $J^n$ is injective. This finishes the induction step.
	
	Part \itememph{c}. By Definition~\reff{def:injective}\itememph{b}, the rows of \eqreff{diag:resolution} except the first are automatically split, so we have no choice but $K^n=I^n\oplus J^n$ for all $n\geq 0$. By Definition~\reff{def:injective}\itememph{a} it is clear that the $K^n$ are injective again. Let $i^n\colon I^n\morphism K^n$ denote the canonical inclusion and $j^n\colon K^n\morphism J^n$ the canonical projection. We need to construct the $d_{K }^n$ and $\zeta$, which will be yet another inductive lifting argument.
	 
	 As $\alpha$ is a monomorphism, we can extend $\xi$ to some $\hat{\xi}\colon Z\morphism I^0$. Let $\zeta=\hat{\xi}\times \upsilon\beta$. Then $d_{I }^0\hat{\xi}\alpha=d_{I }^0\xi=0$, hence $d_{I }^0\hat{\xi}$ factors over $\coker(\alpha)=Y$. This gives $\delta^0\colon Y\morphism I^1$ such that $d_{I }^0\hat{\xi}=\delta^0\upsilon\beta$. Since $\upsilon$ is a monomorphism and $I^1$ injective, we can extend $-\delta^0$ to some $d^0\colon J^0\morphism I^1$. We define $d_{K }^0=(d_{I }^0+d^0)\times d_{J }^0$. By construction, this satisfies $d_{K }^0\zeta=0$.
	 
	 Let $n\geq 0$ and suppose we have already constructed $d_{K }^k=(d_{I }^k-d^k)\times d_{J }^k$ for $k\leq n$, where $d^k\colon J^k\morphism I^{k+1}$ satisfies $d_{I }^kd^{k-1}+d^kd_{J }^{k-1}=0$ for $k=1,\ldots,n$ and $d_{I }^0\hat{\xi}=d^0\upsilon\beta$ (hence $d_{K }^kd_{K }^{k-1}=0$ and $d_{K }^0\zeta=0$). Then
	 \begin{align*}
	 	d_{I }^{n+1}d^nd_{J }^{n-1}=d_{I }^{n+1}\left(-d_{I }^nd^{n-1}\right)=0\;,
	 \end{align*}
	 hence $d_{I }^{n+1}d^n$ factors over $\coker(d_{J }^{n-1})=\Im(d_{J }^n)$. This gives $\delta^{n+1}\colon \Im(d_{J }^n)\morphism I^{n+2}$, and $-\delta^{n+1}$ can be extended to some $d^{n+1}\colon J^{n+1}\morphism I^{n+2}$ (by injectivity of $I^{n+2}$) which satisfies $d_{I }^{n+1}d^{n}+d^{n+1}d_{J }^n=0$. Then $d_{K }^{n+1}=(d_{I }^{n+1}+d^{n+1})\times d_{J }^{n+1}$ fulfills $d_{K }^{n+1}d_{K }^n=0$ and the induction is complete.
	
	 It remains to verify that $Z\morphism[\zeta]K^\bullet $ is indeed a resolution, i.e., acyclic. But this is an immediate consequence of the long exact cohomology sequence for short exact sequences of chain complexes, since both $H^\bullet (I^\bullet )$ and $H^\bullet (J^\bullet )$ vanish.
\end{proof}
Left-derived functors of right-exact functors can be constructed by dualizing everything.
\begin{defi}\lbl{def:projective}
	An object $P$ in an abelian category $\Aa$ is \defemph{projective} iff the following equivalent conditions hold.
	\begin{alphanumerate}
		\item When $X\epimorphism[\xi] Y$ is an epimorphism, then any morphism $P\morphism[\pi] Y$ extends to a morphism $P\morphism X$ (i.e., $P$ is projective in the sense of Definition~\reff{def:projectiveModule}\itememph{b}).
		\item Any short exact sequence $0\morphism X'\morphism X\morphism P\morphism 0$ splits.
	\end{alphanumerate}
	The category $\Aa$ has \defemph{sufficiently many projective objects} if every object $X$ has an epimorphism $P\epimorphism X$ with $P$ injective.
\end{defi}
\begin{proof}
	Equivalence of \itememph{a} and \itememph{b} follows by dualizing the proof of Definition~\reff{def:injective}.
\end{proof}
\begin{defi}
	A \defemph{projective resolution} of an object $Y$ of an abelian category $\Aa$ is a long exact sequence
	\begin{align*}
		\ldots\morphism[d_1]P_1\morphism[d_0] P_0\morphism[\upsilon] Y\morphism 0
	\end{align*}
	with $P_0,P_1,\ldots$ projective.
\end{defi}
\begin{thm}\lbl{thm:LeftDerivedFunctors}
	Let $\Aa,\Bb$ be abelian categories where $\Aa$ has sufficiently many projective objects.
	\begin{alphanumerate}
		\item Any left-exact functor $\Aa\morphism[F]\Bb$ has a left-derived functor $L_\bullet F$.
		\item Let $\Phi_\bullet \colon \Aa\morphism\Bb$ be a homological functor, then $\Phi_\bullet $ is a right-derived functor of $\Phi_0$ iff $\Phi_pP=0$ for any projective object $P\in\Ob(\Aa)$ and all $p>0$.
		\item For a short sequence $\Ff\colon 0\morphism F'\morphism F\morphism F''\morphism0$ which is exact on projectives there is a long exact sequence
		\begin{multline*}
		\ldots\morphism L_{i+1} F''X\morphism[d_\Ff]L_i F'X\morphism L_i F X\morphism L_i F''X\morphism[d_\Ff]L_{i-1} F'X\morphism\ldots\\
		\ldots\morphism L_1 F'X\morphism[d_\Ff]\morphism F'X\morphism F X\morphism F''X\morphism 0
		\end{multline*}
		functorial in $X\in\Ob(\Aa)$ and such that the diagram
		\begin{diagram*}
			\node[ob] (F1A) at (0,1.5) {$L_i F''(X'')$};
			\node[ob] (G1A) at (0,0) {$L_{i-1} F''(X')$};
			\node[ob] (FA) at (3,1.5) {$L_{i-1} F'(X'')$};
			\node[ob] (GA) at (3,0) {$L_{i-2} F'(X')$};
			\scriptsize
			\draw[->] (F1A) -- (G1A) node[pos=0.5, left] {$\partial_{L_\bullet  F''}$};
			\draw[->] (FA) -- (GA) node[pos=0.5, right] {$-\partial_{L_\bullet  F'}$};
			\draw[->] (F1A) -- (FA) node[pos=0.5, above] {$d_\Ff$};
			\draw[->] (G1A) -- (GA) node[pos=0.5, above] {$d_\Ff$};
		\end{diagram*}
		commutes when $0\morphism X'\morphism X\morphism X''\morphism 0$ is a short exact sequence in $\Aa$ (again, note the minus!).
	\end{alphanumerate}
\end{thm}
\begin{proof}
	Dualize the proof of Theorem~\reff{thm:DerivedFunctors} and prove the dual analogues of Fact~\reff{fact:injectiveResolutions} and the Proposition~\reff{prop:Hufeisenlemma} on the way.
\end{proof}
\subsection{Construction of \texorpdfstring{$\Ext^\bullet$}{Ext}}\lbl{subsec:ConstructionOfExt}
If $\Aa$ has sufficiently many injective objects, then, for fixed objects $X$, one has a right-derived functor $\Ext_\Aa^\bullet(X,-)$ of $\Hom_\Aa(X,-)\colon \Aa\morphism\cat{Ab}$. As $\Hom_\Aa(X,-)$ is functorial in $X$, so are the $\Ext_\Aa^\bullet(X,-)$. For a short exact sequence $0\morphism X'\morphism X\morphism X''\morphism 0$ and $I$ injective, one has a short exact sequence $0\morphism\Hom_\Aa(X',I)\morphism\Hom_\Aa(X,I)\morphism\Hom_\Aa(X'',I)\morphism 0$. One thus has a long exact cohomology sequence
\begin{multline}\lbl{eq:ExtSeq1}
	0\morphism\Ext_\Aa^0(X'',Y)\morphism\Ext_\Aa^0(X,Y)\morphism\Ext_\Aa^0(X',Y)\morphism\Ext_\Aa^1(X'',Y)\morphism\ldots\\
	\ldots\morphism\Ext_\Aa^p(X'',Y)\morphism\Ext_\Aa^p(X,Y)\morphism\Ext_\Aa^p(X',Y)\morphism\Ext_\Aa^{p+1}(X'',Y)\morphism\ldots\tag{$*$}
\end{multline}
for every $Y\in\Ob(\Aa)$ coming from Theorem~\reff{thm:DerivedFunctors}\itememph{c} (somewhere we have to take contravariance into account, i.e., we consider the opposite category somewhere). Moreover, if $0\morphism Y'\morphism Y\morphism Y''\morphism 0$ is  a short exact sequence, we have a long exact sequence
\begin{multline}\lbl{eq:ExtSeq2}
0\morphism\Ext_\Aa^0(X,Y')\morphism\Ext_\Aa^0(X,Y)\morphism\Ext_\Aa^0(X,Y'')\morphism\Ext_\Aa^1(X,Y')\morphism\ldots\\
\ldots\morphism\Ext_\Aa^p(X,Y')\morphism\Ext_\Aa^p(X,Y)\morphism\Ext_\Aa^p(X,Y'')\morphism\Ext_\Aa^{p+1}(X,Y')\morphism\ldots\tag{\#}
\end{multline}
since $\Ext_\Aa^\bullet(X,-)$ is a cohomological functor; and the squares formed by the connecting morphisms of  \eqreff{eq:ExtSeq1} and \eqreff{eq:ExtSeq2} anticommute.

If $P\in\Ob(\Aa)$ is projective, then $\Hom_\Aa(P,-)$ is exact, thus
\begin{align*}
	\Ext_\Aa^p(P,Y)=H^p\big(\Hom_\Aa(P,I^\bullet)\big)=\Hom_\Aa\big(P,H^p(I^\bullet)\big)=0
\end{align*}
for $p>0$ (where $Y\morphism I^\bullet$ is any injective resolution). When $\Aa$ also has sufficiently many projective objects, then, for fixed $Y$, the functor $\Ext_\Aa^\bullet(-,Y)\colon \Aa^\op\morphism\cat{Ab}$ annihilates the injective objects of $\Aa^\op$ (the projectives of $\Aa$) in positive degrees, hence is a right-derived functor of $\Hom_\Aa(-,Y)$. Using the right-derived functors of $\Hom_\Aa(-,Y)\colon \Aa ^\op\morphism\cat{Ab}$ one also obtains $\Ext_\Aa^\bullet$ groups with \eqreff{eq:ExtSeq1} as part of the derived functor structure and \eqreff{eq:ExtSeq2} from Theorem~\reff{thm:DerivedFunctors}\itememph{c}; and when $\Aa$ also has sufficiently many injective objects, then, by the previous arguments, the $\Ext_\Aa^\bullet$ groups are canonically isomorphic to the ones obtained using injective resolutions of $Y$. To cut a long story short: For all $p\geq 0$,
\begin{align*}
	\Ext_\Aa^p(X,Y)=H^p\big(\Hom(X,I^\bullet)\big)=H^p\big(\Hom(P_\bullet,Y)\big)
\end{align*}
when $Y\morphism I^\bullet$ is an injective resolution of $Y$ and $P_\bullet\morphism X$ a projective resolution of $X$.

An alternative construction of $\Ext_\Aa^1(-,-)$ is as follows. Let $\Ext_\Aa^1(X,Y)$ be the ``class of isomorphism classes'' of short exact sequences $\Ee\colon 0\morphism Y\morphism E\morphism X\morphism 0$. Two such extensions $\Ee,\Ee'$ are isomorphic iff there is a commutative diagram 
\begin{diagram*}
	\node[ob] at (-0.75,1.5) {$\Ee\colon$};
	\node[ob] at (-0.75,0) {$\Ee'\colon$};
	\node[ob] (A) at (0,1.5) {$0$};
	\node[ob] (B) at (1.5,1.5) {$Y$};
	\node[ob] (C) at (3,1.5) {$E$};
	\node[ob] (D) at (4.5,1.5) {$X$};
	\node[ob] (E) at (6,1.5) {$0$};
	\node[ob] (A') at (0,0) {$0$};
	\node[ob] (B') at (1.5,0) {$Y$};
	\node[ob] (C') at (3,0) {$E'$};
	\node[ob] (D') at (4.5,0) {$Y$};
	\node[ob] (E') at (6,0) {$0$};
	\scriptsize
	\draw[->] (A) -- (B);
	\draw[->] (B) -- (C);
	\draw[->] (C) -- (D);
	\draw[->] (D) -- (E);
	\draw[->] (A') -- (B');
	\draw[->] (B') -- (C') node[pos=0.5, above] {$\iota$};
	\draw[->] (C') -- (D');
	\draw[->] (D') -- (E');
	\draw[transform canvas={xshift=1pt}] (B) -- (B');
	\draw[transform canvas={xshift=-1pt}] (B) -- (B');
	\draw[->] (C) -- (C');
	\draw[transform canvas={xshift=1pt}] (D) -- (D');
	\draw[transform canvas={xshift=-1pt}] (D) -- (D');
\end{diagram*}
(in which the middle vertical arrow is necessarily an isomorphism, e.g., by the snake lemma). 
To such a short exact sequence one may associate $c_\Ee$, the image of $\id_X$ under $\Hom_\Aa(X,X)\morphism\Ext_\Aa^1(X,Y)$, or $_\Ee c$, the image of $\id_Y$ under $\Hom_\Aa(Y,Y)\morphism\Ext_\Aa^1(X,Y)$.
\begin{prop}\lbl{prop:ExtExtends}
	When $\Aa$ has sufficiently many injective or projective objects, then $_\Ee c=c_\Ee$ and one has a bijection between the isomorphism classes of extensions and $\Ext_\Aa^1(X,Y)$.
\end{prop}
\begin{proof}
	\sout{Omitted} Left as an exercise.
\end{proof}
\begin{rem}
	\begin{alphanumerate}
		\item \lbl{rem:YonedaExt}The construction may have set theoretic difficulties, e.g., if $\Aa=\left\{(X,S,f)\right\}$ where $X$ is an abelian group, $S$ a set and $f\colon S\morphism\End(X)$ any function such that two elements in the image of $f$ commute; and $\Hom_\Aa((X,S,f),(Y,T,g))$ are the set of homomorphisms $X\morphism[\xi]Y$ of abelian groups such that $\xi f(s)=g(s)\xi$ when $s\in S\cap T$, $\xi f(s)=0$ when $s\in S\setminus T$, $g(t)\xi=0$ when $t\in T\setminus S$. Then there is no set of extensions of $(\IZ,\emptyset,\emptyset)$ by itself intersecting all isomorphism classes of such extensions.
		\item The higher order versions of the construction of $\Ext_\Aa^1$ by extensions involves longer exact sequences. This is called \emph{Yoneda}-$\Ext_\Aa^\bullet$ and allows to construct $\Ext_\Aa^\bullet$ groups even when there aren't sufficiently many injective or projective objects.
	\end{alphanumerate}
\end{rem}
\begin{cor}
	If $\Ext_\Aa^1(X,Y)=0$, then every short exact sequence $0\morphism Y\morphism E\morphism X\morphism 0$ splits.
\end{cor}
\begin{proof}
	This follows immediately from Proposition~\reff{prop:ExtExtends}, but it's also easy to prove without. From the long exact cohomology sequence \eqreff{eq:ExtSeq1} we get that
	\begin{align*}
		0\morphism\Hom_\Aa(X,Y)\morphism\Hom_\Aa(E,Y)\morphism\Hom_\Aa(Y,Y)\morphism \Ext_\Aa^1(X,Y)=0
	\end{align*}
	is exact, hence $\Hom_\Aa(E,Y)\morphism\Hom_\Aa(Y,Y)$ is surjective. Choosing a preimage of $\id_Y$ gives a split of the sequence (cf. the proof of Definition~\reff{def:injective}).
\end{proof}
\begin{prop}
	Let $F\colon \Aa\morphism\Bb$ be a left-exact functor between abelian categories where $\Aa$ has sufficiently many injective objects. Let $\XX$ be a class of objects in $\Aa$ with the following properties.
	\begin{alphanumerate}
		\item Let $X\simeq Y\oplus Z$, then $X\in\XX$ if and only if $Y,Z\in\XX$.
		\item Every object of $\Aa$ has a monomorphism into some element of $\XX$.
		\item If $0\morphism X\morphism Y\morphism Z\morphism 0$ is exact and $X,Y\in\XX$, then $Z\in\XX$ and $0\morphism FX\morphism FY\morphism FZ\morphism 0$  is exact.
	\end{alphanumerate}
	Then $\XX$ contains all injective objects, and $R^pF(X)=0$ when $X\in\XX$.
\end{prop}
\begin{proof}
	When $I$ is injective, there is a monomorphism $I\monomorphism X$ with $X\in \XX$. By injectivity of $I$, $\id_I$ extends to a projection $X\morphism[\pi]I$ yielding an isomorphism $X\simeq I\oplus\ker(\pi)$. Then $I\in\XX$ by condition \itememph{a}.
	
	If $X\in\XX$ and $X\morphism I^\bullet$ is an injective resolution of $X$, let $B^p=\ker\left(I^p\morphism I^{p+1}\right)$ (thus $B^0\simeq X$ and $B^{p+1}\simeq \Im\left(I^p\morphism I^{p+1}\right)$ for $p\geq 0$). Applying \itememph{c} to the short exact sequence $0\morphism B^p\morphism I^p\morphism B^{p+1}\morphism 0$ inductively shows $B^p\in \XX$ and gives short exact sequences $0\morphism FB^p\morphism FI^p\morphism FB^{p+1}\morphism 0$ which may be spliced together to show exactness of the complex $FX\morphism FI^\bullet$ Then $R^pF(X)=H^p(FI^\bullet)=0$.
\end{proof}

\section{Some notes on additive categories and additive functors}
The following lists and proves some first properties of additive categories and additive functors that Professor Franke assumed known in the lecture without explicitly mentioning them.
\begin{defi}
	\begin{alphanumerate}
		\item \lbl{def:additiveCategory}A \defemph{preadditive} category $\Aa$ is a category in which each $\Hom_\Aa(X,Y)$ for $X,Y\in\Ob(\Aa)$ is given a group structure behaving bilinearly under compositions.
		\item An \defemph{additive category} is a preadditive category which has finite products and coproducts such that the canonical morphism $\coprod_{k=1}^nX_k\morphism[c] \prod_{k=1}^{n}X_k$ is an isomorphism for all objects $X_1,\ldots,X_n\in\Ob(\Aa)$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	\begin{alphanumerate}
		\item When $\Aa$ is additive, letting $n=0$ in Definition~\reff{def:additiveCategory}\itememph{b} gives an object $*\in\Ob(\Aa)$ which is both an initial and a final object. For $X,Y\in\Ob(\Aa)$, let the \emph{zero morphism} (which we denote $0$) $X\morphism[0]Y$ be defined by $X\morphism *\morphism Y$.
		\item We will construct the canonical morphism $\coprod_{k=1}^nX_k\morphism[c] \prod_{k=1}^{n}X_k$ from Definition~\reff{def:additiveCategory}\itememph{b}. Let $X_k\morphism[i_k]\coprod_{k=1}X_k$ and $\prod_{k=1}^nX_k\morphism[p_k]X_k$ be the associated inclusion and projection morphisms.
		
		Using the universal property of $\prod_{k=1}^{n}X_k$, we get unique morphisms $X_j\morphism[\alpha_j]\prod_{k=1}^{n}X_k$ such that $p_k\alpha_j=\id_X$ if $k=j$ and $0$ else. Then 
		\begin{align*}
		c\colon \coprod_{k=1}^nX_k\xrightarrow{\coprod\alpha_k}\prod_{k=1}^{n}X_k
		\end{align*}
		is the morphism we are looking for. It is unique with the property that $p_k c i_j=\id_X$, if $k=j$ and $0$ else.
		\item The isomorphism $c$ is usually suppressed in the notation and one denotes both products and coproducts $\bigoplus_{k=1}^nX_k$.
	\end{alphanumerate}
\end{rem*}
\begin{prop}\lbl{prop:AdditiveStructureUnique}
	Suppose that $\Aa$ is additive. The group structure on $\Hom_\Aa(X,Y)$ for $X,Y\in\Ob(\Aa)$ is automatically abelian and given as follows. For a pair of morphisms $X\doublemorphism[a][b]Y$, their sum $a+b$ is the composition
	\begin{align*}
	X\xrightarrow{\id_X\times\id_X}X\oplus X\xrightarrow{a\amalg b}Y
	\end{align*}
	and $0$ is the neutral element.
\end{prop}
\begin{proof}
	We first show the characterization of the addition in $\Hom_\Aa(X,Y)$. First thing to check is that $0$ is indeed the neutral element. As $*$ is a final object, $\Hom_\Aa(X,*)$ has only one element $\pi$ and is thus the zero group. In particular, $\pi+\pi=\pi$ and if $\iota$ denotes $*\morphism Y$, then $0=\iota\pi=\iota(\pi+\pi)=0+0$, hence $0$ is indeed the neutral element.
	
	Now let $\Delta=\id_X\times \id_X$ be the diagonal and denote $i_1,i_2$ the inclusions of $X$ in $X\oplus X$ and $p_1,p_2$ the projections of $X\oplus X$ to $X$. We show $\Delta=i_1+i_2$. Indeed, we have $p_1(i_1+i_2)=p_1i_1+p_1i_2=\id_X+0=\id_X$ and similarly $p_2(i_1+i_2)j_2=\id_X$, which is exactly how $\Delta$ is characterized. Hence 
	\begin{align*}
		(a\amalg b)\circ \Delta=(a\amalg b)\circ (i_1+i_2)=(a\amalg b)\circ i_1+(a\amalg b)\circ i_2=a+b\;.
	\end{align*}
	
	For commutativity, we need to show $(a\amalg b)\circ\Delta=(b\amalg a)\circ\Delta$. The universal property of coproducts gives a unique $X\oplus X\morphism[\sigma]X\oplus X$ such that
	\begin{diagram*}
		\node (XX2) at (0,0) {$X\oplus X$};
		\node (X1) at (-1,1.25) {$X$};
		\node (X2) at (-1,-1.25) {$X$};
		\node (XX1) at (-2,0) {$X\oplus X$};
		\node (Y) at (2.5,0) {$Y$};
		\scriptsize
		\draw[<-] (XX2) -- (X1) node[pos=0.5, above right] {$i_1$};
		\draw[<-] (XX2) -- (X2) node[pos=0.5, below right] {$i_2$};
		\draw[->] (XX2) -- (Y) node[pos = 0.5, above] {$a\amalg b$};
		\draw[<-, bend right] (Y) to node[pos=0.5,below left] {$a$} (X1);
		\draw[<-, bend left] (Y) to node[pos=0.5,above left] {$b$} (X2);
		\draw[<-] (XX1) -- (X1) node[pos=0.5, above left] {$i_2$};
		\draw[<-] (XX1) -- (X2) node[pos=0.5, below left] {$i_1$};
		\draw[->, dashed] (XX1) -- (XX2) node[pos=0.5, above] {$\exists!\ \sigma$};
	\end{diagram*}
	commutes. Then $\sigma$ is easily seen to be an isomorphism and $b\amalg a=(a\amalg b)\circ \sigma$ by the uniqueness of $b\amalg a$. It thus suffices to show $\sigma\Delta=\Delta$. By the uniqueness of $\Delta$, this is equivalent to $p_1\sigma\Delta=\id_X$ and $p_2\sigma\Delta=\id_X$. We claim that $p_1\sigma=p_2$ and vice versa, which would finish the proof. To see this, note that $p_1\sigma=p_2$ is equivalent to $p_1\sigma i_1=p_2i_1=0$ and $p_1\sigma i_2=p_2i_2=\id_X$ by the universal property of the coproduct $X\oplus X$. This follows from $\sigma i_1=i_2$ and $\sigma i_2=i_1$ by definition of $\sigma$.
\end{proof}
\begin{defi}\lbl{def:additiveFunctor}
	A functor between preadditive categories (cf. \cite[Definition~A.1.1\itememph{b}]{alggeo2}) is \defemph{additive} if it preserves finite biproducts together with the canonical inclusion and projection morphism to and from them.
\end{defi}
\begin{rem*}
	Definition~\reff{def:additiveFunctor} seems kind of counterintuitive, as one would rather expect an additive functor to induce group homomorphisms on $\Hom$ sets. For additive categories, this alternative definition turns out to be equivalent.
\end{rem*}
\begin{prop}
	Let $F\colon \Aa\morphism\Bb$ be a functor between additive categories. Then $F$ is additive iff $F$ induces a group homomorphism $\Hom_\Aa(X,Y)\morphism[F]\Hom_\Bb(FX,FY)$ for every $X,Y\in\Ob(\Aa)$.
\end{prop}
\begin{proof}
	If $F$ is an additive functor, i.e., preserves finite biproducts and the associated structure morphisms, then it is clear that $F$ is compatible with the addition as in constructed Proposition~\reff{prop:AdditiveStructureUnique}.
	
	Conversely, suppose that $F$ is compatible with the addition. Let $X,Y\in\Ob(\Aa)$. Let $i_X,i_Y$ be the inclusions of $X,Y$ in $X\oplus Y$ and $p_X,p_Y$ the projections of $X\oplus Y$ onto $X,Y$. Define $j_X,j_Y$ and $q_X,q_Y$ analogously for $FX\oplus FY$. By the two universal properties of the biproduct $FX\oplus FY$ we get morphisms $F(X\oplus Y)\morphism[q]FX\oplus FY$ and $FX\oplus FY\morphism[j]F(X\oplus Y)$ such that 
	\begin{center}
		\begin{minipage}{0.4\textwidth}
			\centering				
			\begin{diagram*}
				\node (XY) at (0,0) {$FX\oplus FY$};
				\node (X) at (1,1.25) {$FX$};
				\node (Y) at (1,-1.25) {$FY$};
				\node (T) at (-3,0) {$F(X\oplus Y)$};
				\scriptsize
				\draw[->] (XY) -- (X) node[pos=0.5, above left] {$q_X$};
				\draw[->] (XY) -- (Y) node[pos=0.5, below left] {$q_Y$};
				\draw[->, dashed] (T) -- (XY) node[pos = 0.5, above] {$\exists!\ q$};
				\draw[->, bend left] (T) to node[pos=0.5,below right] {$F(p_X)$} (X);
				\draw[->, bend right] (T) to node[pos=0.5,above right] {$F(p_Y)$} (Y);
			\end{diagram*}
		\end{minipage}and
		\begin{minipage}{0.4\textwidth}
			\centering				
			\begin{diagram*}
				\node (XY) at (0,0) {$FX\oplus FY$};
				\node (X) at (-1,1.25) {$FX$};
				\node (Y) at (-1,-1.25) {$FY$};
				\node (T) at (3,0) {$F(X\oplus Y)$};
				\scriptsize
				\draw[<-] (XY) -- (X) node[pos=0.5, above right] {$j_X$};
				\draw[<-] (XY) -- (Y) node[pos=0.5, below right] {$j_Y$};
				\draw[->, dashed] (XY) -- (T) node[pos = 0.5, above] {$\exists!\ j$};
				\draw[<-, bend right] (T) to node[pos=0.5,below left] {$F(i_X)$} (X);
				\draw[<-, bend left] (T) to node[pos=0.5,above left] {$F(i_Y)$} (Y);
			\end{diagram*}
		\end{minipage}
	\end{center}
	are commutative diagrams.
	
	Then $qj=\id_{FX\oplus FY}$ holds since $q_X(qj)i_X=F(p_X)F(i_X)=F(\id_X)=\id_{FX}$ and $q_Y(qj)i_X=F(p_Y)F(i_X)=F(0)=0$ and similar conditions hold when $X$ and $Y$ switch roles, which precisely characterize $\id_{FX\oplus FY}$. To show $jq=\id_{F(X\oplus Y)}$, write $\id_{FX\oplus FX}=j_Xq_X+j_Yq_Y$ to get
	\begin{align*}
		jq=j(j_Xq_X+j_Yq_Y) q=F(i_X)F(p_X)+F(i_Y)F(p_Y)
		=F(i_Xp_X+i_Yp_Y)
	\end{align*}
	using that $F$ is a group homomorphism. Now $i_Xp_X+i_Yp_Y=\id_{X\oplus Y}$, so we can further deduce $jq=F(\id_{X\oplus Y})=\id_{F(X\oplus Y)}$. This shows that $j$ and $q$ are inverse to each other, hence $F(X\oplus Y)\simeq FX\oplus FY$ and this is compatible with the structure morphisms.
\end{proof}
\begin{defi}\lbl{def:leftrightexact}
	A functor is called \defemph{left-exact} if it preserves finite limits, and \defemph{right-exact} if it preserves finite colimits.
\end{defi}
\begin{rem}\lbl{rem:left-exactAdditive}
	Again, this is not quite what one would expect, and again, it turns out to be essentially equivalent to the expected definition under the right circumstances. A left-exact functor in the sense of Definition~\reff{def:leftrightexact} between abelian categories preserves, in particular, kernels, and thus short left-exact sequences. Also, it preserves finite products and their projection morphisms (as certain limits) and hence direct sums, i.e., is additive (one easily checks that the inclusion morphisms are then preserved as well). Conversely, an additive functor between abelian categories that preserves kernels is already left-exact, since every finite limit can be built from finite products and equalizers (which we have, since there are kernels).
\end{rem}
\begin{prop}\lbl{prop:injectiveSeqsStayExact}
	When $F\colon \Aa\morphism\Bb$ is a left-exact functor between abelian categories $\Aa,\Bb$ and $0\morphism I\morphism X\morphism X''\morphism 0$ a short exact sequence in $\Aa$ with $I$ an injective object of $\Aa$, then $0\morphism FI\morphism FX\morphism FX''\morphism 0$ is a short exact sequence in $\Bb$.
\end{prop}
\begin{proof}
	Since $I$ is injective, the sequence $0\morphism I\morphism X\morphism X''\morphism 0$ splits due to Definition~\reff{def:injective}\itememph{b}, i.e., $X\simeq I\oplus X''$. Since $F$ is additive, $FX\simeq FI\oplus FX''$, and $FI\morphism FX$ and $FX\morphism FX''$ correspond to the inclusion of $FI$ respectively projection onto $FX''$.
\end{proof}

\printbibliography

\end{document}          
